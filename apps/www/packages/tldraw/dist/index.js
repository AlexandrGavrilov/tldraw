var Sp=Object.create;var Fo=Object.defineProperty,Tp=Object.defineProperties,bp=Object.getOwnPropertyDescriptor,yp=Object.getOwnPropertyDescriptors,wp=Object.getOwnPropertyNames,ws=Object.getOwnPropertySymbols,xp=Object.getPrototypeOf,Mi=Object.prototype.hasOwnProperty,ha=Object.prototype.propertyIsEnumerable;var Ei=(s,e,t)=>e in s?Fo(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,f=(s,e)=>{for(var t in e||(e={}))Mi.call(e,t)&&Ei(s,t,e[t]);if(ws)for(var t of ws(e))ha.call(e,t)&&Ei(s,t,e[t]);return s},C=(s,e)=>Tp(s,yp(e)),ma=s=>Fo(s,"__esModule",{value:!0});var Je=(s,e)=>{var t={};for(var n in s)Mi.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&ws)for(var n of ws(s))e.indexOf(n)<0&&ha.call(s,n)&&(t[n]=s[n]);return t};var Ut=(s,e)=>()=>(s&&(e=s(s=0)),e);var Dn=(s,e)=>{for(var t in e)Fo(s,t,{get:e[t],enumerable:!0})},ga=(s,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of wp(e))!Mi.call(s,o)&&(t||o!=="default")&&Fo(s,o,{get:()=>e[o],enumerable:!(n=bp(e,o))||n.enumerable});return s},M=(s,e)=>ga(ma(Fo(s!=null?Sp(xp(s)):{},"default",!e&&s&&s.__esModule?{get:()=>s.default,enumerable:!0}:{value:s,enumerable:!0})),s),Ip=(s=>(e,t)=>s&&s.get(e)||(t=ga(ma({}),e,1),s&&s.set(e,t),t))(typeof WeakMap!="undefined"?new WeakMap:0);var d=(s,e,t)=>(Ei(s,typeof e!="symbol"?e+"":e,t),t);var te=(s,e,t)=>new Promise((n,o)=>{var i=r=>{try{l(t.next(r))}catch(c){o(c)}},a=r=>{try{l(t.throw(r))}catch(c){o(c)}},l=r=>r.done?n(r.value):Promise.resolve(r.value).then(i,a);l((t=t.apply(s,e)).next())});var kp,Pn,$o=Ut(()=>{kp=(()=>{if(typeof self=="undefined")return!1;if("top"in self&&self!==top)try{top.location+""}catch(s){return!1}else if("showOpenFilePicker"in self)return"showOpenFilePicker";return!1})(),Pn=kp});var Ta={};Dn(Ta,{default:()=>Dp});var Dp,ba=Ut(()=>{Dp=(...e)=>te(void 0,[...e],function*(s=[{}]){return Array.isArray(s)||(s=[s]),new Promise((t,n)=>{let o=document.createElement("input");o.type="file";let i=[...s.map(c=>c.mimeTypes||[]).join(),s.map(c=>c.extensions||[]).join()].join();o.multiple=s[0].multiple||!1,o.accept=i||"";let a=()=>r(n),l=c=>{typeof r=="function"&&r(),t(c)},r=s[0].legacySetup&&s[0].legacySetup(l,a,o);o.addEventListener("change",()=>{l(o.multiple?Array.from(o.files):o.files[0])}),o.click()})})});var ya={};Dn(ya,{default:()=>Bp});var Pp,Bp,wa=Ut(()=>{Pp=s=>te(void 0,null,function*(){let e=yield s.getFile();return e.handle=s,e}),Bp=(...e)=>te(void 0,[...e],function*(s=[{}]){Array.isArray(s)||(s=[s]);let t=[];s.forEach((i,a)=>{t[a]={description:i.description||"",accept:{}},i.mimeTypes?i.mimeTypes.map(l=>{t[a].accept[l]=i.extensions||[]}):t[a].accept["*/*"]=i.extensions||[]});let n=yield window.showOpenFilePicker({id:s[0].id,startIn:s[0].startIn,types:t,multiple:s[0].multiple||!1,excludeAcceptAllOption:s[0].excludeAcceptAllOption||!1}),o=yield Promise.all(n.map(Pp));return s[0].multiple?o:o[0]})});function xa(...s){return te(this,null,function*(){return(yield Ep).default(...s)})}var Ep,Ia=Ut(()=>{$o();Ep=Pn?Promise.resolve().then(()=>(wa(),ya)):Promise.resolve().then(()=>(ba(),Ta))});var Ca={};Dn(Ca,{default:()=>Mp});var Mp,va=Ut(()=>{Mp=(...e)=>te(void 0,[...e],function*(s=[{}]){return Array.isArray(s)||(s=[s]),s[0].recursive=s[0].recursive||!1,new Promise((t,n)=>{let o=document.createElement("input");o.type="file",o.webkitdirectory=!0;let i=()=>l(n),a=r=>{typeof l=="function"&&l(),t(r)},l=s[0].legacySetup&&s[0].legacySetup(a,i,o);o.addEventListener("change",()=>{let r=Array.from(o.files);s[0].recursive?s[0].recursive&&s[0].skipDirectory&&(r=r.filter(c=>c.webkitRelativePath.split("/").every(u=>!s[0].skipDirectory({name:u,kind:"directory"})))):r=r.filter(c=>c.webkitRelativePath.split("/").length===2),a(r)}),o.click()})})});var Da={};Dn(Da,{default:()=>Rp});var ka,Rp,Pa=Ut(()=>{ka=(o,i,...a)=>te(void 0,[o,i,...a],function*(s,e,t=s.name,n){let l=[],r=[];for(let c of s.values()){let p=`${t}/${c.name}`;c.kind==="file"?r.push(yield c.getFile().then(u=>(u.directoryHandle=s,Object.defineProperty(u,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>p})))):c.kind==="directory"&&e&&(!n||!n(c))&&l.push(yield ka(c,e,p,n))}return[...(yield Promise.all(l)).flat(),...yield Promise.all(r)]}),Rp=(...e)=>te(void 0,[...e],function*(s={}){s.recursive=s.recursive||!1;let t=yield window.showDirectoryPicker({id:s.id,startIn:s.startIn});return ka(t,s.recursive,void 0,s.skipDirectory)})});function Ba(...s){return te(this,null,function*(){return(yield Lp).default(...s)})}var Lp,Ea=Ut(()=>{$o();Lp=Pn?Promise.resolve().then(()=>(Pa(),Da)):Promise.resolve().then(()=>(va(),Ca))});var Ma={};Dn(Ma,{default:()=>Ap});function Hp(s,e){return te(this,null,function*(){let t=s.getReader(),n=new ReadableStream({start(i){return a();function a(){return te(this,null,function*(){return t.read().then(({done:l,value:r})=>{if(l){i.close();return}return i.enqueue(r),a()})})}}}),o=new Response(n);return t.releaseLock(),new Blob([yield o.blob()],{type:e})})}var Ap,Ra=Ut(()=>{Ap=(t,...n)=>te(void 0,[t,...n],function*(s,e={}){Array.isArray(e)&&(e=e[0]);let o=document.createElement("a"),i=s;"body"in s&&(i=yield Hp(s.body,s.headers.get("content-type"))),o.download=e.fileName||"Untitled",o.href=URL.createObjectURL(i);let a=()=>r(reject),l=()=>{typeof r=="function"&&r()},r=e.legacySetup&&e.legacySetup(l,a,o);return o.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(o.href),30*1e3),l(null)}),o.click(),null})});var La={};Dn(La,{default:()=>zp});var zp,Aa=Ut(()=>{zp=(o,...i)=>te(void 0,[o,...i],function*(s,e=[{}],t=null,n=!1){Array.isArray(e)||(e=[e]),e[0].fileName=e[0].fileName||"Untitled";let a=[];if(e.forEach((c,p)=>{a[p]={description:c.description||"",accept:{}},c.mimeTypes?(p===0&&(s.type?c.mimeTypes.push(s.type):s.headers&&s.headers.get("content-type")&&c.mimeTypes.push(s.headers.get("content-type"))),c.mimeTypes.map(u=>{a[p].accept[u]=c.extensions||[]})):s.type&&(a[p].accept[s.type]=c.extensions||[])}),t)try{yield t.getFile()}catch(c){if(t=null,n)throw c}let l=t||(yield window.showSaveFilePicker({suggestedName:e[0].fileName,id:e[0].id,startIn:e[0].startIn,types:a,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1})),r=yield l.createWritable();return"stream"in s?(yield s.stream().pipeTo(r),l):"body"in s?(yield s.body.pipeTo(r),l):(yield r.write(blob),yield r.close(),l)})});function Ha(...s){return te(this,null,function*(){return(yield Fp).default(...s)})}var Fp,za=Ut(()=>{$o();Fp=Pn?Promise.resolve().then(()=>(Aa(),La)):Promise.resolve().then(()=>(Ra(),Ma))});var Es={};Dn(Es,{directoryOpen:()=>Ba,fileOpen:()=>xa,fileSave:()=>Ha,supported:()=>Pn});var No=Ut(()=>{Ia();Ea();za();$o();});var LF={};Dn(LF,{AlignStyle:()=>Jt,AlignType:()=>Oo,Arrow:()=>Io,ColorStyle:()=>ks,DashStyle:()=>qt,Decoration:()=>Go,DistributeType:()=>Uo,Draw:()=>ei,Ellipse:()=>Qs,FlipType:()=>vs,FontSize:()=>Sa,FontStyle:()=>lo,Group:()=>Vd,Image:()=>$d,MoveType:()=>Cs,Rectangle:()=>qs,SessionType:()=>Me,SizeStyle:()=>Vo,Sticky:()=>Jo,StretchType:()=>jo,TDAssetType:()=>Ds,TDEventHandler:()=>Is,TDExportType:()=>co,TDShapeType:()=>ye,TDStatus:()=>wt,TDUserStatus:()=>fa,TLDR:()=>I,Text:()=>Gd,Tldraw:()=>DF,TldrawApp:()=>un,Triangle:()=>Js,Video:()=>Nd,getShapeUtil:()=>dr,shapeUtils:()=>ln,useFileSystem:()=>Gl});var Se=M(require("react")),mp=require("@tldraw/core"),gp=require("react-intl");var xs=require("@stitches/react"),{styled:R,createTheme:Cp}=(0,xs.createStitches)({themeMap:f({},xs.defaultThemeMap),theme:{colors:{bounds:"rgba(65, 132, 244, 1.000)",boundsBg:"rgba(65, 132, 244, 0.05)",hover:"#ececec",overlay:"rgba(0, 0, 0, 0.15)",overlayContrast:"rgba(255, 255, 255, 0.15)",panel:"#fefefe",panelContrast:"#ffffff",selected:"rgba(66, 133, 244, 1.000)",selectedContrast:"#fefefe",sponsor:"#ec6cb9",sponsorContrast:"#ec6cb944",text:"#333333",tooltip:"#1d1d1d",tooltipContrast:"#ffffff",warn:"rgba(255, 100, 100, 1)",canvas:"rgb(248, 249, 250)"},shadows:{2:"0px 1px 1px rgba(0, 0, 0, 0.14)",3:"0px 2px 3px rgba(0, 0, 0, 0.14)",4:"0px 4px 5px -1px rgba(0, 0, 0, 0.14)",8:"0px 12px 17px rgba(0, 0, 0, 0.14)",12:"0px 12px 17px rgba(0, 0, 0, 0.14)",24:"0px 24px 38px rgba(0, 0, 0, 0.14)",key:"1px 1px rgba(0,0,0,1)",panel:`0px 0px 16px -1px rgba(0, 0, 0, 0.05), 
        0px 0px 16px -8px rgba(0, 0, 0, 0.05), 
        0px 0px 16px -12px rgba(0, 0, 0, 0.12),
        0px 0px 2px 0px rgba(0, 0, 0, 0.08)`},space:{0:"2px",1:"3px",2:"4px",3:"8px",4:"12px",5:"16px",6:"32px",7:"48px"},fontSizes:{0:"10px",1:"12px",2:"13px",3:"16px",4:"18px"},fonts:{ui:'"Recursive", system-ui, sans-serif',body:'"Recursive", system-ui, sans-serif',mono:'"Recursive Mono", monospace'},fontWeights:{},lineHeights:{},letterSpacings:{},sizes:{},borderWidths:{0:"$1"},borderStyles:{},radii:{0:"2px",1:"4px",2:"8px",3:"12px",4:"16px"},zIndices:{},transitions:{}},media:{micro:"(max-width: 370px)",sm:"(min-width: 640px)",md:"(min-width: 768px)",lg:"(min-width: 1024px)"},utils:{zStrokeWidth:()=>s=>Array.isArray(s)?{strokeWidth:`calc(${s[0]}px / var(--camera-zoom))`}:{strokeWidth:`calc(${s}px / var(--camera-zoom))`}}}),Ri=Cp({colors:{bounds:"rgba(38, 150, 255, 1.000)",boundsBg:"rgba(38, 150, 255, 0.05)",hover:"#444A50",overlay:"rgba(0, 0, 0, 0.15)",overlayContrast:"rgba(255, 255, 255, 0.15)",panel:"#363D44",panelContrast:"#49555f",selected:"rgba(38, 150, 255, 1.000)",selectedContrast:"#fefefe",text:"#f8f9fa",tooltip:"#1d1d1d",tooltipContrast:"#ffffff",canvas:"#212529"},shadows:{2:"0px 1px 1px rgba(0, 0, 0, 0.24)",3:"0px 2px 3px rgba(0, 0, 0, 0.24)",4:"0px 4px 5px -1px rgba(0, 0, 0, 0.24)",8:"0px 12px 17px rgba(0, 0, 0, 0.24)",12:"0px 12px 17px rgba(0, 0, 0, 0.24)",24:"0px 24px 38px rgba(0, 0, 0, 0.24)",panel:`0px 0px 16px -1px rgba(0, 0, 0, 0.05), 
      0px 0px 16px -8px rgba(0, 0, 0, 0.09), 
      0px 0px 16px -12px rgba(0, 0, 0, 0.2)`}});var Is=class{constructor(){d(this,"onPinchStart");d(this,"onPinchEnd");d(this,"onPinch");d(this,"onKeyDown");d(this,"onKeyUp");d(this,"onPointerMove");d(this,"onPointerUp");d(this,"onPan");d(this,"onZoom");d(this,"onPointerDown");d(this,"onPointCanvas");d(this,"onDoubleClickCanvas");d(this,"onRightPointCanvas");d(this,"onDragCanvas");d(this,"onReleaseCanvas");d(this,"onPointShape");d(this,"onDoubleClickShape");d(this,"onRightPointShape");d(this,"onDragShape");d(this,"onHoverShape");d(this,"onUnhoverShape");d(this,"onReleaseShape");d(this,"onPointBounds");d(this,"onDoubleClickBounds");d(this,"onRightPointBounds");d(this,"onDragBounds");d(this,"onHoverBounds");d(this,"onUnhoverBounds");d(this,"onReleaseBounds");d(this,"onPointBoundsHandle");d(this,"onDoubleClickBoundsHandle");d(this,"onRightPointBoundsHandle");d(this,"onDragBoundsHandle");d(this,"onHoverBoundsHandle");d(this,"onUnhoverBoundsHandle");d(this,"onReleaseBoundsHandle");d(this,"onPointHandle");d(this,"onDoubleClickHandle");d(this,"onRightPointHandle");d(this,"onDragHandle");d(this,"onHoverHandle");d(this,"onUnhoverHandle");d(this,"onReleaseHandle");d(this,"onShapeBlur");d(this,"onShapeClone")}},fa=(o=>(o.Idle="idle",o.Connecting="connecting",o.Connected="connected",o.Disconnected="disconnected",o))(fa||{}),Me=(u=>(u.Transform="transform",u.Translate="translate",u.TransformSingle="transformSingle",u.Brush="brush",u.Arrow="arrow",u.Draw="draw",u.Erase="erase",u.Rotate="rotate",u.Handle="handle",u.Grid="grid",u.Edit="edit",u))(Me||{}),wt=(m=>(m.Idle="idle",m.PointingHandle="pointingHandle",m.PointingBounds="pointingBounds",m.PointingBoundsHandle="pointingBoundsHandle",m.TranslatingLabel="translatingLabel",m.TranslatingHandle="translatingHandle",m.Translating="translating",m.Transforming="transforming",m.Rotating="rotating",m.Pinching="pinching",m.Brushing="brushing",m.Creating="creating",m.EditingText="editing-text",m))(wt||{}),Cs=(o=>(o.Backward="backward",o.Forward="forward",o.ToFront="toFront",o.ToBack="toBack",o))(Cs||{}),Oo=(a=>(a.Top="top",a.CenterVertical="centerVertical",a.Bottom="bottom",a.Left="left",a.CenterHorizontal="centerHorizontal",a.Right="right",a))(Oo||{}),jo=(t=>(t.Horizontal="horizontal",t.Vertical="vertical",t))(jo||{}),Uo=(t=>(t.Horizontal="horizontal",t.Vertical="vertical",t))(Uo||{}),vs=(t=>(t.Horizontal="horizontal",t.Vertical="vertical",t))(vs||{}),ye=(u=>(u.Sticky="sticky",u.Ellipse="ellipse",u.Rectangle="rectangle",u.Triangle="triangle",u.Draw="draw",u.Arrow="arrow",u.Line="line",u.Text="text",u.Group="group",u.Image="image",u.Video="video",u))(ye||{}),Go=(e=>(e.Arrow="arrow",e))(Go||{}),ks=(h=>(h.White="white",h.LightGray="lightGray",h.Gray="gray",h.Black="black",h.Green="green",h.Cyan="cyan",h.Blue="blue",h.Indigo="indigo",h.Violet="violet",h.Red="red",h.Orange="orange",h.Yellow="yellow",h))(ks||{}),Vo=(n=>(n.Small="small",n.Medium="medium",n.Large="large",n))(Vo||{}),qt=(o=>(o.Draw="draw",o.Solid="solid",o.Dashed="dashed",o.Dotted="dotted",o))(qt||{}),Sa=(o=>(o.Small="small",o.Medium="medium",o.Large="large",o.ExtraLarge="extraLarge",o))(Sa||{}),Jt=(o=>(o.Start="start",o.Middle="middle",o.End="end",o.Justify="justify",o))(Jt||{}),lo=(o=>(o.Script="script",o.Sans="sans",o.Serif="erif",o.Mono="mono",o))(lo||{}),Ds=(t=>(t.Image="image",t.Video="video",t))(Ds||{}),co=(i=>(i.PNG="png",i.JPG="jpeg",i.WEBP="webp",i.SVG="svg",i.JSON="json",i))(co||{});var he=require("@tldraw/vec"),Tt=require("@tldraw/core");function Sn(s,e){let{document:t,settings:n}=s,{version:o=0}=t;"assets"in t||(t.assets={});let i=new Set;return Object.values(t.pages).forEach(a=>Object.values(a.shapes).forEach(l=>{let{parentId:r,children:c,assetId:p}=l;p&&i.add(p),r!==a.id&&!a.shapes[r]&&(console.warn("Encountered a shape with a missing parent!"),l.parentId=a.id),l.type==="group"&&c&&c.forEach(u=>{a.shapes[u]||(console.warn("Encountered a parent with a missing child!",l.id,u),c==null||c.splice(c.indexOf(u),1))})})),Object.keys(t.assets).forEach(a=>{i.has(a)||delete t.assets[a]}),o===e||(o<14&&Object.values(t.pages).forEach(a=>{Object.values(a.shapes).filter(l=>l.type==="text").forEach(l=>l.style.font==="script")}),o<=13&&Object.values(t.pages).forEach(a=>{Object.values(a.bindings).forEach(l=>{Object.assign(l,l.meta)}),Object.values(a.shapes).forEach(l=>{Object.entries(l.style).forEach(([r,c])=>{typeof c=="string"&&(l.style[r]=c.toLowerCase())}),l.type==="arrow"&&l.decorations&&Object.entries(l.decorations).forEach(([r,c])=>{c==="Arrow"&&(l.decorations=C(f({},l.decorations),{[r]:"arrow"}))})})}),o<=13.1&&(t.name="New Document"),o<15&&(t.assets={}),Object.values(t.pages).forEach(a=>{Object.values(a.shapes).forEach(l=>{o<15.2&&(l.type==="image"||l.type==="video")&&(l.style.isFilled=!0),o<15.3&&(l.type==="rectangle"||l.type==="triangle"||l.type==="ellipse"||l.type==="arrow")&&(l.label=l.text||"",l.labelPoint=[.5,.5])})}),o<15.4&&(n.dockPosition="bottom"),Object.values(t.pageStates).forEach(a=>{a.selectedIds=a.selectedIds.filter(l=>t.pages[a.id].shapes[l]!==void 0),a.bindingId=void 0,a.editingId=void 0,a.hoveredId=void 0,a.pointedId=void 0}),t.version=e),s}var Ms=require("idb-keyval");var Zn="-0.03em";var po=[.5,.5],NF=Math.PI*2,Xn={linear:s=>s,easeInQuad:s=>s*s,easeOutQuad:s=>s*(2-s),easeInOutQuad:s=>s<.5?2*s*s:-1+(4-2*s)*s,easeInCubic:s=>s*s*s,easeOutCubic:s=>--s*s*s+1,easeInOutCubic:s=>s<.5?4*s*s*s:(s-1)*(2*s-2)*(2*s-2)+1,easeInQuart:s=>s*s*s*s,easeOutQuart:s=>1- --s*s*s*s,easeInOutQuart:s=>s<.5?8*s*s*s*s:1-8*--s*s*s*s,easeInQuint:s=>s*s*s*s*s,easeOutQuint:s=>1+--s*s*s*s*s,easeInOutQuint:s=>s<.5?16*s*s*s*s*s:1+16*--s*s*s*s*s,easeInSine:s=>1-Math.cos(s*Math.PI/2),easeOutSine:s=>Math.sin(s*Math.PI/2),easeInOutSine:s=>-(Math.cos(Math.PI*s)-1)/2,easeInExpo:s=>s<=0?0:Math.pow(2,10*s-10),easeOutExpo:s=>s>=1?1:1-Math.pow(2,-10*s),easeInOutExpo:s=>s<=0?0:s>=1?1:s<.5?Math.pow(2,20*s-10)/2:(2-Math.pow(2,-20*s+10))/2};var Li=["#EC5E41","#F2555A","#F04F88","#E34BA9","#BD54C6","#9D5BD2","#7B66DC","#02B1CC","#11B3A3","#39B178","#55B467","#FF802B"],vp=typeof Window=="undefined"?!1:/^((?!chrome|android).)*safari/i.test(navigator.userAgent),Ps=[".png",".svg",".jpg",".jpeg",".gif"],Bs=vp?[]:[".mp4",".webm"];var Fa={mode:"readwrite"},Op=s=>te(void 0,null,function*(){return(yield s.queryPermission(Fa))==="granted"||(yield s.requestPermission(Fa))==="granted"});function Oa(){return te(this,null,function*(){if(typeof Window=="undefined"||!("_location"in Window))return;let s=yield(0,Ms.get)(`Tldraw_file_handle_${window.location.origin}`);return s||null})}function ja(s){return te(this,null,function*(){return(0,Ms.set)(`Tldraw_file_handle_${window.location.origin}`,s)})}function Ai(s,e){return te(this,null,function*(){let t={name:s.name||"New Document",fileHandle:e!=null?e:null,document:s,assets:{}},n=JSON.stringify(t,null,2),o=new Blob([n],{type:"application/vnd.Tldraw+json"});if(e&&!(yield Op(e)))return null;let l=yield(yield Promise.resolve().then(()=>(No(),Es))).fileSave(o,{fileName:`${t.name}.tldr`,description:"Tldraw File",extensions:[".tldr"]},e);return yield ja(l),l})}function Ua(){return te(this,null,function*(){var a;let t=yield(yield Promise.resolve().then(()=>(No(),Es))).fileOpen({description:"Tldraw File",extensions:[".tldr"],multiple:!1});if(!t)return null;let n=yield new Promise(l=>{let r=new FileReader;r.onloadend=()=>{r.readyState===FileReader.DONE&&l(r.result)},r.readAsText(t,"utf8")}),o=JSON.parse(n),i=(a=t.handle)!=null?a:null;return yield ja(i),{fileHandle:i,document:o.document}})}function Ga(){return te(this,null,function*(){return(yield Promise.resolve().then(()=>(No(),Es))).fileOpen({description:"Image or Video",extensions:[...Ps,...Bs],multiple:!1})})}function Va(s){return new Promise((e,t)=>{if(s){let n=new FileReader;n.readAsDataURL(s),n.onload=()=>e(n.result),n.onerror=o=>t(o),n.onabort=o=>t(o)}})}function $a(s){return new Promise((e,t)=>{if(s){let n=new FileReader;n.readAsText(s),n.onload=()=>e(n.result),n.onerror=o=>t(o),n.onabort=o=>t(o)}})}function Na(s){return new Promise((e,t)=>{let n=new Image;n.onload=()=>e([n.width,n.height]),n.onerror=()=>t(new Error("Could not get image size")),n.src=s})}function Ka(s){return new Promise((e,t)=>{let n=document.createElement("video");n.onloadedmetadata=()=>e([n.videoWidth,n.videoHeight]),n.onerror=()=>t(new Error("Could not get video size")),n.src=s})}No();var Ct=require("@tldraw/core");var de=require("@tldraw/vec");var tn=M(require("react")),zs=require("@tldraw/core");var At=require("@tldraw/core"),So=require("@tldraw/intersect"),Qt=require("@tldraw/vec"),Ja=M(require("react"));var qn=require("@tldraw/core");var Wa="#fafafa",Hi="#343d45",uo={["white"]:"#f0f1f3",["lightGray"]:"#c6cbd1",["gray"]:"#788492",["black"]:"#1d1d1d",["green"]:"#36b24d",["cyan"]:"#0e98ad",["blue"]:"#1c7ed6",["indigo"]:"#4263eb",["violet"]:"#7746f1",["red"]:"#ff2133",["orange"]:"#ff9433",["yellow"]:"#ffc936"},jp={light:C(f({},Object.fromEntries(Object.entries(uo).map(([s,e])=>[s,qn.Utils.lerpColor(e,Wa,.45)]))),{["white"]:"#ffffff",["black"]:"#3d3d3d"}),dark:C(f({},Object.fromEntries(Object.entries(uo).map(([s,e])=>[s,qn.Utils.lerpColor(qn.Utils.lerpColor(e,"#999999",.3),Hi,.4)]))),{["white"]:"#1d1d1d",["black"]:"#bbbbbb"})},ho={light:C(f({},uo),{["white"]:"#1d1d1d"}),dark:C(f({},Object.fromEntries(Object.entries(uo).map(([s,e])=>[s,qn.Utils.lerpColor(e,Hi,.1)]))),{["white"]:"#cecece",["black"]:"#cecece"})},Rs={light:C(f({},Object.fromEntries(Object.entries(uo).map(([s,e])=>[s,qn.Utils.lerpColor(e,Wa,.82)]))),{["white"]:"#fefefe"}),dark:C(f({},Object.fromEntries(Object.entries(uo).map(([s,e])=>[s,qn.Utils.lerpColor(e,Hi,.82)]))),{["white"]:"rgb(30,33,37)",["black"]:"#1e1e1f"})},Up={["small"]:2,["medium"]:3.5,["large"]:5},Gp={["small"]:28,["medium"]:48,["large"]:96,auto:"auto"},Vp={["script"]:'"Caveat Brush"',["sans"]:'"Source Sans Pro"',["erif"]:'"Crimson Pro"',["mono"]:'"Source Code Pro"'},$p={["script"]:1,["sans"]:1,["erif"]:1,["mono"]:1},Np={["small"]:24,["medium"]:36,["large"]:48,auto:"auto"};function Kp(s){return Up[s]}function zi(s,e="script"){return Gp[s]*$p[e]}function Ls(s="script"){return Vp[s]}function Wp(s){return Np[s]}function xt(s){let e=zi(s.size,s.font),t=Ls(s.font),{scale:n=1}=s;return`${e*n}px/1 ${t}`}function _a(s){let e=Wp(s.size),t=Ls(s.font),{scale:n=1}=s;return`${e*n}px/1 ${t}`}function Fi(s,e=!1){let{color:t}=s,n=e?"dark":"light",o=t==="white"||t==="black"?"yellow":t;return{fill:jp[n][o],stroke:ho[n][o],color:e?"#1d1d1d":"#0d0d0d"}}function ce(s,e){let{color:t,size:n,isFilled:o}=s,i=Kp(n),a=e?"dark":"light";return{stroke:ho[a][t],fill:o?Rs[a][t]:"none",strokeWidth:i}}var Qe={color:"black",size:"small",isFilled:!1,dash:"draw",scale:1},mo=C(f({},Qe),{font:"script",textAlign:"middle"});var _p={["start"]:"left",["middle"]:"center",["end"]:"right",["justify"]:"justify"};function Ko(s="start"){return _p[s]}function go(s,e,t){var l;let n=zi(e.size,e.font),o=document.createElementNS("http://www.w3.org/2000/svg","g"),i=(l=e.scale)!=null?l:1,a=s.split(`
`).map((r,c)=>{let p=document.createElementNS("http://www.w3.org/2000/svg","text");return p.textContent=r,p.setAttribute("y",n*(.5+c*1)+""),p.setAttribute("letter-spacing",n*-.03+""),p.setAttribute("font-size",n+"px"),p.setAttribute("font-family",Ls(e.font).slice(1,-1)),p.setAttribute("text-align",Ko(e.textAlign)),p.setAttribute("text-align",Ko(e.textAlign)),p.setAttribute("alignment-baseline","central"),e.scale!==1&&p.setAttribute("transform",`scale(${e.scale})`),o.appendChild(p),p});switch(e.textAlign){case"middle":{o.setAttribute("text-align","center"),o.setAttribute("text-anchor","middle"),a.forEach(r=>{r.setAttribute("x",t.width/2/i+"")});break}case"end":{o.setAttribute("text-align","right"),o.setAttribute("text-anchor","end"),a.forEach(r=>r.setAttribute("x",t.width/i+""));break}case"start":o.setAttribute("text-align","left"),o.setAttribute("text-anchor","start")}return o}var Bn;function Zp(){var e;(e=document.getElementById("__textLabelMeasure"))==null||e.remove();let s=document.createElement("pre");return s.id="__textLabelMeasure",Object.assign(s.style,{whiteSpace:"pre",width:"auto",border:"1px solid transparent",padding:"4px",margin:"0px",letterSpacing:Zn,opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",pointerEvents:"none",userSelect:"none",alignmentBaseline:"mathematical",dominantBaseline:"mathematical"}),s.tabIndex=-1,document.body.appendChild(s),s}typeof window!="undefined"&&(Bn=Zp());var ji="",Ya="",Oi=[0,0];function Za(){ji=""}function Jn(s,e){if(!s)return[16,32];if(!Bn)return[10,10];if(Bn.parent||document.body.appendChild(Bn),s===ji&&e===Ya)return Oi;ji=s,Ya=e,Bn.textContent=s,Bn.style.font=e;let t=Bn.offsetWidth||1,n=Bn.offsetHeight||1;return Oi=[t,n],Oi}var Ui=require("@tldraw/core");function Lt(s,e){let t=Ui.Utils.getFromCache(e,s,()=>{let[n,o]=s.size;return{minX:0,maxX:n,minY:0,maxY:o,width:n,height:o}});return Ui.Utils.translateBounds(t,s.point)}var fo=M(require("@tldraw/vec"));function En(s,e,{initialShape:t,transformOrigin:n,scaleX:o,scaleY:i}){if(s.rotation||t.isAspectRatioLocked){let a=fo.default.toFixed(fo.default.mul(t.size,Math.min(Math.abs(o),Math.abs(i)))),l=fo.default.toFixed([e.minX+(e.width-s.size[0])*(o<0?1-n[0]:n[0]),e.minY+(e.height-s.size[1])*(i<0?1-n[1]:n[1])]),r=o<0&&i>=0||i<0&&o>=0?t.rotation?-t.rotation:0:t.rotation;return{size:a,point:l,rotation:r}}else return{point:fo.default.toFixed([e.minX,e.minY]),size:fo.default.toFixed([e.width,e.height])}}var Gi=M(require("@tldraw/vec"));function Mn(s,e){return{size:Gi.default.toFixed([e.width,e.height]),point:Gi.default.toFixed([e.minX,e.minY])}}var Xa="  ",We=class{static insertTextFirefox(e,t){e.setRangeText(t,e.selectionStart||0,e.selectionEnd||0,"end"),e.dispatchEvent(new InputEvent("input",{data:t,inputType:"insertText",isComposing:!1}))}static insert(e,t){let n=e.ownerDocument,o=n.activeElement;o!==e&&e.focus(),n.execCommand("insertText",!1,t)||We.insertTextFirefox(e,t),o===n.body?e.blur():o instanceof HTMLElement&&o!==e&&o.focus()}static set(e,t){e.select(),We.insert(e,t)}static getSelection(e){let{selectionStart:t,selectionEnd:n}=e;return e.value.slice(t||void 0,n||void 0)}static wrapSelection(e,t,n){let{selectionStart:o,selectionEnd:i}=e,a=We.getSelection(e);We.insert(e,t+a+(n!=null?n:t)),e.selectionStart=(o||0)+t.length,e.selectionEnd=(i||0)+t.length}static replace(e,t,n){let o=0;e.value.replace(t,(...i)=>{let a=o+i[i.length-2],l=i[0].length;e.selectionStart=a,e.selectionEnd=a+l;let r=typeof n=="string"?n:n(...i);return We.insert(e,r),e.selectionStart=a,o+=r.length-l,r})}static findLineEnd(e,t){let n=e.lastIndexOf(`
`,t-1)+1;return e.charAt(n)!=="	"?t:n+1}static indent(e){var l;let{selectionStart:t,selectionEnd:n,value:o}=e,i=o.slice(t,n),a=(l=/\n/g.exec(i))==null?void 0:l.length;if(a&&a>0){let r=o.lastIndexOf(`
`,t-1)+1,c=e.value.slice(r,n-1),p=c.replace(/^|\n/g,`$&${Xa}`),u=p.length-c.length;e.setSelectionRange(r,n-1),We.insert(e,p),e.setSelectionRange(t+1,n+u)}else We.insert(e,Xa)}static unindent(e){let{selectionStart:t,selectionEnd:n,value:o}=e,i=o.lastIndexOf(`
`,t-1)+1,a=We.findLineEnd(o,n),l=e.value.slice(i,a),r=l.replace(/(^|\n)(\t| {1,2})/g,"$1"),c=l.length-r.length;e.setSelectionRange(i,a),We.insert(e,r);let p=/\t| {1,2}/.exec(o.slice(i,t)),u=p?p[0].length:0,h=t-u;e.setSelectionRange(t-u,Math.max(h,n-c))}};var _e=M(require("react"));var dt=s=>s.stopPropagation();var Rn=_e.memo(function({font:e,text:t,color:n,offsetX:o=0,offsetY:i=0,scale:a=1,isEditing:l=!1,onBlur:r,onChange:c}){let p=_e.useRef(null),u=_e.useRef(!1),h=_e.useCallback(S=>{c(I.normalizeText(S.currentTarget.value))},[c]),m=_e.useCallback(S=>{if(S.key==="Escape"){S.preventDefault(),S.stopPropagation(),r==null||r();return}if(S.key==="Tab"&&t.length===0){S.preventDefault();return}if(!(S.key==="Meta"||S.metaKey))S.stopPropagation();else if(S.key==="z"&&S.metaKey){S.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1),S.stopPropagation(),S.preventDefault();return}(S.metaKey||S.ctrlKey)&&S.key==="="&&S.preventDefault(),S.key==="Tab"&&(S.preventDefault(),S.shiftKey?We.unindent(S.currentTarget):We.indent(S.currentTarget),c==null||c(I.normalizeText(S.currentTarget.value)))},[c]),g=_e.useCallback(S=>{S.currentTarget.setSelectionRange(0,0),r==null||r()},[r]),T=_e.useCallback(S=>{!l||!u.current||document.activeElement===S.currentTarget&&S.currentTarget.select()},[l]),y=_e.useCallback(S=>{l&&S.stopPropagation()},[l]);_e.useEffect(()=>{l?requestAnimationFrame(()=>{u.current=!0;let S=p.current;S&&(S.focus(),S.select())}):r==null||r()},[l,r]);let b=_e.useRef(null);return _e.useLayoutEffect(()=>{let S=b.current;if(!S)return;let w=Jn(t,e);S.style.transform=`scale(${a}, ${a}) translate(${o}px, ${i}px)`,S.style.width=w[0]+1+"px",S.style.height=w[1]+1+"px"},[t,e,i,o,a]),_e.createElement(Xp,null,_e.createElement(qp,{ref:b,hasText:!!t,isEditing:l,style:{font:e,color:n}},l?_e.createElement(Jp,{ref:p,style:{font:e,color:n},name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:t,color:n,onFocus:T,onChange:h,onKeyDown:m,onBlur:g,onPointerDown:y,onContextMenu:dt,onCopy:dt,onPaste:dt,onCut:dt}):t,"\u200B"))}),Xp=R("div",{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",userSelect:"none",variants:{isGhost:{false:{opacity:1},true:{transition:"opacity .2s",opacity:.3}}}}),qa={whiteSpace:"pre-wrap",overflowWrap:"break-word"},qp=R("div",f({position:"absolute",padding:"4px",zIndex:1,minHeight:1,minWidth:1,lineHeight:1,letterSpacing:Zn,outline:0,fontWeight:"500",textAlign:"center",backfaceVisibility:"hidden",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",variants:{hasText:{false:{pointerEvents:"none"},true:{pointerEvents:"all"}},isEditing:{false:{userSelect:"none"},true:{background:"$boundsBg",userSelect:"text",WebkitUserSelect:"text"}}}},qa)),Jp=R("textarea",C(f({position:"absolute",top:0,left:0,zIndex:1,width:"100%",height:"100%",border:"none",padding:"4px",resize:"none",textAlign:"inherit",minHeight:"inherit",minWidth:"inherit",lineHeight:"inherit",letterSpacing:"inherit",outline:0,fontWeight:"inherit",overflow:"hidden",backfaceVisibility:"hidden",display:"inline-block",pointerEvents:"all",background:"$boundsBg",userSelect:"text",WebkitUserSelect:"text",fontSmooth:"always",WebkitFontSmoothing:"subpixel-antialiased",MozOsxFontSmoothing:"auto"},qa),{"&:focus":{outline:"none",border:"none"}}));var ge=class extends At.TLShapeUtil{constructor(){super(...arguments);d(this,"canBind",!1);d(this,"canEdit",!1);d(this,"canClone",!1);d(this,"isAspectRatioLocked",!1);d(this,"hideResizeHandles",!1);d(this,"bindingDistance",16);d(this,"hitTestPoint",(e,t)=>At.Utils.pointInBounds(t,this.getRotatedBounds(e)));d(this,"hitTestLineSegment",(e,t,n)=>{let o=At.Utils.getBoundsFromPoints([t,n]),i=this.getBounds(e);return At.Utils.boundsContain(i,o)||e.rotation?(0,So.intersectLineSegmentPolyline)(t,n,At.Utils.getRotatedCorners(this.getBounds(e))).didIntersect:(0,So.intersectLineSegmentBounds)(t,n,this.getBounds(e)).length>0});d(this,"create",e=>(this.refMap.set(e.id,Ja.createRef()),this.getShape(e)));d(this,"getCenter",e=>At.Utils.getBoundsCenter(this.getBounds(e)));d(this,"getExpandedBounds",e=>At.Utils.expandBounds(this.getBounds(e),this.bindingDistance));d(this,"getBindingPoint",(e,t,n,o,i,a)=>{let l=this.getBounds(e),r=this.getExpandedBounds(e);if(!At.Utils.pointInBounds(n,r))return;let c=(0,So.intersectRayBounds)(o,i,r).filter(y=>y.didIntersect).map(y=>y.points[0]);if(!c.length)return;let p=this.getCenter(e),u=c.sort((y,b)=>Qt.Vec.dist(b,o)-Qt.Vec.dist(y,o))[0],h=Qt.Vec.med(n,u),m,g;a?(m=Qt.Vec.dist(n,p)<16/2?p:n,g=0):(Qt.Vec.distanceToLineSegment(n,h,p)<16/2?m=p:m=h,At.Utils.pointInBounds(n,l)?g=this.bindingDistance:g=Math.max(this.bindingDistance,At.Utils.getBoundsSides(l).map(y=>Qt.Vec.distanceToLineSegment(y[1][0],y[1][1],n)).sort((y,b)=>y-b)[0]));let T=Qt.Vec.divV(Qt.Vec.sub(m,[r.minX,r.minY]),[r.width,r.height]);return{point:Qt.Vec.clampV(T,0,1),distance:g}});d(this,"mutate",(e,t)=>t);d(this,"transform",(e,t,n)=>C(f({},e),{point:[t.minX,t.minY]}));d(this,"transformSingle",(e,t,n)=>this.transform(e,t,n));d(this,"updateChildren");d(this,"onChildrenChange");d(this,"onHandleChange");d(this,"onRightPointHandle");d(this,"onDoubleClickHandle");d(this,"onDoubleClickBoundsHandle");d(this,"onSessionComplete");d(this,"getSvgElement",(e,t)=>{var o;let n=(o=document.getElementById(e.id+"_svg"))==null?void 0:o.cloneNode(!0);if(!!n){if("label"in e&&e.label){let i=e,a=document.createElementNS("http://www.w3.org/2000/svg","g"),l=this.getBounds(e),r=go(i.label,e.style,l);r.setAttribute("fill",ce(e.style,t).stroke);let c=xt(e.style),p=Jn(i.label,c);return r.setAttribute("transform-origin","top left"),r.setAttribute("transform",`translate(${l.width/2}, ${(l.height-p[1])/2})`),a.setAttribute("text-align","center"),a.setAttribute("text-anchor","middle"),a.appendChild(n),a.appendChild(r),a}return n}})}};var Wo=require("@tldraw/core"),lt=M(require("@tldraw/vec")),As=M(require("perfect-freehand"));function Qp(s,e,t){let n=ce(e),o=Wo.Utils.rng(s),i=n.strokeWidth,a=Math.max(0,t[0]),l=Math.max(0,t[1]),r=Array.from(Array(4)).map(()=>[o()*i*.75,o()*i*.75]),c=lt.default.add([i/2,i/2],r[0]),p=lt.default.add([a-i/2,i/2],r[1]),u=lt.default.add([a-i/2,l-i/2],r[2]),h=lt.default.add([i/2,l-i/2],r[3]),m=Math.round(Math.abs(o()*2*4)),g=Math.min(a/4,i*2),T=Math.min(l/4,i*2),y=Math.max(8,Math.floor(a/16)),b=Math.max(8,Math.floor(l/16)),S=Wo.Utils.rotateArray([lt.default.pointsBetween(lt.default.add(c,[g,0]),lt.default.sub(p,[g,0]),y),lt.default.pointsBetween(lt.default.add(p,[0,T]),lt.default.sub(u,[0,T]),b),lt.default.pointsBetween(lt.default.sub(u,[g,0]),lt.default.add(h,[g,0]),y),lt.default.pointsBetween(lt.default.sub(h,[0,T]),lt.default.add(c,[0,T]),b)],m);return{points:[...S.flat(),...S[0]].slice(5,Math.floor((m%2===0?y:b)/-2)+3)}}function Qa(s,e,t){let{points:n}=Qp(s,e,t),{strokeWidth:o}=ce(e);return{points:n,options:{size:o,thinning:.65,streamline:.3,smoothing:1,simulatePressure:!1,last:!0}}}function ed(s,e,t){let{points:n,options:o}=Qa(s,e,t),i=(0,As.default)(n,o);return Wo.Utils.getSvgPathFromStroke(i)}function Hs(s,e,t){let{points:n,options:o}=Qa(s,e,t),i=(0,As.getStrokePoints)(n,o);return Wo.Utils.getSvgPathFromStroke(i.map(a=>a.point.slice(0,2)),!1)}var Tn=M(require("react"));var td=Tn.memo(function({id:e,style:t,size:n,isSelected:o,isDarkMode:i}){let{isFilled:a}=t,{stroke:l,strokeWidth:r,fill:c}=ce(t,i),p=ed(e,t,n),u=Hs(e,t,n);return Tn.createElement(Tn.Fragment,null,Tn.createElement("path",{className:t.isFilled||o?"tl-fill-hitarea":"tl-stroke-hitarea",d:u}),a&&Tn.createElement("path",{d:u,fill:c,pointerEvents:"none"}),Tn.createElement("path",{d:p,fill:l,stroke:l,strokeWidth:r,pointerEvents:"none"}))});var en=M(require("react")),nd=require("@tldraw/core");var od=en.memo(function({id:e,style:t,size:n,isSelected:o,isDarkMode:i}){let{stroke:a,strokeWidth:l,fill:r}=ce(t,i),c=1+l*1.618,p=Math.max(0,n[0]-c/2),u=Math.max(0,n[1]-c/2),m=[[[c/2,c/2],[p,c/2],p-c/2],[[p,c/2],[p,u],u-c/2],[[p,u],[c/2,u],p-c/2],[[c/2,u],[c/2,c/2],u-c/2]].map(([g,T,y],b)=>{let{strokeDasharray:S,strokeDashoffset:w}=nd.Utils.getPerfectDashProps(y,l*1.618,t.dash);return en.createElement("line",{key:e+"_"+b,x1:g[0],y1:g[1],x2:T[0],y2:T[1],strokeDasharray:S,strokeDashoffset:w})});return en.createElement(en.Fragment,null,en.createElement("rect",{className:o||t.isFilled?"tl-fill-hitarea":"tl-stroke-hitarea",x:c/2,y:c/2,width:p,height:u,strokeWidth:16}),t.isFilled&&en.createElement("rect",{x:c/2,y:c/2,width:p,height:u,fill:r,pointerEvents:"none"}),en.createElement("g",{pointerEvents:"none",stroke:a,strokeWidth:c,strokeLinecap:"round"},m))});var sd=M(require("react"));function id({strokeWidth:s,size:e}){return sd.createElement("rect",{className:"tl-binding-indicator",x:s,y:s,width:Math.max(0,e[0]-s/2),height:Math.max(0,e[1]-s/2),strokeWidth:16*2})}var Vi=class extends ge{constructor(){super(...arguments);d(this,"type","rectangle");d(this,"canBind",!0);d(this,"canClone",!0);d(this,"canEdit",!0);d(this,"getShape",e=>zs.Utils.deepMerge({id:"id",type:"rectangle",name:"Rectangle",parentId:"page",childIndex:1,point:[0,0],size:[1,1],rotation:0,style:Qe,label:"",labelPoint:[.5,.5]},e));d(this,"Component",ge.Component(({shape:e,isEditing:t,isBinding:n,isSelected:o,isGhost:i,meta:a,bounds:l,events:r,onShapeBlur:c,onShapeChange:p},u)=>{let{id:h,size:m,style:g,label:T="",labelPoint:y=po}=e,b=xt(g),S=ce(g,a.isDarkMode),w=g.dash==="draw"?td:od,D=tn.useCallback(E=>p==null?void 0:p({id:h,label:E}),[p]);return tn.createElement(eu,f({ref:u},r),tn.createElement(Rn,{isEditing:t,onChange:D,onBlur:c,font:b,text:T,color:S.stroke,offsetX:(y[0]-.5)*l.width,offsetY:(y[1]-.5)*l.height}),tn.createElement(zs.SVGContainer,{id:e.id+"_svg",opacity:i?.3:1},n&&tn.createElement(id,{strokeWidth:S.strokeWidth,size:m}),tn.createElement(w,{id:h,style:g,size:m,isSelected:o,isDarkMode:a.isDarkMode})))}));d(this,"Indicator",ge.Indicator(({shape:e})=>{let{id:t,style:n,size:o}=e,a=ce(n,!1).strokeWidth;return n.dash==="draw"?tn.createElement("path",{d:Hs(t,n,o)}):tn.createElement("rect",{x:a,y:a,rx:1,ry:1,width:Math.max(1,o[0]-a*2),height:Math.max(1,o[1]-a*2)})}));d(this,"getBounds",e=>Lt(e,this.boundsCache));d(this,"shouldRender",(e,t)=>t.size!==e.size||t.style!==e.style||t.label!==e.label);d(this,"transform",En);d(this,"transformSingle",Mn)}},eu=R("div",{width:"100%",height:"100%"});var $t=M(require("react")),Vt=require("@tldraw/core");var To=require("@tldraw/intersect"),ft=M(require("@tldraw/vec"));var _o=require("@tldraw/core"),Ln=M(require("@tldraw/vec")),Os=M(require("perfect-freehand"));var ad=require("@tldraw/intersect"),Et=M(require("@tldraw/vec")),Fs=Math.PI*2,Bt=class{static inwardEdgeNormal(e){let t=Et.default.sub(e[1],e[0]),n=Et.default.len2(t);return[-t[0]/n,t[1]/n]}static outwardEdgeNormal(e){return Et.default.neg(Bt.inwardEdgeNormal(e))}static isReflexVertex(e,t){let n=e.length,o=e[(t+n-1)%n],i=e[t],a=e[(t+1)%n];return Bt.leftSide(o,a,i)<0}static getEdges(e){return e.map((t,n)=>[t,e[(n+1)%e.length]])}static edgesIntersection([e,t],[n,o]){let i=(o[1]-n[1])*(t[0]-e[0])-(o[0]-n[0])*(t[1]-e[1]);if(i==0)return null;let a=((o[0]-n[0])*(e[1]-n[1])-(o[1]-n[1])*(e[0]-n[0]))/i,l=((t[0]-e[0])*(e[1]-n[1])-(t[1]-e[1])*(e[0]-n[0]))/i;return a<0||l<0||a>1||l>1?null:[e[0]+a*(t[0]-e[0]),e[1]+a*(t[1]-e[1])]}static appendArc(e,t,n,o,i,a=!1){let l=[...e],r=Math.atan2(o[1]-t[1],o[0]-t[0]),c=Math.atan2(i[1]-t[1],i[0]-t[0]);r<0&&(r+=Fs),c<0&&(c+=Fs);let p=5,u=r>c?r-c:r+Fs-c,h=(a?-u:Fs-u)/p;l.push(o);for(let m=1;m<p;++m){let g=r+h*m;l.push([t[0]+Math.cos(g)*n,t[1]+Math.sin(g)*n])}return l.push(i),l}static createOffsetEdge(e,t){return e.map(n=>Et.default.add(n,t))}static getOffsetPolygon(e,t=0){let n=Bt.getEdges(e),o=n.map(a=>Bt.createOffsetEdge(a,Et.default.mul(Bt.outwardEdgeNormal(a),t))),i=[];for(let a=0;a<o.length;a++){let l=o[a],r=o[(a+o.length-1)%o.length],c=Bt.edgesIntersection(r,l);c?i.push(c):Bt.appendArc(i,n[a][0],t,r[1],l[0],!1)}return i}static createPaddingPolygon(e,t=0){let n=e.map(i=>Bt.createOffsetEdge(i,Bt.inwardEdgeNormal(i))),o=[];for(let i=0;i<n.length;i++){let a=n[i],l=n[(i+n.length-1)%n.length],r=Bt.edgesIntersection(l,a);r?o.push(r):Bt.appendArc(o,e[i][0],t,l[1],a[0],!0)}return o}},rd=Bt;d(rd,"leftSide",Et.default.isLeft);function dd(s,e){if(s.length<3)throw Error("Polygon must have at least 3 points");let t=s.length;return s.map((n,o)=>[n,s[(o+1)%t]]).map(([n,o])=>{let i=Et.default.mul(Et.default.per(Et.default.uni(Et.default.sub(o,n))),e);return[Et.default.add(n,i),Et.default.add(o,i)]}).map((n,o,i)=>{let a=(0,ad.intersectLineLine)(n,i[(o+1)%i.length]);if(a===void 0)throw Error("Expected an intersection");return a})}function Gt(s,e=0,t=0){let[n,o]=s,i=[[n/2,0],[n,o],[0,o]];return e&&(i=dd(i,e)),t&&(i=i.map(a=>Ln.default.rotWith(a,[n/2,o/2],t))),i}function $i(s){let[e,t]=s,n=[[e/2,0],[e,t],[0,t]];return[(n[0][0]+n[1][0]+n[2][0])/3,(n[0][1]+n[1][1]+n[2][1])/3]}function tu(s,e,t){let[n,o]=e,i=_o.Utils.rng(s),a=Array.from(Array(3)).map(()=>[i()*t*.75,i()*t*.75]),l=[Ln.default.add([n/2,0],a[0]),Ln.default.add([n,o],a[1]),Ln.default.add([0,o],a[2])],r=Math.round(Math.abs(i()*2*3)),c=_o.Utils.rotateArray([Ln.default.pointsBetween(l[0],l[1],32),Ln.default.pointsBetween(l[1],l[2],32),Ln.default.pointsBetween(l[2],l[0],32)],r);return{points:[...c.flat(),...c[0]]}}function ld(s,e,t){let{strokeWidth:n}=ce(t),{points:o}=tu(s,e,n);return{points:o,options:{size:n,thinning:.65,streamline:.3,smoothing:1,simulatePressure:!1,last:!0}}}function cd(s,e,t){let{points:n,options:o}=ld(s,e,t),i=(0,Os.default)(n,o);return _o.Utils.getSvgPathFromStroke(i)}function pd(s,e,t){let{points:n,options:o}=ld(s,e,t),i=(0,Os.getStrokePoints)(n,o);return _o.Utils.getSvgPathFromStroke(i.map(a=>a.point.slice(0,2)),!1)}var bn=M(require("react"));var ud=bn.memo(function({id:e,size:t,style:n,isSelected:o,isDarkMode:i}){let{stroke:a,strokeWidth:l,fill:r}=ce(n,i),c=cd(e,t,n),p=pd(e,t,n);return bn.createElement(bn.Fragment,null,bn.createElement("path",{className:n.isFilled||o?"tl-fill-hitarea":"tl-stroke-hitarea",d:p}),n.isFilled&&bn.createElement("path",{d:p,fill:r,pointerEvents:"none"}),bn.createElement("path",{d:c,fill:a,stroke:a,strokeWidth:l,pointerEvents:"none"}))});var nn=M(require("react")),Ni=require("@tldraw/core");var hd=M(require("@tldraw/vec")),md=nn.memo(function({id:e,size:t,style:n,isSelected:o,isDarkMode:i}){let{stroke:a,strokeWidth:l,fill:r}=ce(n,i),c=1+l*1.618,p=Gt(t),h=Ni.Utils.pointsToLineSegments(p,!0).map(([g,T],y)=>{let{strokeDasharray:b,strokeDashoffset:S}=Ni.Utils.getPerfectDashProps(hd.default.dist(g,T),l*1.618,n.dash);return nn.createElement("line",{key:e+"_"+y,x1:g[0],y1:g[1],x2:T[0],y2:T[1],stroke:a,strokeWidth:c,strokeLinecap:"round",strokeDasharray:b,strokeDashoffset:S})}),m=p.join();return nn.createElement(nn.Fragment,null,nn.createElement("polygon",{className:n.isFilled||o?"tl-fill-hitarea":"tl-stroke-hitarea",points:m}),n.isFilled&&nn.createElement("polygon",{fill:r,points:m,pointerEvents:"none"}),nn.createElement("g",{pointerEvents:"stroke"},h))});var gd=M(require("react"));function fd({size:s}){let e=Gt(s).join();return gd.createElement("polygon",{className:"tl-binding-indicator",points:e,strokeWidth:16*2})}var Ki=class extends ge{constructor(){super(...arguments);d(this,"type","triangle");d(this,"canBind",!0);d(this,"canClone",!0);d(this,"canEdit",!0);d(this,"getShape",e=>Vt.Utils.deepMerge({id:"id",type:"triangle",name:"Triangle",parentId:"page",childIndex:1,point:[0,0],size:[1,1],rotation:0,style:Qe,label:"",labelPoint:[.5,.5]},e));d(this,"Component",ge.Component(({shape:e,bounds:t,isBinding:n,isEditing:o,isSelected:i,isGhost:a,meta:l,events:r,onShapeChange:c,onShapeBlur:p},u)=>{let{id:h,label:m="",size:g,style:T,labelPoint:y=po}=e,b=xt(T),S=ce(T,l.isDarkMode),w=T.dash==="draw"?ud:md,D=$t.useCallback(x=>c==null?void 0:c({id:h,label:x}),[c]),E=$t.useMemo(()=>{let x=ft.default.div(g,2);return($i(g)[1]-x[1])*.72},[g]);return $t.createElement(nu,f({ref:u},r),$t.createElement(Rn,{font:b,text:m,color:S.stroke,offsetX:(y[0]-.5)*t.width,offsetY:E+(y[1]-.5)*t.height,isEditing:o,onChange:D,onBlur:p}),$t.createElement(Vt.SVGContainer,{id:e.id+"_svg",opacity:a?.3:1},n&&$t.createElement(fd,{size:g}),$t.createElement(w,{id:h,style:T,size:g,isSelected:i,isDarkMode:l.isDarkMode})))}));d(this,"Indicator",ge.Indicator(({shape:e})=>{let{size:t}=e;return $t.createElement("polygon",{points:Gt(t).join()})}));d(this,"shouldRender",(e,t)=>t.size!==e.size||t.style!==e.style||t.label!==e.label);d(this,"getBounds",e=>Lt(e,this.boundsCache));d(this,"getExpandedBounds",e=>Vt.Utils.getBoundsFromPoints(Gt(e.size,this.bindingDistance).map(t=>ft.default.add(t,e.point))));d(this,"hitTestLineSegment",(e,t,n)=>(0,To.intersectLineSegmentPolyline)(t,n,this.getPoints(e)).didIntersect);d(this,"hitTestBounds",(e,t)=>Vt.Utils.boundsContained(this.getBounds(e),t)||(0,To.intersectBoundsPolygon)(t,this.getPoints(e)).length>0);d(this,"getBindingPoint",(e,t,n,o,i,a)=>{let l=this.getExpandedBounds(e);if(!Vt.Utils.pointInBounds(n,l))return;let r=Gt(e.size).map(S=>ft.default.add(S,e.point)),c=Gt(e.size,this.bindingDistance).map(S=>ft.default.add(S,e.point)),p=Vt.Utils.pointsToLineSegments(r,!0).map(([S,w])=>ft.default.distanceToLineSegment(S,w,n)).sort((S,w)=>S-w)[0];if(!(Vt.Utils.pointInPolygon(n,c)||p<this.bindingDistance))return;let u=Vt.Utils.pointsToLineSegments(c.concat([c[0]])).map(S=>(0,To.intersectRayLineSegment)(o,i,S[0],S[1])).filter(S=>S.didIntersect).flatMap(S=>S.points);if(!u.length)return;let h=ft.default.add($i(e.size),e.point),m=u.sort((S,w)=>ft.default.dist(w,o)-ft.default.dist(S,o))[0],g=ft.default.med(n,m),T,y;a?(T=ft.default.dist(n,h)<16/2?h:n,y=0):(ft.default.distanceToLineSegment(n,g,h)<16/2?T=h:T=g,Vt.Utils.pointInPolygon(n,r)?y=this.bindingDistance:y=Math.max(this.bindingDistance,p));let b=ft.default.divV(ft.default.sub(T,[l.minX,l.minY]),[l.width,l.height]);return{point:ft.default.clampV(b,0,1),distance:y}});d(this,"transform",En);d(this,"transformSingle",Mn)}getPoints(e){let{rotation:t=0,point:[n,o],size:[i,a]}=e;return[[n+i/2,o],[n,o+a],[n+i,o+a]].map(l=>ft.default.rotWith(l,this.getCenter(e),t))}},nu=R("div",{width:"100%",height:"100%"});var on=M(require("react")),Ht=require("@tldraw/core"),St=require("@tldraw/vec");var Hn=require("@tldraw/intersect");var Qn=require("@tldraw/core"),js=require("perfect-freehand");function Sd(s,e,t){let{strokeWidth:n}=ce(t),o=Qn.Utils.rng(s),i=e[0]+o()*n*2,a=e[1]+o()*n*2,l=Qn.Utils.perimeterOfEllipse(i,a),r=[],c=Math.PI+Math.PI*o(),p=Math.abs(o()),u=Math.max(16,l/10);for(let h=0;h<u;h++){let m=Xn.easeInOutSine(h/(u+1)),g=c*2+Math.PI*(2+p)*m,T=Math.cos(g),y=Math.sin(g);r.push([i*T+e[0],a*y+e[1],m+.5+o()/2])}return(0,js.getStrokePoints)(r,{size:1+n*2,thinning:.618,end:{taper:l/8},start:{taper:l/12},streamline:0,simulatePressure:!0})}function Td(s,e,t){let{strokeWidth:n}=ce(t),o=Qn.Utils.rng(s),i=e[0]+o()*n*2,a=e[1]+o()*n*2,l=Qn.Utils.perimeterOfEllipse(i,a);return Qn.Utils.getSvgPathFromStroke((0,js.getStrokeOutlinePoints)(Sd(s,e,t),{size:2+n*2,thinning:.618,end:{taper:l/8},start:{taper:l/12},streamline:0,simulatePressure:!0}))}function Us(s,e,t){return Qn.Utils.getSvgPathFromStroke(Sd(s,e,t).map(n=>n.point.slice(0,2)),!1)}var yn=M(require("react"));var bd=yn.memo(function({id:e,radius:t,style:n,isSelected:o,isDarkMode:i}){let{stroke:a,strokeWidth:l,fill:r}=ce(n,i),c=Td(e,t,n);return yn.createElement(yn.Fragment,null,yn.createElement("ellipse",{className:n.isFilled||o?"tl-fill-hitarea":"tl-stroke-hitarea",cx:t[0],cy:t[1],rx:t[0],ry:t[1]}),n.isFilled&&yn.createElement("path",{d:Us(e,t,n),stroke:"none",fill:r,pointerEvents:"none"}),yn.createElement("path",{d:c,fill:a,stroke:a,strokeWidth:l,pointerEvents:"none",strokeLinecap:"round",strokeLinejoin:"round"}))});var An=M(require("react")),Wi=require("@tldraw/core");var yd=An.memo(function({radius:e,style:t,isSelected:n,isDarkMode:o}){let{stroke:i,strokeWidth:a,fill:l}=ce(t,o),r=1+a*1.618,c=Math.max(0,e[0]-r/2),p=Math.max(0,e[1]-r/2),u=Wi.Utils.perimeterOfEllipse(c,p),{strokeDasharray:h,strokeDashoffset:m}=Wi.Utils.getPerfectDashProps(u<64?u*2:u,a*1.618,t.dash,4);return An.createElement(An.Fragment,null,An.createElement("ellipse",{className:t.isFilled||n?"tl-fill-hitarea":"tl-stroke-hitarea",cx:e[0],cy:e[1],rx:e[0],ry:e[1]}),An.createElement("ellipse",{cx:e[0],cy:e[1],rx:c,ry:p,fill:l,stroke:i,strokeWidth:r,strokeDasharray:h,strokeDashoffset:m,pointerEvents:"none",strokeLinecap:"round",strokeLinejoin:"round"}))});var _i=class extends ge{constructor(){super(...arguments);d(this,"type","ellipse");d(this,"canBind",!0);d(this,"canClone",!0);d(this,"canEdit",!0);d(this,"getShape",e=>Ht.Utils.deepMerge({id:"id",type:"ellipse",name:"Ellipse",parentId:"page",childIndex:1,point:[0,0],radius:[1,1],rotation:0,style:Qe,label:"",labelPoint:[.5,.5]},e));d(this,"Component",ge.Component(({shape:e,isGhost:t,isSelected:n,isBinding:o,isEditing:i,meta:a,bounds:l,events:r,onShapeChange:c,onShapeBlur:p},u)=>{let{id:h,radius:m,style:g,label:T="",labelPoint:y=po}=e,b=xt(e.style),S=ce(g,a.isDarkMode),w=S.strokeWidth,D=1+w*1.618,E=Math.max(0,m[0]-D/2),x=Math.max(0,m[1]-D/2),B=g.dash==="draw"?bd:yd,k=on.useCallback(ee=>c==null?void 0:c({id:h,label:ee}),[c]);return on.createElement(ou,f({ref:u},r),on.createElement(Rn,{isEditing:i,onChange:k,onBlur:p,font:b,text:T,color:S.stroke,offsetX:(y[0]-.5)*l.width,offsetY:(y[1]-.5)*l.height}),on.createElement(Ht.SVGContainer,{id:e.id+"_svg",opacity:t?.3:1},o&&on.createElement("ellipse",{className:"tl-binding-indicator",cx:m[0],cy:m[1],rx:E,ry:x,strokeWidth:this.bindingDistance}),on.createElement(B,{id:h,radius:m,style:g,isSelected:n,isDarkMode:a.isDarkMode})))}));d(this,"Indicator",ge.Indicator(({shape:e})=>{let{id:t,radius:n,style:o}=e,a=ce(o).strokeWidth,l=1+a*1.618,r=Math.max(0,n[0]-l/2),c=Math.max(0,n[1]-l/2);return o.dash==="draw"?on.createElement("path",{d:Us(t,n,o)}):on.createElement("ellipse",{cx:n[0],cy:n[1],rx:r,ry:c})}));d(this,"hitTestPoint",(e,t)=>Ht.Utils.pointInBounds(t,this.getRotatedBounds(e))&&Ht.Utils.pointInEllipse(t,this.getCenter(e),e.radius[0],e.radius[1],e.rotation||0));d(this,"hitTestLineSegment",(e,t,n)=>(0,Hn.intersectLineSegmentEllipse)(t,n,this.getCenter(e),e.radius[0],e.radius[1],e.rotation||0).didIntersect);d(this,"getBounds",e=>Ht.Utils.getFromCache(this.boundsCache,e,()=>Ht.Utils.getRotatedEllipseBounds(e.point[0],e.point[1],e.radius[0],e.radius[1],0)));d(this,"getRotatedBounds",e=>Ht.Utils.getRotatedEllipseBounds(e.point[0],e.point[1],e.radius[0],e.radius[1],e.rotation));d(this,"hitTestBounds",(e,t)=>{let n=this.getBounds(e);return Ht.Utils.boundsContained(n,t)||(0,Hn.intersectEllipseBounds)(this.getCenter(e),e.radius[0],e.radius[1],e.rotation||0,t).length>0});d(this,"shouldRender",(e,t)=>t.radius!==e.radius||t.style!==e.style||t.label!==e.label);d(this,"getCenter",e=>St.Vec.add(e.point,e.radius));d(this,"getBindingPoint",(e,t,n,o,i,a)=>{{let l=this.getExpandedBounds(e),r=this.getCenter(e),c,p;if(!Ht.Utils.pointInEllipse(n,r,e.radius[0]+this.bindingDistance,e.radius[1]+this.bindingDistance))return;if(a)St.Vec.dist(n,this.getCenter(e))<12?c=[.5,.5]:c=St.Vec.divV(St.Vec.sub(n,[l.minX,l.minY]),[l.width,l.height]),p=0;else{let u=(0,Hn.intersectRayEllipse)(o,i,r,e.radius[0],e.radius[1],e.rotation||0).points.sort((m,g)=>St.Vec.dist(m,o)-St.Vec.dist(g,o))[0];if(u||(u=(0,Hn.intersectLineSegmentEllipse)(n,r,r,e.radius[0],e.radius[1],e.rotation||0).points.sort((m,g)=>St.Vec.dist(m,n)-St.Vec.dist(g,n))[0]),!u)return;let h=St.Vec.med(n,u);if(St.Vec.distanceToLineSegment(n,h,this.getCenter(e))<12?c=[.5,.5]:c=St.Vec.divV(St.Vec.sub(h,[l.minX,l.minY]),[l.width,l.height]),Ht.Utils.pointInEllipse(n,r,e.radius[0],e.radius[1],e.rotation||0))p=this.bindingDistance/2;else{let m=(0,Hn.intersectLineSegmentEllipse)(n,r,r,e.radius[0],e.radius[1],e.rotation||0).points[0];if(!m)return;p=Math.max(this.bindingDistance/2,St.Vec.dist(n,m))}}return{point:c,distance:p}}});d(this,"transform",(e,t,{scaleX:n,scaleY:o,initialShape:i})=>{let{rotation:a=0}=i;return{point:[t.minX,t.minY],radius:[t.width/2,t.height/2],rotation:n<0&&o>=0||o<0&&n>=0?-(a||0):a||0}});d(this,"transformSingle",(e,t)=>({point:St.Vec.toFixed([t.minX,t.minY]),radius:St.Vec.div([t.width,t.height],2)}))}},ou=R("div",{width:"100%",height:"100%"});var He=M(require("react")),It=require("@tldraw/core"),ie=require("@tldraw/vec");var wo=require("@tldraw/intersect");var wn=require("@tldraw/core"),Gs=require("@tldraw/intersect"),we=M(require("@tldraw/vec")),Yi=M(require("perfect-freehand"));function Id(s,e,t,n){return["M",s[0],s[1],"A",t[2],t[2],0,0,n<0?0:1,e[0],e[1]].join(" ")}function Vs(s,e){let{start:t,end:n}=s,o=we.default.dist(t.point,n.point),i=we.default.med(t.point,n.point),a=o/2*e,l=we.default.uni(we.default.vec(t.point,n.point));return we.default.toFixed(Math.abs(a)<10?i:we.default.add(i,we.default.mul(we.default.per(l),a)))}function Cd(s,e,t,n,o,i){let a=wn.Utils.rng(s),l=ce(e).strokeWidth,r=o?we.default.nudge(t,n,l):t,c=i?we.default.nudge(n,t,l):n,p=(0,Yi.default)([r,c],{size:l,thinning:.618+a()*.2,easing:Xn.easeOutQuad,simulatePressure:!0,streamline:0,last:!0});return wn.Utils.getSvgPathFromStroke(p)}function vd(s,e,t,n,o,i,a,l,r,c){let p=wn.Utils.rng(s),u=ce(e).strokeWidth,h=o?we.default.rotWith(t,a,u/r):t,m=i?we.default.rotWith(n,a,-(u/r)):n,g=we.default.angle(a,h),T=we.default.angle(a,m),y=[],b=8+Math.floor(Math.abs(r)/20*1+p()/2);for(let w=0;w<b;w++){let D=c(w/b),E=wn.Utils.lerpAngles(g,T,D);y.push(we.default.toFixed(we.default.nudgeAtAngle(a,E,l)))}let S=(0,Yi.default)([h,...y,m],{size:1+u,thinning:.618+p()*.2,easing:Xn.easeOutQuad,simulatePressure:!1,streamline:0,last:!0});return wn.Utils.getSvgPathFromStroke(S)}function zn(s,e,t){return wn.Utils.circleFromThreePoints(s,t,e)}function $s(s,e,t,n,o){let i=(0,Gs.intersectCircleCircle)(s,e*.618,t,n).points;if(!i)return I.warn("Could not find an intersection for the arrow head."),{left:s,right:s};let a=o?i[0]:i[1],l=a?we.default.nudge(we.default.rotWith(a,s,Math.PI/6),s,e*-.382):s,r=a?we.default.nudge(we.default.rotWith(a,s,-Math.PI/6),s,e*-.382):s;return{left:l,right:r}}function Ns(s,e,t){let n=(0,Gs.intersectCircleLineSegment)(s,t,s,e).points;if(!n)return I.warn("Could not find an intersection for the arrow head."),{left:s,right:s};let o=n[0],i=o?we.default.rotWith(o,s,Math.PI/6):s,a=o?we.default.rotWith(o,s,-Math.PI/6):s;return{left:i,right:a}}function wd(s,e,t,n,o){let{left:i,right:a}=$s(s,e,t,n,o);return`M ${i} L ${s} ${a}`}function xd(s,e,t){let{left:n,right:o}=Ns(s,e,t);return`M ${n} L ${s} ${o}`}function kd(s,e,t,n,o,i){let{strokeWidth:a}=ce(s,!1),l=we.default.dist(e,n),r=Math.min(l/3,a*8),c=[];if(we.default.dist(t,we.default.toFixed(we.default.med(e,n)))<1)c.push(`M ${e} L ${n}`),o&&c.push(xd(e,n,r)),i&&c.push(xd(n,e,r));else{let u=zn(e,t,n),h=[u[0],u[1]],m=u[2],g=bo(h,m,e,n);c.push(`M ${e} A ${m} ${m} 0 0 ${g>0?"1":"0"} ${n}`),o&&c.push(wd(e,r,h,m,g<0)),i&&c.push(wd(n,r,h,m,g>=0))}return c.join(" ")}function Yo(s,e,t){if(we.default.dist2(e,we.default.med(s,t))<=4)return[s,t];let n=[],o=zn(s,e,t),i=[o[0],o[1]],a=o[2],l=we.default.angle(i,s),r=we.default.angle(i,t);for(let c=1/20;c<1;c+=1/20){let p=wn.Utils.lerpAngles(l,r,c);n.push(we.default.nudgeAtAngle(i,p,a))}return n}function Dd(s,e,t){if(t===s||t===e)return!0;let n=Math.PI*2,o=(e-s+n)%n,i=(t-s+n)%n;return o<=Math.PI!=i>o}function bo(s,e,t,n){let o=wn.Utils.getSweep(s,t,n);return e*(2*Math.PI)*(o/(2*Math.PI))}var Pd=require("@tldraw/core"),Ws=M(require("@tldraw/vec")),sn=M(require("react"));var Ks=M(require("react"));function yo({left:s,middle:e,right:t,stroke:n,strokeWidth:o}){return Ks.createElement("g",null,Ks.createElement("path",{className:"tl-stroke-hitarea",d:`M ${s} L ${e} ${t}`}),Ks.createElement("path",{d:`M ${s} L ${e} ${t}`,fill:"none",stroke:n,strokeWidth:o,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"}))}var Bd=sn.memo(function({id:e,style:t,start:n,end:o,decorationStart:i,decorationEnd:a,isDraw:l,isDarkMode:r}){let c=Ws.default.dist(n,o);if(c<2)return null;let p=ce(t,r),{strokeWidth:u}=p,h=1+u*1.618,m=l?Cd(e,t,n,o,i,a):"M"+Ws.default.toFixed(n)+"L"+Ws.default.toFixed(o),{strokeDasharray:g,strokeDashoffset:T}=Pd.Utils.getPerfectDashProps(c,u*1.618,t.dash,2,!1),y=Math.min(c/3,u*8),b=i?Ns(n,o,y):null,S=a?Ns(o,n,y):null;return sn.createElement(sn.Fragment,null,sn.createElement("path",{className:"tl-stroke-hitarea",d:m}),sn.createElement("path",{d:m,fill:p.stroke,stroke:p.stroke,strokeWidth:l?h/2:h,strokeDasharray:g,strokeDashoffset:T,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"stroke"}),b&&sn.createElement(yo,{left:b.left,middle:n,right:b.right,stroke:p.stroke,strokeWidth:h}),S&&sn.createElement(yo,{left:S.left,middle:o,right:S.right,stroke:p.stroke,strokeWidth:h}))});var Zi=require("@tldraw/core"),Ed=M(require("@tldraw/vec")),rn=M(require("react"));var Md=rn.memo(function({id:e,style:t,start:n,bend:o,end:i,arrowBend:a,decorationStart:l,decorationEnd:r,isDraw:c,isDarkMode:p}){let u=Ed.default.dist(n,i);if(u<2)return null;let h=ce(t,p),{strokeWidth:m}=h,g=1+m*1.618,T=zn(n,o,i),y=[T[0],T[1]],b=T[2],S=bo(y,b,n,i),w=Zi.Utils.rng(e),D=Xn[w()>0?"easeInOutSine":"easeInOutCubic"],E=c?vd(e,t,n,i,l,r,y,b,S,D):Id(n,i,T,a),{strokeDasharray:x,strokeDashoffset:B}=Zi.Utils.getPerfectDashProps(Math.abs(S),g,t.dash,2,!1),k=Math.min(u/3,m*8),ee=l?$s(n,k,y,b,S<0):null,oe=r?$s(i,k,y,b,S>=0):null;return rn.createElement(rn.Fragment,null,rn.createElement("path",{className:"tl-stroke-hitarea",d:E}),rn.createElement("path",{d:E,fill:c?h.stroke:"none",stroke:h.stroke,strokeWidth:c?0:g,strokeDasharray:x,strokeDashoffset:B,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"}),ee&&rn.createElement(yo,{left:ee.left,middle:n,right:ee.right,stroke:h.stroke,strokeWidth:g}),oe&&rn.createElement(yo,{left:oe.left,middle:i,right:oe.right,stroke:h.stroke,strokeWidth:g}))});var Zo=M(require("react"));function Rd({id:s,bounds:e,labelSize:t,offset:n,scale:o=1}){return Zo.createElement("defs",null,Zo.createElement("mask",{id:s+"_clip"},Zo.createElement("rect",{x:-100,y:-100,width:e.width+200,height:e.height+200,fill:"white"}),Zo.createElement("rect",{x:e.width/2-t[0]/2*o+((n==null?void 0:n[0])||0),y:e.height/2-t[1]/2*o+((n==null?void 0:n[1])||0),width:t[0]*o,height:t[1]*o,rx:4*o,ry:4*o,fill:"black",opacity:Math.max(o,.8)})))}var Xi=class extends ge{constructor(){super(...arguments);d(this,"type","arrow");d(this,"hideBounds",!0);d(this,"canEdit",!0);d(this,"pathCache",new WeakMap);d(this,"getShape",e=>{var t,n,o,i;return f({id:"id",type:"arrow",name:"Arrow",parentId:"page",childIndex:1,point:[0,0],rotation:0,bend:0,handles:{start:f({id:"start",index:0,point:[0,0],canBind:!0},(t=e.handles)==null?void 0:t.start),end:f({id:"end",index:1,point:[1,1],canBind:!0},(n=e.handles)==null?void 0:n.end),bend:f({id:"bend",index:2,point:[.5,.5]},(o=e.handles)==null?void 0:o.bend)},decorations:(i=e.decorations)!=null?i:{end:"arrow"},style:f(C(f({},Qe),{isFilled:!1}),e.style),label:"",labelPoint:[.5,.5]},e)});d(this,"Component",ge.Component(({shape:e,isEditing:t,isGhost:n,meta:o,events:i,onShapeChange:a,onShapeBlur:l},r)=>{let{id:c,label:p="",handles:{start:u,bend:h,end:m},decorations:g={},style:T}=e,y=ie.Vec.dist(h.point,ie.Vec.toFixed(ie.Vec.med(u.point,m.point)))<1,b=xt(T),S=ce(T,o.isDarkMode),w=p||t?Jn(p,b):[0,0],D=this.getBounds(e),E=He.useMemo(()=>{let{start:oe,bend:ne,end:ve}=e.handles;if(y)return ie.Vec.dist(oe.point,ve.point);let Ie=zn(oe.point,ne.point,ve.point),Ce=Ie.slice(0,2),Ve=Ie[2],Ke=bo(Ce,Ve,oe.point,ve.point);return Math.abs(Ke)},[e.handles]),x=Math.max(.5,Math.min(1,Math.max(E/(w[1]+128),E/(w[0]+128)))),B=He.useMemo(()=>{let oe=this.getBounds(e);return ie.Vec.sub(e.handles.bend.point,ie.Vec.toFixed([oe.width/2,oe.height/2]))},[e,x]),k=He.useCallback(oe=>{a==null||a({id:c,label:oe})},[a]),ee=y?Bd:Md;return He.createElement(su,f({ref:r},i),He.createElement(Rn,{font:b,text:p,color:S.stroke,offsetX:B[0],offsetY:B[1],scale:x,isEditing:t,onChange:k,onBlur:l}),He.createElement(It.SVGContainer,{id:e.id+"_svg"},He.createElement("defs",null,He.createElement("mask",{id:e.id+"_clip"},He.createElement("rect",{x:-100,y:-100,width:D.width+200,height:D.height+200,fill:"white"}),He.createElement("rect",{x:D.width/2-w[0]/2*x+B[0],y:D.height/2-w[1]/2*x+B[1],width:w[0]*x,height:w[1]*x,rx:4*x,ry:4*x,fill:"black",opacity:1}))),He.createElement("g",{pointerEvents:"none",opacity:n?.3:1,mask:p||t?`url(#${e.id}_clip)`:""},He.createElement(ee,{id:c,style:T,start:u.point,end:m.point,bend:h.point,arrowBend:e.bend,decorationStart:g==null?void 0:g.start,decorationEnd:g==null?void 0:g.end,isDraw:T.dash==="draw",isDarkMode:o.isDarkMode}))))}));d(this,"Indicator",ge.Indicator(({shape:e,bounds:t})=>{let{style:n,decorations:o,label:i,handles:{start:a,bend:l,end:r}}=e,c=xt(n),p=i?Jn(i,c):[0,0],u=ie.Vec.dist(l.point,ie.Vec.toFixed(ie.Vec.med(a.point,r.point)))<1,h=He.useMemo(()=>{let{start:T,bend:y,end:b}=e.handles;if(u)return ie.Vec.dist(T.point,b.point);let S=zn(T.point,y.point,b.point),w=S.slice(0,2),D=S[2],E=bo(w,D,T.point,b.point);return Math.abs(E)},[e.handles]),m=Math.max(.5,Math.min(1,Math.max(h/(p[1]+128),h/(p[0]+128)))),g=He.useMemo(()=>{let T=this.getBounds(e);return ie.Vec.sub(e.handles.bend.point,[T.width/2,T.height/2])},[e,m]);return He.createElement(He.Fragment,null,He.createElement(Rd,{id:e.id,scale:m,offset:g,bounds:t,labelSize:p}),He.createElement("path",{d:kd(n,a.point,l.point,r.point,o==null?void 0:o.start,o==null?void 0:o.end),mask:i?`url(#${e.id}_clip)`:""}),i&&He.createElement("rect",{x:t.width/2-p[0]/2*m+g[0],y:t.height/2-p[1]/2*m+g[1],width:p[0]*m,height:p[1]*m,rx:4*m,ry:4*m,fill:"transparent"}))}));d(this,"getBounds",e=>{let t=It.Utils.getFromCache(this.boundsCache,e,()=>{let{handles:{start:n,bend:o,end:i}}=e;return It.Utils.getBoundsFromPoints(Yo(n.point,o.point,i.point))});return It.Utils.translateBounds(t,e.point)});d(this,"getRotatedBounds",e=>{let{handles:{start:t,bend:n,end:o}}=e,i=Yo(t.point,n.point,o.point),{minX:a,minY:l,maxX:r,maxY:c}=It.Utils.getBoundsFromPoints(i);return e.rotation!==0&&(i=i.map(p=>ie.Vec.rotWith(p,[(a+r)/2,(l+c)/2],e.rotation||0))),It.Utils.translateBounds(It.Utils.getBoundsFromPoints(i),e.point)});d(this,"getCenter",e=>{let{start:t,end:n}=e.handles;return ie.Vec.add(e.point,ie.Vec.med(t.point,n.point))});d(this,"shouldRender",(e,t)=>t.decorations!==e.decorations||t.handles!==e.handles||t.style!==e.style||t.label!==e.label);d(this,"hitTestPoint",(e,t)=>{let{handles:{start:n,bend:o,end:i}}=e,a=ie.Vec.sub(t,e.point),l=Yo(n.point,o.point,i.point);for(let r=1;r<l.length;r++)if(ie.Vec.distanceToLineSegment(l[r-1],l[r],a)<1)return!0;return!1});d(this,"hitTestLineSegment",(e,t,n)=>{let{handles:{start:o,bend:i,end:a}}=e,l=ie.Vec.sub(t,e.point),r=ie.Vec.sub(n,e.point),c=Yo(o.point,i.point,a.point);for(let p=1;p<c.length;p++)if((0,wo.intersectLineSegmentLineSegment)(c[p-1],c[p],l,r).didIntersect)return!0;return!1});d(this,"hitTestBounds",(e,t)=>{let{start:n,end:o,bend:i}=e.handles,a=ie.Vec.add(e.point,n.point),l=ie.Vec.add(e.point,o.point);if(It.Utils.pointInBounds(a,t)||It.Utils.pointInBounds(l,t))return!0;if(ie.Vec.isEqual(ie.Vec.med(n.point,o.point),i.point))return(0,wo.intersectLineSegmentBounds)(a,l,t).length>0;{let[r,c,p]=zn(n.point,i.point,o.point),u=ie.Vec.add(e.point,[r,c]);return(0,wo.intersectArcBounds)(u,p,a,l,t).length>0}});d(this,"transform",(e,t,{initialShape:n,scaleX:o,scaleY:i})=>{let a=this.getBounds(n),l=["start","end"],r=f({},n.handles);l.forEach(b=>{let[S,w]=r[b].point,D=S/a.width,E=w/a.height;r[b]=C(f({},r[b]),{point:[t.width*(o<0?1-D:D),t.height*(i<0?1-E:E)]})});let{start:c,bend:p,end:u}=r,h=ie.Vec.dist(c.point,u.point),m=ie.Vec.med(c.point,u.point),g=h/2*n.bend,T=ie.Vec.uni(ie.Vec.vec(c.point,u.point)),y=ie.Vec.add(m,ie.Vec.mul(ie.Vec.per(T),g));return r.bend=C(f({},p),{point:ie.Vec.toFixed(Math.abs(g)<10?m:y)}),{point:ie.Vec.toFixed([t.minX,t.minY]),handles:r}});d(this,"onDoubleClickHandle",(e,t)=>{var n,o;switch(t){case"bend":return{bend:0,handles:C(f({},e.handles),{bend:C(f({},e.handles.bend),{point:Vs(e.handles,e.bend)})})};case"start":return{decorations:C(f({},e.decorations),{start:((n=e.decorations)==null?void 0:n.start)?void 0:"arrow"})};case"end":return{decorations:C(f({},e.decorations),{end:((o=e.decorations)==null?void 0:o.end)?void 0:"arrow"})}}return this});d(this,"onHandleChange",(e,t)=>{let n=It.Utils.deepMerge(e.handles,t),o=e.bend;if(n=It.Utils.deepMerge(n,{start:{point:ie.Vec.toFixed(n.start.point)},end:{point:ie.Vec.toFixed(n.end.point)}}),ie.Vec.isEqual(n.start.point,n.end.point))return;if("bend"in t){let{start:c,end:p,bend:u}=n,h=ie.Vec.dist(c.point,p.point),m=ie.Vec.med(c.point,p.point),g=ie.Vec.angle(c.point,p.point),T=ie.Vec.uni(ie.Vec.vec(c.point,p.point)),y=ie.Vec.add(m,ie.Vec.mul(ie.Vec.per(T),h)),b=ie.Vec.sub(m,ie.Vec.mul(ie.Vec.per(T),h)),S=ie.Vec.nearestPointOnLineSegment(y,b,u.point,!0),D=ie.Vec.dist(m,S)/(h/2);o=It.Utils.clamp(D,-.99,.99);let E=ie.Vec.angle(c.point,S);ie.Vec.isEqual(m,Vs(n,o))?o=0:Dd(g,g+Math.PI,E)&&(o*=-1)}let i={point:e.point,bend:o,handles:C(f({},n),{bend:C(f({},n.bend),{point:Vs(n,o)})})},a=e.point,l=this.getBounds(f({},i)),r=ie.Vec.sub([l.minX,l.minY],a);return ie.Vec.isEqual(r,[0,0])||(Object.values(i.handles).forEach(c=>{c.point=ie.Vec.toFixed(ie.Vec.sub(c.point,r))}),i.point=ie.Vec.toFixed(ie.Vec.add(i.point,r))),i})}},su=R("div",{width:"100%",height:"100%"});var xn=M(require("react"));var _s=require("@tldraw/core");var qi=class extends ge{constructor(){super(...arguments);d(this,"type","group");d(this,"canBind",!0);d(this,"getShape",e=>_s.Utils.deepMerge({id:"id",type:"group",name:"Group",parentId:"page",childIndex:1,point:[0,0],size:[100,100],rotation:0,children:[],style:Qe},e));d(this,"Component",ge.Component(({shape:e,isBinding:t,isGhost:n,isHovered:o,isSelected:i,events:a},l)=>{let{id:r,size:c}=e,p=2,u=Math.max(0,c[0]-p/2),h=Math.max(0,c[1]-p/2),g=[[[p/2,p/2],[u,p/2],u-p/2],[[u,p/2],[u,h],h-p/2],[[u,h],[p/2,h],u-p/2],[[p/2,h],[p/2,p/2],h-p/2]].map(([T,y],b)=>xn.createElement("line",{key:r+"_"+b,x1:T[0],y1:T[1],x2:y[0],y2:y[1]}));return xn.createElement(_s.SVGContainer,f({ref:l},a),t&&xn.createElement("rect",{className:"tl-binding-indicator",strokeWidth:this.bindingDistance}),xn.createElement("g",{opacity:n?.3:1},xn.createElement("rect",{x:0,y:0,width:c[0],height:c[1],fill:"transparent",pointerEvents:"all"}),xn.createElement(Ld,{stroke:"black",opacity:o||i?1:0,strokeLinecap:"round",pointerEvents:"stroke"},g)))}));d(this,"Indicator",ge.Indicator(({shape:e})=>{let{id:t,size:n}=e,o=2,i=Math.max(0,n[0]-o/2),a=Math.max(0,n[1]-o/2),r=[[[o/2,o/2],[i,o/2],i-o/2],[[i,o/2],[i,a],a-o/2],[[i,a],[o/2,a],i-o/2],[[o/2,a],[o/2,o/2],a-o/2]].map(([c,p],u)=>xn.createElement("line",{key:t+"_"+u,x1:c[0],y1:c[1],x2:p[0],y2:p[1]}));return xn.createElement(Ld,{strokeLinecap:"round",pointerEvents:"stroke"},r)}));d(this,"getBounds",e=>Lt(e,this.boundsCache));d(this,"shouldRender",(e,t)=>t.size!==e.size||t.style!==e.style)}},Ld=R("g",{strokeWidth:"calc(1.5px * var(--tl-scale))",strokeDasharray:"calc(1px * var(--tl-scale)), calc(3px * var(--tl-scale))"});var je=M(require("react")),Xo=require("@tldraw/core");var Ad=require("@tldraw/vec");var Qi=class extends ge{constructor(){super(...arguments);d(this,"type","sticky");d(this,"canBind",!0);d(this,"canEdit",!0);d(this,"canClone",!0);d(this,"hideResizeHandles",!0);d(this,"showCloneHandles",!0);d(this,"getShape",e=>Xo.Utils.deepMerge({id:"id",type:"sticky",name:"Sticky",parentId:"page",childIndex:1,point:[0,0],size:[200,200],text:"",rotation:0,style:mo},e));d(this,"Component",ge.Component(({shape:e,meta:t,events:n,isGhost:o,isBinding:i,isEditing:a,onShapeBlur:l,onShapeChange:r},c)=>{let p=_a(e.style),{color:u,fill:h}=Fi(e.style,t.isDarkMode),m=je.useRef(null),g=je.useRef(null),T=je.useRef(null),y=je.useRef(!1),b=je.useCallback(k=>{k.stopPropagation()},[]),S=je.useCallback(k=>{r==null||r({id:e.id,type:e.type,text:I.normalizeText(k)})},[e.id]),w=je.useCallback(k=>{S(k.currentTarget.value)},[r,S]),D=je.useCallback(k=>{if(k.key==="Escape"){k.preventDefault(),k.stopPropagation(),l==null||l();return}if(k.key==="Tab"&&e.text.length===0){k.preventDefault();return}if(!(k.key==="Meta"||k.metaKey))k.stopPropagation();else if(k.key==="z"&&k.metaKey){k.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1),k.stopPropagation(),k.preventDefault();return}(k.metaKey||k.ctrlKey)&&k.key==="="&&k.preventDefault(),k.key==="Tab"&&(k.preventDefault(),k.shiftKey?We.unindent(k.currentTarget):We.indent(k.currentTarget),r==null||r(C(f({},e),{text:I.normalizeText(k.currentTarget.value)})))},[e,r]),E=je.useCallback(k=>{k.currentTarget.setSelectionRange(0,0),l==null||l()},[]),x=je.useCallback(k=>{!a||!y.current||k.currentTarget.select()},[a]);je.useEffect(()=>{if(a){y.current=!0;let k=g.current;k.focus(),k.select()}},[a]),je.useEffect(()=>{let k=T.current,{size:ee}=e,{offsetHeight:oe}=k,ne=Ji-an*2,ve=ee[1]-an*2;if(oe===ve)return;if(oe>ne){r==null||r({id:e.id,size:[ee[0],oe+an*2]});return}if(oe<ne&&ee[1]>Ji){r==null||r({id:e.id,size:[ee[0],Ji]});return}let Ie=g.current;Ie==null||Ie.focus()},[e.text,e.size[1],e.style]);let B={font:p,color:u,textShadow:t.isDarkMode?"0.5px 0.5px 2px rgba(255, 255, 255,.25)":"0.5px 0.5px 2px rgba(255, 255, 255,.5)"};return je.createElement(Xo.HTMLContainer,f({ref:c},n),je.createElement(iu,{ref:m,isDarkMode:t.isDarkMode,isGhost:o,style:f({backgroundColor:h},B)},i&&je.createElement("div",{className:"tl-binding-indicator",style:{position:"absolute",top:-this.bindingDistance,left:-this.bindingDistance,width:`calc(100% + ${this.bindingDistance*2}px)`,height:`calc(100% + ${this.bindingDistance*2}px)`,backgroundColor:"var(--tl-selectFill)"}}),je.createElement(ru,{ref:T,isEditing:a,alignment:e.style.textAlign},e.text,"\u200B"),a&&je.createElement(au,{ref:g,onPointerDown:b,value:e.text,onChange:w,onKeyDown:D,onFocus:x,onBlur:E,tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,spellCheck:!0,alignment:e.style.textAlign,onContextMenu:dt,onCopy:dt,onPaste:dt,onCut:dt})))}));d(this,"Indicator",ge.Indicator(({shape:e})=>{let{size:[t,n]}=e;return je.createElement("rect",{x:0,y:0,rx:3,ry:3,width:Math.max(1,t),height:Math.max(1,n)})}));d(this,"getBounds",e=>Lt(e,this.boundsCache));d(this,"shouldRender",(e,t)=>t.size!==e.size||t.style!==e.style||t.text!==e.text);d(this,"transform",(e,t,{scaleX:n,scaleY:o,transformOrigin:i})=>({point:Ad.Vec.toFixed([t.minX+(t.width-e.size[0])*(n<0?1-i[0]:i[0]),t.minY+(t.height-e.size[1])*(o<0?1-i[1]:i[1])])}));d(this,"transformSingle",e=>e);d(this,"getSvgElement",(e,t)=>{let n=this.getBounds(e),o=Xo.Utils.expandBounds(n,-an),i=go(e.text,e.style,o),a=Fi(e.style,t);i.setAttribute("fill",a.color),i.setAttribute("transform",`translate(${an}, ${an})`);let l=document.createElementNS("http://www.w3.org/2000/svg","g"),r=document.createElementNS("http://www.w3.org/2000/svg","rect");return r.setAttribute("width",n.width+""),r.setAttribute("height",n.height+""),r.setAttribute("fill",a.fill),r.setAttribute("rx","3"),r.setAttribute("ry","3"),l.appendChild(r),l.appendChild(i),l})}},an=16,Ji=200,iu=R("div",{pointerEvents:"all",position:"relative",backgroundColor:"rgba(255, 220, 100)",fontFamily:"sans-serif",height:"100%",width:"100%",padding:an+"px",borderRadius:"3px",perspective:"800px",variants:{isGhost:{false:{opacity:1},true:{transition:"opacity .2s",opacity:.3}},isDarkMode:{true:{boxShadow:"2px 3px 12px -2px rgba(0,0,0,.3), 1px 1px 4px rgba(0,0,0,.3), 1px 1px 2px rgba(0,0,0,.3)"},false:{boxShadow:"2px 3px 12px -2px rgba(0,0,0,.2), 1px 1px 4px rgba(0,0,0,.16),  1px 1px 2px rgba(0,0,0,.16)"}}}}),Hd={whiteSpace:"pre-wrap",overflowWrap:"break-word"},ru=R("div",f({position:"absolute",top:an,left:an,width:`calc(100% - ${an*2}px)`,height:"fit-content",font:"inherit",pointerEvents:"none",userSelect:"none",variants:{isEditing:{true:{opacity:1},false:{opacity:1}},alignment:{["start"]:{textAlign:"left"},["middle"]:{textAlign:"center"},["end"]:{textAlign:"right"},["justify"]:{textAlign:"justify"}}}},Hd)),au=R("textarea",C(f({width:"100%",height:"100%",border:"none",overflow:"hidden",background:"none",outline:"none",textAlign:"left",font:"inherit",padding:0,color:"transparent",verticalAlign:"top",resize:"none",caretColor:"black"},Hd),{variants:{alignment:{["start"]:{textAlign:"left"},["middle"]:{textAlign:"center"},["end"]:{textAlign:"right"},["justify"]:{textAlign:"justify"}}},"&:focus":{outline:"none",border:"none"}}));var $e=M(require("react")),xo=require("@tldraw/core");var In=require("@tldraw/vec");var er=class extends ge{constructor(){super(...arguments);d(this,"type","text");d(this,"isAspectRatioLocked",!0);d(this,"canEdit",!0);d(this,"canBind",!0);d(this,"canClone",!0);d(this,"bindingDistance",16/2);d(this,"getShape",e=>xo.Utils.deepMerge({id:"id",type:"text",name:"Text",parentId:"page",childIndex:1,point:[0,0],rotation:0,text:" ",style:mo},e));d(this,"texts",new Map);d(this,"Component",ge.Component(({shape:e,isBinding:t,isGhost:n,isEditing:o,onShapeBlur:i,onShapeChange:a,meta:l,events:r},c)=>{let{text:p,style:u}=e,h=ce(u,l.isDarkMode),m=xt(e.style),g=$e.useRef(null),T=$e.useRef(!1),y=$e.useRef(p);$e.useLayoutEffect(()=>{if(p!==y.current){let x=[0,0];this.texts.set(e.id,p);let B=this.getBounds(e),k=this.getBounds(e);switch(e.style.textAlign){case"start":break;case"middle":{x=In.Vec.div([k.width-B.width,0],2);break}case"end":{x=[k.width-B.width,0];break}}y.current=p,a==null||a(C(f({},e),{id:e.id,point:In.Vec.sub(e.point,x),text:p}))}},[p]);let b=$e.useCallback(x=>{let B=[0,0],k=I.normalizeText(x.currentTarget.value),ee=this.getBounds(e);this.texts.set(e.id,k);let oe=this.getBounds(C(f({},e),{text:k}));switch(e.style.textAlign){case"start":break;case"middle":{B=In.Vec.div([oe.width-ee.width,0],2);break}case"end":{B=[oe.width-ee.width,0];break}}y.current=k,a==null||a(C(f({},e),{id:e.id,point:In.Vec.sub(e.point,B),text:k}))},[e.id,e.point]),S=$e.useCallback(x=>{if(x.key==="Escape"){x.preventDefault(),x.stopPropagation(),i==null||i();return}if(x.key==="Tab"&&e.text.length===0){x.preventDefault();return}if(x.key==="Enter"&&(x.metaKey||x.ctrlKey)){x.preventDefault(),x.stopPropagation(),g.current.blur();return}if(!(x.key==="Meta"||x.metaKey))x.stopPropagation();else if(x.key==="z"&&x.metaKey){x.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1),x.stopPropagation(),x.preventDefault();return}(x.metaKey||x.ctrlKey)&&x.key==="="&&x.preventDefault(),x.key==="Tab"&&(x.preventDefault(),x.shiftKey?We.unindent(x.currentTarget):We.indent(x.currentTarget),a==null||a(C(f({},e),{text:I.normalizeText(x.currentTarget.value)})))},[e,a]),w=$e.useCallback(x=>{x.currentTarget.setSelectionRange(0,0),i==null||i()},[]),D=$e.useCallback(x=>{!o||!T.current||document.activeElement===x.currentTarget&&x.currentTarget.select()},[o]),E=$e.useCallback(x=>{o&&x.stopPropagation()},[o]);return $e.useEffect(()=>{o?(this.texts.set(e.id,p),requestAnimationFrame(()=>{T.current=!0;let x=g.current;x&&(x.focus(),x.select())})):i==null||i()},[o]),$e.createElement(xo.HTMLContainer,f({ref:c},r),$e.createElement(lu,{isGhost:n,isEditing:o,onPointerDown:E},$e.createElement(cu,{style:{font:m,color:h.stroke,textAlign:Ko(u.textAlign)}},t&&$e.createElement("div",{className:"tl-binding-indicator",style:{position:"absolute",top:-this.bindingDistance,left:-this.bindingDistance,width:`calc(100% + ${this.bindingDistance*2}px)`,height:`calc(100% + ${this.bindingDistance*2}px)`,backgroundColor:"var(--tl-selectFill)"}}),o?$e.createElement(pu,{ref:g,style:{font:m,color:h.stroke},name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:p,color:h.stroke,onFocus:D,onChange:b,onKeyDown:S,onBlur:w,onPointerDown:E,onContextMenu:dt,onCopy:dt,onPaste:dt,onCut:dt}):p,"\u200B")))}));d(this,"Indicator",ge.Indicator(({shape:e})=>{let{width:t,height:n}=this.getBounds(e);return $e.createElement("rect",{x:0,y:0,width:t,height:n})}));d(this,"getBounds",e=>{let t=xo.Utils.getFromCache(this.boundsCache,e,()=>{var i;if(!Fn)return{minX:0,minY:0,maxX:10,maxY:10,width:10,height:10};Fn.parentNode||document.body.appendChild(Fn),Fn.style.font=xt(e.style),Fn.textContent=(i=this.texts.get(e.id))!=null?i:e.text;let n=Fn.offsetWidth||1,o=Fn.offsetHeight||1;return{minX:0,maxX:n,minY:0,maxY:o,width:n,height:o}});return xo.Utils.translateBounds(t,e.point)});d(this,"shouldRender",(e,t)=>t.text!==e.text||t.style.scale!==e.style.scale||t.style!==e.style);d(this,"transform",(e,t,{initialShape:n,scaleX:o,scaleY:i})=>{let{rotation:a=0,style:{scale:l=1}}=n,r=l*Math.abs(Math.min(o,i));return{point:[t.minX,t.minY],rotation:o<0&&i>=0||i<0&&o>=0?-(a||0):a,style:C(f({},n.style),{scale:r})}});d(this,"transformSingle",(e,t,{initialShape:n,scaleX:o,scaleY:i})=>{let{style:{scale:a=1}}=n;return{point:In.Vec.toFixed([t.minX,t.minY]),style:C(f({},n.style),{scale:a*Math.max(Math.abs(i),Math.abs(o))})}});d(this,"onDoubleClickBoundsHandle",e=>{let t=this.getCenter(e),n=this.getCenter(C(f({},e),{style:C(f({},e.style),{scale:1})}));return{style:C(f({},e.style),{scale:1}),point:In.Vec.toFixed(In.Vec.add(e.point,In.Vec.sub(t,n)))}});d(this,"getSvgElement",(e,t)=>{let n=this.getBounds(e),o=ce(e.style,t),i=go(e.text,e.style,n);return i.setAttribute("fill",o.stroke),i})}},Fn;function du(){var e;(e=document.getElementById("__textMeasure"))==null||e.remove();let s=document.createElement("pre");return s.id="__textMeasure",Object.assign(s.style,{whiteSpace:"pre",width:"auto",border:"1px solid transparent",padding:"4px",margin:"0px",letterSpacing:Zn,opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",pointerEvents:"none",userSelect:"none",alignmentBaseline:"mathematical",dominantBaseline:"mathematical"}),s.tabIndex=-1,document.body.appendChild(s),s}typeof window!="undefined"&&(Fn=du());var lu=R("div",{width:"100%",height:"100%",variants:{isGhost:{false:{opacity:1},true:{transition:"opacity .2s",opacity:.3}},isEditing:{false:{pointerEvents:"all",userSelect:"all"},true:{pointerEvents:"none",userSelect:"none"}}}}),zd={whiteSpace:"pre-wrap",overflowWrap:"break-word"},cu=R("div",f({position:"absolute",width:"100%",height:"100%",padding:"4px",zIndex:1,minHeight:1,minWidth:1,lineHeight:1,letterSpacing:Zn,outline:0,fontWeight:"500",backfaceVisibility:"hidden",userSelect:"none",pointerEvents:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",isEditing:{false:{},true:{pointerEvents:"all",background:"$boundsBg",userSelect:"text",WebkitUserSelect:"text"}}},zd)),pu=R("textarea",C(f({position:"absolute",top:0,left:0,zIndex:1,width:"100%",height:"100%",border:"none",padding:"4px",resize:"none",textAlign:"inherit",minHeight:"inherit",minWidth:"inherit",lineHeight:"inherit",letterSpacing:"inherit",outline:0,fontWeight:"inherit",overflow:"hidden",backfaceVisibility:"hidden",display:"inline-block",pointerEvents:"all",background:"$boundsBg",userSelect:"text",WebkitUserSelect:"text"},zd),{"&:focus":{outline:"none",border:"none"}}));var et=M(require("react")),Ue=require("@tldraw/core"),dn=require("@tldraw/vec");var Cn=require("@tldraw/intersect");var Ys=require("@tldraw/core"),Fd=M(require("@tldraw/vec")),qo=require("perfect-freehand");var uu={easing:s=>Math.sin(s*Math.PI/2),simulatePressure:!0},hu={easing:s=>s*s,simulatePressure:!1};function tr(s){let e=ce(s.style);return C(f({size:1+e.strokeWidth*1.5,thinning:.65,streamline:.65,smoothing:.65},s.points[1][2]===.5?uu:hu),{last:s.isComplete})}function Od(s){return s.points.length<2?"":Ys.Utils.getSvgPathFromStroke((0,qo.getStrokePoints)(s.points,tr(s)).map(e=>e.point))}function jd(s,e){return(0,qo.getStrokePoints)(s.points,e)}function Ud(s){if(s.points.length<2)return"";let e=tr(s),t=jd(s,e);return Ys.Utils.getSvgPathFromStroke((0,qo.getStrokeOutlinePoints)(t,e))}function nr(s){let{points:e}=s;if(e.length<2)return"M 0 0 L 0 0";let t=tr(s),n=jd(s,t).map(a=>a.point.slice(0,2)),o=e[e.length-1].slice(0,2);return Fd.default.isEqual(n[0],o)||n.push(o),Ys.Utils.getSvgPathFromStroke(n,!1)}var or=class extends ge{constructor(){super(...arguments);d(this,"type","draw");d(this,"pointsBoundsCache",new WeakMap([]));d(this,"shapeBoundsCache",new Map);d(this,"rotatedCache",new WeakMap([]));d(this,"pointCache",{});d(this,"canClone",!0);d(this,"getShape",e=>Ue.Utils.deepMerge({id:"id",type:"draw",name:"Draw",parentId:"page",childIndex:1,point:[0,0],rotation:0,style:Qe,points:[],isComplete:!1},e));d(this,"Component",ge.Component(({shape:e,meta:t,isSelected:n,isGhost:o,events:i},a)=>{let{points:l,style:r,isComplete:c}=e,p=et.useMemo(()=>Od(e),[l,r.size]),u=et.useMemo(()=>r.dash==="draw"?Ud(e):nr(e),[l,r.size,r.dash,c]),h=ce(r,t.isDarkMode),{stroke:m,fill:g,strokeWidth:T}=h,y=this.getBounds(e);if(y.width<=T/2&&y.height<=T/2){let x=1+T;return et.createElement(Ue.SVGContainer,f({ref:a,id:e.id+"_svg"},i),et.createElement("circle",{r:x,fill:m,stroke:m,pointerEvents:"all",opacity:o?.3:1}))}let S=r.isFilled&&l.length>3&&dn.Vec.dist(l[0],l[l.length-1])<T*2;if(e.style.dash==="draw")return et.createElement(Ue.SVGContainer,f({ref:a,id:e.id+"_svg"},i),et.createElement("g",{opacity:o?.3:1},et.createElement("path",{className:S||n?"tl-fill-hitarea":"tl-stroke-hitarea",d:u}),S&&et.createElement("path",{d:p,stroke:"none",fill:g,strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none"}),et.createElement("path",{d:u,fill:m,stroke:m,strokeWidth:T/2,strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none"})));let w={["draw"]:"none",["solid"]:"none",["dotted"]:`0.1 ${T*4}`,["dashed"]:`${T*4} ${T*4}`}[r.dash],D={["draw"]:"none",["solid"]:"none",["dotted"]:"0",["dashed"]:"0"}[r.dash],E=1+T*1.5;return et.createElement(Ue.SVGContainer,f({ref:a,id:e.id+"_svg"},i),et.createElement("g",{opacity:o?.3:1},et.createElement("path",{className:S&&n?"tl-fill-hitarea":"tl-stroke-hitarea",d:u}),et.createElement("path",{d:u,fill:S?g:"none",stroke:"none",strokeWidth:Math.min(4,T*2),strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none"}),et.createElement("path",{d:u,fill:"none",stroke:m,strokeWidth:E,strokeDasharray:w,strokeDashoffset:D,strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none"})))}));d(this,"Indicator",ge.Indicator(({shape:e})=>{let{points:t}=e,n=et.useMemo(()=>nr(e),[t]),o=this.getBounds(e);return o.width<4&&o.height<4?et.createElement("circle",{x:o.width/2,y:o.height/2,r:1}):et.createElement("path",{d:n})}));d(this,"transform",(e,t,{initialShape:n,scaleX:o,scaleY:i})=>{let a=Ue.Utils.getFromCache(this.boundsCache,n,()=>Ue.Utils.getBoundsFromPoints(n.points)),l=n.points.map(([p,u,h])=>[t.width*(o<0?1-p/a.width:p/a.width),t.height*(i<0?1-u/a.height:u/a.height),h]),r=Ue.Utils.getBoundsFromPoints(e.points),c=dn.Vec.sub([t.minX,t.minY],[r.minX,r.minY]);return{points:l,point:c}});d(this,"getBounds",e=>{let t=!this.pointsBoundsCache.has(e.points),n=this.pointCache[e.id]!==e.point;if(t){let o=Ue.Utils.getBoundsFromPoints(e.points);this.pointsBoundsCache.set(e.points,o),this.shapeBoundsCache.set(e.id,Ue.Utils.translateBounds(o,e.point)),this.pointCache[e.id]=e.point}else n&&!t&&(this.pointCache[e.id]=e.point,this.shapeBoundsCache.set(e.id,Ue.Utils.translateBounds(this.pointsBoundsCache.get(e.points),e.point)));return this.shapeBoundsCache.get(e.id)});d(this,"shouldRender",(e,t)=>t.points!==e.points||t.style!==e.style||t.isComplete!==e.isComplete);d(this,"hitTestPoint",(e,t)=>{let n=dn.Vec.sub(t,e.point);return Ue.Utils.pointInPolyline(n,e.points)});d(this,"hitTestLineSegment",(e,t,n)=>{let{points:o,point:i}=e,a=dn.Vec.sub(t,i),l=dn.Vec.sub(n,i),r=this.getBounds(e);if(r.width<8&&r.height<8)return dn.Vec.distanceToLineSegment(t,n,Ue.Utils.getBoundsCenter(r))<5;if((0,Cn.intersectLineSegmentBounds)(a,l,r)){for(let c=1;c<o.length;c++)if((0,Cn.intersectLineSegmentLineSegment)(o[c-1],o[c],a,l).didIntersect)return!0}return!1});d(this,"hitTestBounds",(e,t)=>{if(!e.rotation){let i=this.getBounds(e);return Ue.Utils.boundsContain(t,i)||(Ue.Utils.boundsContain(i,t)||(0,Cn.intersectBoundsBounds)(i,t).length>0)&&(0,Cn.intersectBoundsPolyline)(Ue.Utils.translateBounds(t,dn.Vec.neg(e.point)),e.points).length>0}let n=this.getRotatedBounds(e),o=Ue.Utils.getFromCache(this.rotatedCache,e,()=>{let i=Ue.Utils.getBoundsCenter(Ue.Utils.getBoundsFromPoints(e.points));return e.points.map(a=>dn.Vec.rotWith(a,i,e.rotation||0))});return Ue.Utils.boundsContain(t,n)||(0,Cn.intersectBoundsPolyline)(Ue.Utils.translateBounds(t,dn.Vec.neg(e.point)),o).length>0})}};var Nt=M(require("react")),Zs=require("@tldraw/core");var sr=require("@stitches/react"),ir=class extends ge{constructor(){super(...arguments);d(this,"type","image");d(this,"canBind",!0);d(this,"canClone",!0);d(this,"isAspectRatioLocked",!0);d(this,"showCloneHandles",!0);d(this,"getShape",e=>Zs.Utils.deepMerge({id:"image",type:"image",name:"Image",parentId:"page",childIndex:1,point:[0,0],size:[1,1],rotation:0,style:C(f({},Qe),{isFilled:!0}),assetId:"assetId"},e));d(this,"Component",ge.Component(({shape:e,asset:t={src:""},isBinding:n,isGhost:o,meta:i,events:a,onShapeChange:l},r)=>{let{size:c,style:p}=e,u=Nt.useRef(null),h=Nt.useRef(null);return Nt.useLayoutEffect(()=>{let m=h.current;if(!m)return;let[g,T]=c;m.style.width=`${g}px`,m.style.height=`${T}px`},[c]),Nt.createElement(Zs.HTMLContainer,f({ref:r},a),n&&Nt.createElement("div",{className:"tl-binding-indicator",style:{position:"absolute",top:`calc(${-this.bindingDistance}px * var(--tl-zoom))`,left:`calc(${-this.bindingDistance}px * var(--tl-zoom))`,width:`calc(100% + ${this.bindingDistance*2}px * var(--tl-zoom))`,height:`calc(100% + ${this.bindingDistance*2}px * var(--tl-zoom))`,backgroundColor:"var(--tl-selectFill)"}}),Nt.createElement(mu,{ref:h,isDarkMode:i.isDarkMode,isFilled:p.isFilled,isGhost:o},Nt.createElement(gu,{id:e.id+"_image",ref:u,src:t.src,alt:"tl_image_asset",draggable:!1})))}));d(this,"Indicator",ge.Indicator(({shape:e})=>{let{size:[t,n]}=e;return Nt.createElement("rect",{x:0,y:0,rx:2,ry:2,width:Math.max(1,t),height:Math.max(1,n)})}));d(this,"getBounds",e=>Lt(e,this.boundsCache));d(this,"shouldRender",(e,t)=>t.size!==e.size||t.style!==e.style);d(this,"transform",En);d(this,"transformSingle",Mn);d(this,"getSvgElement",e=>{let t=this.getBounds(e),n=document.createElementNS("http://www.w3.org/2000/svg","image");return n.setAttribute("width",`${t.width}`),n.setAttribute("height",`${t.height}`),n.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),n})}},mu=(0,sr.styled)("div",{pointerEvents:"all",position:"relative",fontFamily:"sans-serif",fontSize:"2em",height:"100%",width:"100%",borderRadius:"3px",perspective:"800px",overflow:"hidden",p:{userSelect:"none"},img:{userSelect:"none"},variants:{isGhost:{false:{opacity:1},true:{transition:"opacity .2s",opacity:.3}},isFilled:{true:{},false:{}},isDarkMode:{true:{},false:{}}},compoundVariants:[{isFilled:!0,isDarkMode:!0,css:{boxShadow:"2px 3px 12px -2px rgba(0,0,0,.3), 1px 1px 4px rgba(0,0,0,.3), 1px 1px 2px rgba(0,0,0,.3)"}},{isFilled:!0,isDarkMode:!1,css:{boxShadow:"2px 3px 12px -2px rgba(0,0,0,.2), 1px 1px 4px rgba(0,0,0,.16),  1px 1px 2px rgba(0,0,0,.16)"}}]}),gu=(0,sr.styled)("img",{position:"absolute",top:0,left:0,width:"100%",height:"100%",maxWidth:"100%",minWidth:"100%",pointerEvents:"none",objectFit:"cover",userSelect:"none",borderRadius:2});var st=M(require("react")),Xs=require("@tldraw/core");var rr=require("@stitches/react"),ar=class extends ge{constructor(){super(...arguments);d(this,"type","video");d(this,"canBind",!0);d(this,"canEdit",!0);d(this,"canClone",!0);d(this,"isAspectRatioLocked",!0);d(this,"showCloneHandles",!0);d(this,"isStateful",!0);d(this,"getShape",e=>Xs.Utils.deepMerge({id:"video",type:"video",name:"Video",parentId:"page",childIndex:1,point:[0,0],size:[1,1],rotation:0,style:Qe,assetId:"assetId",isPlaying:!0,currentTime:0},e));d(this,"Component",ge.Component(({shape:e,asset:t={src:""},isBinding:n,isEditing:o,isGhost:i,meta:a,events:l,onShapeChange:r},c)=>{let p=st.useRef(null),u=st.useRef(null),{currentTime:h=0,size:m,isPlaying:g,style:T}=e;st.useLayoutEffect(()=>{let w=u.current;if(!w)return;let[D,E]=m;w.style.width=`${D}px`,w.style.height=`${E}px`},[m]),st.useLayoutEffect(()=>{let w=p.current;!w||(g?w.play():w.pause())},[g]),st.useLayoutEffect(()=>{let w=p.current;!w||h!==w.currentTime&&(w.currentTime=h)},[h]);let y=st.useCallback(()=>{r==null||r({id:e.id,isPlaying:!0})},[]),b=st.useCallback(()=>{r==null||r({id:e.id,isPlaying:!1})},[]),S=st.useCallback(()=>{let w=p.current;!w||!o||r==null||r({id:e.id,currentTime:w.currentTime})},[o]);return st.createElement(Xs.HTMLContainer,f({ref:c},l),n&&st.createElement("div",{className:"tl-binding-indicator",style:{position:"absolute",top:-this.bindingDistance,left:-this.bindingDistance,width:`calc(100% + ${this.bindingDistance*2}px)`,height:`calc(100% + ${this.bindingDistance*2}px)`,backgroundColor:"var(--tl-selectFill)"}}),st.createElement(fu,{ref:u,isDarkMode:a.isDarkMode,isGhost:i,isFilled:T.isFilled},st.createElement(Su,{ref:p,id:e.id+"_video",muted:!0,loop:!0,playsInline:!0,disableRemotePlayback:!0,disablePictureInPicture:!0,controls:o,autoPlay:g,onPlay:y,onPause:b,onTimeUpdate:S},st.createElement("source",{src:t.src}))))}));d(this,"Indicator",ge.Indicator(({shape:e})=>{let{size:[t,n]}=e;return st.createElement("rect",{x:0,y:0,rx:2,ry:2,width:Math.max(1,t),height:Math.max(1,n)})}));d(this,"getBounds",e=>Lt(e,this.boundsCache));d(this,"shouldRender",(e,t)=>t.size!==e.size||t.style!==e.style||t.isPlaying!==e.isPlaying);d(this,"getSvgElement",e=>{let t=this.getBounds(e),n=document.createElementNS("http://www.w3.org/2000/svg","image");return n.setAttribute("width",`${t.width}`),n.setAttribute("height",`${t.height}`),n.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),n});d(this,"transform",En);d(this,"transformSingle",Mn)}},fu=(0,rr.styled)("div",{pointerEvents:"all",position:"relative",fontFamily:"sans-serif",fontSize:"2em",height:"100%",width:"100%",borderRadius:"3px",perspective:"800px",overflow:"hidden",p:{userSelect:"none"},img:{userSelect:"none"},variants:{isGhost:{false:{opacity:1},true:{transition:"opacity .2s",opacity:.3}},isFilled:{true:{},false:{}},isDarkMode:{true:{},false:{}}},compoundVariants:[{isFilled:!0,isDarkMode:!0,css:{boxShadow:"2px 3px 12px -2px rgba(0,0,0,.3), 1px 1px 4px rgba(0,0,0,.3), 1px 1px 2px rgba(0,0,0,.3)"}},{isFilled:!0,isDarkMode:!1,css:{boxShadow:"2px 3px 12px -2px rgba(0,0,0,.2), 1px 1px 4px rgba(0,0,0,.16),  1px 1px 2px rgba(0,0,0,.16)"}}]}),Su=(0,rr.styled)("video",{position:"absolute",top:0,left:0,width:"100%",height:"100%",maxWidth:"100%",minWidth:"100%",pointerEvents:"none",objectFit:"cover",userSelect:"none",borderRadius:2});var qs=new Vi,Js=new Ki,Qs=new _i,ei=new or,Io=new Xi,Gd=new er,Vd=new qi,Jo=new Qi,$d=new ir,Nd=new ar,ln={["rectangle"]:qs,["triangle"]:Js,["ellipse"]:Qs,["draw"]:ei,["arrow"]:Io,["text"]:Gd,["group"]:Vd,["sticky"]:Jo,["image"]:$d,["video"]:Nd},dr=s=>typeof s=="string"?ln[s]:ln[s.type];function ct(s){if(s===null)return s;if(s instanceof Date)return new Date(s.getTime());if(typeof s=="object")if(typeof s[Symbol.iterator]=="function"){let e=[];if(s.length>0)for(let t of s)e.push(ct(t));return e}else{let e=Object.keys(s),t={};if(e.length>0)for(let n of e)t[n]=ct(s[n]);return t}return s}var On=require("@tldraw/intersect");var Kd=!1,re=class{static getShapeUtil(e){return dr(e)}static getSelectedShapes(e,t){let n=re.getPage(e,t);return re.getSelectedIds(e,t).map(i=>n.shapes[i])}static screenToWorld(e,t){let n=re.getPageState(e,e.appState.currentPageId).camera;return de.Vec.sub(de.Vec.div(t,n.zoom),n.point)}static getCameraZoom(e){return Ct.Utils.clamp(e,.1,5)}static getPage(e,t){return e.document.pages[t]}static getPageState(e,t){return e.document.pageStates[t]}static getSelectedIds(e,t){return re.getPageState(e,t).selectedIds}static getShapes(e,t){return Object.values(re.getPage(e,t).shapes)}static getCamera(e,t){return re.getPageState(e,t).camera}static getShape(e,t,n){return re.getPage(e,n).shapes[t]}static getCenter(e){return re.getShapeUtil(e).getCenter(e)}static getBounds(e){return re.getShapeUtil(e).getBounds(e)}static getRotatedBounds(e){return re.getShapeUtil(e).getRotatedBounds(e)}static getSelectedBounds(e){return Ct.Utils.getCommonBounds(re.getSelectedShapes(e,e.appState.currentPageId).map(t=>re.getShapeUtil(t).getBounds(t)))}static getParentId(e,t,n){return re.getShape(e,t,n).parentId}static getDocumentBranch(e,t,n){let o=re.getShape(e,t,n);return o.children===void 0?[t]:[t,...o.children.flatMap(i=>re.getDocumentBranch(e,i,n))]}static getSelectedBranchSnapshot(e,t,n){let o=re.getPage(e,t),i=re.getSelectedIds(e,t).flatMap(a=>re.getDocumentBranch(e,a,t).map(l=>o.shapes[l])).filter(a=>!a.isLocked).map(Ct.Utils.deepClone);return n!==void 0?i.map(a=>f({id:a.id},n(a))):i}static getSelectedShapeSnapshot(e,t,n){let o=re.getSelectedShapes(e,t).filter(i=>!i.isLocked).map(Ct.Utils.deepClone);return n!==void 0?o.map(i=>f({id:i.id},n(i))):o}static getAllEffectedShapeIds(e,t,n){let o=re.getPage(e,n),i=new Set(t);return t.forEach(a=>{let l=o.shapes[a];function r(p){p.children!==void 0&&p.children.filter(u=>!i.has(u)).forEach(u=>{i.add(u),r(o.shapes[u])})}r(l);function c(p){let u=p.parentId;u!==o.id&&(i.has(u)||(i.add(u),c(o.shapes[u])))}c(l),i.forEach(p=>{Object.values(o.bindings).filter(u=>u.fromId===p||u.toId===p).forEach(u=>i.add(u.fromId===p?u.toId:u.fromId))})}),Array.from(i.values())}static getLinkedShapeIds(e,t,n,o=!0){let i=re.getSelectedIds(e,t),a=re.getPage(e,t),l=new Set(i),r=new Set,c=[...i],p=new Set(Object.values(a.shapes).filter(u=>{var h;return u.type==="arrow"&&(u.handles.start.bindingId||((h=u.handles)==null?void 0:h.end.bindingId))}));for(;c.length;){let u=c.pop();if(!(u&&p.size))break;r.has(u)||(r.add(u),p.forEach(h=>{var S,w;let{handles:{start:{bindingId:m},end:{bindingId:g}}}=h,T=m?a.bindings[m]:null,y=g?a.bindings[g]:null,b=!1;T&&T.toId===u?(n==="center"?b=!0:((S=h.decorations)==null?void 0:S.start)&&y?b=n==="left":b=n==="right",b&&(o&&l.add(h.id),l.add(u),y&&(l.add(y.toId),c.push(y.toId)))):y&&y.toId===u&&(n==="center"?b=!0:((w=h.decorations)==null?void 0:w.end)&&T?b=n==="left":b=n==="right",b&&(o&&l.add(h.id),l.add(u),T&&(l.add(T.toId),c.push(T.toId)))),(!T||l.has(T.toId))&&(!y||l.has(y.toId))&&p.delete(h)}))}return Array.from(l.values())}static getChildIndexAbove(e,t,n){let o=e.document.pages[n],i=o.shapes[t],a;if(i.parentId===o.id)a=Object.values(o.shapes).filter(c=>c.parentId===o.id).sort((c,p)=>c.childIndex-p.childIndex);else{let c=o.shapes[i.parentId];if(!c.children)throw Error("No children in parent!");a=c.children.map(p=>o.shapes[p]).sort((p,u)=>p.childIndex-u.childIndex)}let l=a.indexOf(i),r=a[l+1];return r?r.childIndex:i.childIndex+1}static getBeforeShape(e,t){return Object.fromEntries(Object.keys(t).map(n=>[n,e[n]]))}static mutateShapes(e,t,n,o){let i={},a={};t.forEach((r,c)=>{let p=re.getShape(e,r,o);if(p.isLocked)return;let u=n(p,c);u&&(i[r]=re.getBeforeShape(p,u),a[r]=u)});let l=Ct.Utils.deepMerge(e,{document:{pages:{[e.appState.currentPageId]:{shapes:a}}}});return{before:i,after:a,data:l}}static createShapes(e,t,n){let o={document:{pages:{[n]:{shapes:f({},Object.fromEntries(t.flatMap(a=>{let l=[[a.id,void 0]];if(a.parentId!==n){let r=re.getShape(e,a.parentId,n);if(!r.children)throw Error("No children in parent!");l.push([r.id,{children:r.children}])}return l})))}}}},i={document:{pages:{[n]:{shapes:{shapes:f({},Object.fromEntries(t.flatMap(a=>{let l=[[a.id,a]];if(a.parentId!==n){let r=re.getShape(e,a.parentId,n);if(!r.children)throw Error("No children in parent!");l.push([r.id,{children:[...r.children,a.id]}])}return l})))}}}}};return{before:o,after:i}}static deleteShapes(e,t,n){n=n||e.appState.currentPageId;let o=re.getPage(e,n),i=typeof t[0]=="string"?t:t.map(r=>r.id),a={document:{pages:{[n]:{shapes:f({},Object.fromEntries(i.flatMap(r=>{let c=o.shapes[r],p=[[c.id,c]];if(c.parentId!==n){let u=o.shapes[c.parentId];if(!u.children)throw Error("No children in parent!");p.push([u.id,{children:u.children}])}return p}))),bindings:f({},Object.fromEntries(Object.values(o.bindings).filter(r=>i.includes(r.fromId)||i.includes(r.toId)).map(r=>[r.id,r])))}}}},l={document:{pages:{[n]:{shapes:f({},Object.fromEntries(i.flatMap(r=>{let c=o.shapes[r],p=[[c.id,void 0]];if(c.parentId!==o.id){let u=o.shapes[c.parentId];if(!u.children)throw Error("No children in parent!");p.push([u.id,{children:u.children.filter(h=>h!==c.id)}])}return p})))}}}};return{before:a,after:l}}static onSessionComplete(e){var n,o;let t=(o=(n=re.getShapeUtil(e)).onSessionComplete)==null?void 0:o.call(n,e);return t?f(f({},e),t):e}static onChildrenChange(e,t,n){var i,a;if(!t.children)return;let o=(a=(i=re.getShapeUtil(t)).onChildrenChange)==null?void 0:a.call(i,t,t.children.map(l=>re.getShape(e,l,n)));return o?f(f({},t),o):t}static updateArrowBindings(e,t){var a,l,r,c,p,u;let n={start:ct(t.handles.start),end:ct(t.handles.end)},o={isBound:!1,handle:t.handles.start,point:de.Vec.add(t.handles.start.point,t.point)},i={isBound:!1,handle:t.handles.end,point:de.Vec.add(t.handles.end.point,t.point)};if(t.handles.start.bindingId){let h=((a=t.decorations)==null?void 0:a.start)!==void 0,m=t.handles.start,g=e.bindings[t.handles.start.bindingId];if(!g)throw Error("Could not find a binding to match the start handle's bindingId");let T=e.shapes[g.toId],y=re.getShapeUtil(T),b=y.getBounds(T),S=y.getExpandedBounds(T),w=h?Ct.Utils.expandBounds(b,g.distance):b,{minX:D,minY:E,width:x,height:B}=S,k=de.Vec.add([D,E],de.Vec.mulV([x,B],de.Vec.rotWith(g.point,[.5,.5],T.rotation||0)));o={isBound:!0,hasDecoration:h,binding:g,handle:m,point:k,util:y,target:T,bounds:b,expandedBounds:S,intersectBounds:w,center:y.getCenter(T)}}if(t.handles.end.bindingId){let h=((l=t.decorations)==null?void 0:l.end)!==void 0,m=t.handles.end,g=e.bindings[t.handles.end.bindingId];if(!g)throw Error("Could not find a binding to match the end handle's bindingId");let T=e.shapes[g.toId],y=re.getShapeUtil(T),b=y.getBounds(T),S=y.getExpandedBounds(T),w=h?Ct.Utils.expandBounds(b,g.distance):b,{minX:D,minY:E,width:x,height:B}=S,k=de.Vec.add([D,E],de.Vec.mulV([x,B],de.Vec.rotWith(g.point,[.5,.5],T.rotation||0)));i={isBound:!0,hasDecoration:h,binding:g,handle:m,point:k,util:y,target:T,bounds:b,expandedBounds:S,intersectBounds:w,center:y.getCenter(T)}}for(let h of["end","start"]){let m=h==="start"?o:i,g=h==="start"?i:o;if(m.isBound)if(!m.binding.distance)n[h].point=de.Vec.sub(m.point,t.point);else{let T=de.Vec.uni(de.Vec.sub(m.point,g.point));switch(m.target.type){case"ellipse":{let y=(0,On.intersectRayEllipse)(g.point,T,m.center,m.target.radius[0]+(m.hasDecoration?m.binding.distance:0),m.target.radius[1]+(m.hasDecoration?m.binding.distance:0),m.target.rotation||0).points.sort((b,S)=>de.Vec.dist(b,g.point)-de.Vec.dist(S,g.point));y[0]!==void 0&&(n[h].point=de.Vec.toFixed(de.Vec.sub(y[0],t.point)));break}case"triangle":{let y=m.target.point,b=Gt(m.target.size,m.hasDecoration?16:0,m.target.rotation).map(w=>de.Vec.add(w,y)),S=Ct.Utils.pointsToLineSegments(b,!0).map(([w,D])=>(0,On.intersectRayLineSegment)(g.point,T,w,D)).filter(w=>w.didIntersect).flatMap(w=>w.points).sort((w,D)=>de.Vec.dist(w,g.point)-de.Vec.dist(D,g.point));S[0]!==void 0&&(n[h].point=de.Vec.toFixed(de.Vec.sub(S[0],t.point)));break}default:{let y=(0,On.intersectRayBounds)(g.point,T,m.intersectBounds,m.target.rotation).filter(S=>S.didIntersect).map(S=>S.points[0]).sort((S,w)=>de.Vec.dist(S,g.point)-de.Vec.dist(w,g.point));if(!y[0])continue;let b;if(g.isBound&&(b=(0,On.intersectRayBounds)(g.point,T,g.intersectBounds,g.target.rotation).filter(w=>w.didIntersect).map(w=>w.points[0]).sort((w,D)=>de.Vec.dist(w,g.point)-de.Vec.dist(D,g.point))[0]),g.isBound&&(y.length<2||b&&y[0]&&Math.ceil(de.Vec.dist(y[0],b))<16*2.5||Ct.Utils.boundsContain(m.expandedBounds,g.expandedBounds)||Ct.Utils.boundsCollide(m.expandedBounds,g.expandedBounds))){let S=de.Vec.uni(de.Vec.sub(g.point,m.point)),w=(0,On.intersectRayBounds)(m.point,S,m.bounds,m.target.rotation).filter(D=>D.didIntersect).map(D=>D.points[0]);if(!w[0])continue;n[h].point=de.Vec.toFixed(de.Vec.sub(w[0],t.point)),n[h==="start"?"end":"start"].point=de.Vec.toFixed(de.Vec.add(de.Vec.sub(w[0],t.point),de.Vec.mul(S,Math.min(de.Vec.dist(w[0],g.point),16*2.5*(Ct.Utils.boundsContain(g.bounds,m.intersectBounds)?-1:1)))))}else if(!g.isBound&&(y[0]&&de.Vec.dist(y[0],g.point)<16*2.5||Ct.Utils.pointInBounds(g.point,m.intersectBounds))){let S=de.Vec.uni(de.Vec.sub(m.center,g.point));return(c=(r=re.getShapeUtil(t)).onHandleChange)==null?void 0:c.call(r,t,{[h]:C(f({},t.handles[h]),{point:de.Vec.toFixed(de.Vec.add(de.Vec.sub(g.point,t.point),de.Vec.mul(S,16*2.5)))})})}else y[0]&&(n[h].point=de.Vec.toFixed(de.Vec.sub(y[0],t.point)))}}}}return(u=(p=re.getShapeUtil(t)).onHandleChange)==null?void 0:u.call(p,t,n)}static transform(e,t,n){let o=re.getShapeUtil(e).transform(e,t,n);return o?f(f({},e),o):e}static transformSingle(e,t,n){let o=re.getShapeUtil(e).transformSingle(e,t,n);return o?f(f({},e),o):e}static getRotatedShapeMutation(e,t,n,o){var c,p;let i=de.Vec.sub(t,e.point),a=de.Vec.rotWith(t,n,o),l=de.Vec.toFixed(de.Vec.sub(a,i));if(e.handles!==void 0)return(p=(c=this.getShapeUtil(e)).onHandleChange)==null?void 0:p.call(c,C(f({},e),{point:l}),Object.fromEntries(Object.entries(e.handles).map(([h,m])=>{let g=de.Vec.toFixed(de.Vec.rotWith(m.point,i,o));return[h,C(f({},m),{point:g})]})));let r=Ct.Utils.clampRadians((e.rotation||0)+o);return{point:l,rotation:r}}static updateParents(e,t,n){let o=re.getPage(e,t);if(n.length===0)return;let{shapes:i}=re.getPage(e,t),a=Array.from(new Set(n.map(l=>i[l].parentId).values())).filter(l=>l!==o.id);for(let l of a){let r=i[l];if(!r.children)throw Error("A shape is parented to a shape without a children array.");re.onChildrenChange(e,r,t)}re.updateParents(e,t,a)}static getBinding(e,t,n){return re.getPage(e,n).bindings[t]}static getBindings(e,t){let n=re.getPage(e,t);return Object.values(n.bindings)}static getBindableShapeIds(e){return re.getShapes(e,e.appState.currentPageId).filter(t=>re.getShapeUtil(t).canBind).sort((t,n)=>n.childIndex-t.childIndex).map(t=>t.id)}static getBindingsWithShapeIds(e,t,n){return Array.from(new Set(re.getBindings(e,n).filter(o=>t.includes(o.toId)||t.includes(o.fromId))).values())}static getRelatedBindings(e,t,n){let o=new Set(t),i=re.getPage(e,n),a=Object.values(i.bindings),l=new Set(a.filter(p=>o.has(p.toId)||o.has(p.fromId))),r=l.size,c=-1;for(;c!==0;)l.forEach(p=>{let u=p.fromId;for(let h of a)h.fromId===u&&l.add(h),h.toId===u&&l.add(h)}),c=l.size-r,r=l.size;return Array.from(l.values())}static normalizeText(e){return e.replace(re.fixNewLines,`
`).split(`
`).map(t=>t||" ").join(`
`)}static assertShapeHasProperty(e,t){if(e[t]===void 0)throw new Error}static warn(e){Kd&&console.warn(e)}static error(e){Kd&&console.error(e)}static getSvgString(e,t=1){let n=e.cloneNode(!0);return e.setAttribute("width",+e.getAttribute("width")*t+""),e.setAttribute("height",+e.getAttribute("height")*t+""),new XMLSerializer().serializeToString(n).replaceAll("&#10;      ","").replaceAll(/((\s|")[0-9]*\.[0-9]{2})([0-9]*)(\b|"|\))/g,"$1")}static getSvgAsDataUrl(e,t=1){let n=re.getSvgString(e,t);return`data:image/svg+xml;base64,${window.btoa(unescape(n))}`}static getImageForSvg(o){return te(this,arguments,function*(e,t="png",n={}){let{scale:i=2,quality:a=1}=n,l=re.getSvgString(e,i),r=+e.getAttribute("width"),c=+e.getAttribute("height");if(!l)return;let p=yield new Promise(h=>{let m=new Image;m.crossOrigin="anonymous";let T=`data:image/svg+xml;base64,${window.btoa(unescape(encodeURIComponent(l)))}`;m.onload=()=>{let y=document.createElement("canvas"),b=y.getContext("2d");y.width=r,y.height=c,b.drawImage(m,0,0,r,c),URL.revokeObjectURL(T),h(y)},m.onerror=()=>{console.warn("Could not convert that SVG to an image.")},m.src=T});return yield new Promise(h=>p.toBlob(m=>h(m),"image/"+t,a))})}},I=re;d(I,"copyStringToClipboard",e=>{try{navigator.clipboard&&navigator.clipboard.write([new ClipboardItem({"text/plain":new Blob([e],{type:"text/plain"})})])}catch(t){let n=document.createElement("textarea");n.setAttribute("position","fixed"),n.setAttribute("top","0"),n.setAttribute("readonly","true"),n.setAttribute("contenteditable","true"),n.style.position="fixed",n.value=e,document.body.appendChild(n),n.focus(),n.select();try{let o=document.createRange();o.selectNodeContents(n);let i=window.getSelection();i&&(i.removeAllRanges(),i.addRange(o),n.setSelectionRange(0,n.value.length)),document.execCommand("copy")}catch(o){}finally{document.body.removeChild(n)}}}),d(I,"flattenShape",(e,t)=>{var n;return[t,...((n=t.children)!=null?n:[]).map(o=>re.getShape(e,o,e.appState.currentPageId)).sort((o,i)=>o.childIndex-i.childIndex).flatMap(o=>re.flattenShape(e,o))]}),d(I,"flattenPage",(e,t)=>Object.values(e.document.pages[t].shapes).sort((n,o)=>n.childIndex-o.childIndex).reduce((n,o)=>[...n,...re.flattenShape(e,o)],[])),d(I,"getTopChildIndex",(e,t)=>{let n=re.getShapes(e,t);return n.length===0?1:n.filter(o=>o.parentId===t).sort((o,i)=>i.childIndex-o.childIndex)[0].childIndex+1}),d(I,"fixNewLines",/\r?\n|\r/g);var lr=require("@tldraw/vec"),Wd=require("@tldraw/core");function _d(s,e,t){let{currentPageId:n}=s,o=e.map(h=>s.getShape(h)),i=o.map(h=>({id:h.id,point:[...h.point],bounds:I.getBounds(h)})),a=Wd.Utils.getCommonBounds(i.map(({bounds:h})=>h)),l=a.minX+a.width/2,r=a.minY+a.height/2,c=Object.fromEntries(i.map(({id:h,point:m,bounds:g})=>[h,{prev:m,next:{["top"]:[m[0],a.minY],["centerVertical"]:[m[0],r-g.height/2],["bottom"]:[m[0],a.maxY-g.height],["left"]:[a.minX,m[1]],["centerHorizontal"]:[l-g.width/2,m[1]],["right"]:[a.maxX-g.width,m[1]]}[t]}])),{before:p,after:u}=I.mutateShapes(s.state,e,h=>c[h.id]?{point:c[h.id].next}:h,n);return o.forEach(h=>{if(h.type==="group"){let m=lr.Vec.sub(u[h.id].point,p[h.id].point);h.children.forEach(g=>{let T=s.getShape(g);p[T.id]={point:T.point},u[T.id]={point:lr.Vec.add(T.point,m)}}),delete p[h.id],delete u[h.id]}}),{id:"align",before:{document:{pages:{[n]:{shapes:p}},pageStates:{[n]:{selectedIds:e}}}},after:{document:{pages:{[n]:{shapes:u}},pageStates:{[n]:{selectedIds:e}}}}}}function Yd(s,e){return{id:"change_page",before:{appState:{currentPageId:s.currentPageId}},after:{appState:{currentPageId:e}}}}var Xd=require("@tldraw/core");function Zd(s,e){var o;let t=s,n=new Set(e);for(;n.has(t);)t=((o=/^.*(\d+)$/.exec(t))==null?void 0:o[1])?t.replace(/(\d+)(?=\D?)$/,i=>(+i+1).toString()):`${t} 1`;return t}function qd(s,e,t=Xd.Utils.uniqueId(),n="Page"){let{currentPageId:o}=s,i=Object.values(s.state.document.pages).sort((p,u)=>{var h,m;return((h=p.childIndex)!=null?h:0)-((m=u.childIndex)!=null?m:0)}),a=i[i.length-1],l=(a==null?void 0:a.childIndex)?(a==null?void 0:a.childIndex)+1:1,r={id:t,name:Zd(n,i.map(p=>{var u;return(u=p.name)!=null?u:""})),childIndex:l,shapes:{},bindings:{}},c={id:t,selectedIds:[],camera:{point:e,zoom:1},editingId:void 0,bindingId:void 0,hoveredId:void 0,pointedId:void 0};return{id:"create_page",before:{appState:{currentPageId:o},document:{pages:{[t]:void 0},pageStates:{[t]:void 0}}},after:{appState:{currentPageId:r.id},document:{pages:{[t]:r},pageStates:{[t]:c}}}}}function cr(s,e,t=[]){let{currentPageId:n}=s,o={},i={};e.forEach(r=>{o[r.id]=void 0,i[r.id]=r});let a={},l={};return t.forEach(r=>{a[r.id]=void 0,l[r.id]=r}),{id:"create",before:{document:{pages:{[n]:{shapes:o,bindings:a}},pageStates:{[n]:{selectedIds:[...s.selectedIds]}}}},after:{document:{pages:{[n]:{shapes:i,bindings:l}},pageStates:{[n]:{selectedIds:e.map(r=>r.id)}}}}}}function Jd(s,e){let{currentPageId:t,document:{pages:n,pageStates:o}}=s,i=Object.values(n).sort((r,c)=>(r.childIndex||0)-(c.childIndex||0)),a=i.findIndex(r=>r.id===e),l;return e===t?a===i.length-1?l=i[i.length-2].id:l=i[a+1].id:l=t,{id:"delete_page",before:{appState:{currentPageId:e},document:{pages:{[e]:f({},n[e])},pageStates:{[e]:f({},o[e])}}},after:{appState:{currentPageId:l},document:{pages:{[e]:void 0},pageStates:{[e]:void 0}}}}}function Qd(s,e,t){let n={shapes:{},bindings:{}},o={shapes:{},bindings:{}},i=[],a=new Set,l=new Set;e.filter(c=>!I.getShape(s,c,t).isLocked).forEach(c=>{a.add(c);let p=I.getShape(s,c,t);n.shapes[c]=p,o.shapes[c]=void 0,p.children!==void 0&&p.children.forEach(u=>{a.add(u);let h=I.getShape(s,u,t);n.shapes[u]=h,o.shapes[u]=void 0}),p.parentId!==t&&i.push(I.getShape(s,p.parentId,t)),p.assetId&&l.add(p.assetId)}),i.forEach(c=>{var p;e.includes(c.id)||(a.add(c.id),n.shapes[c.id]={children:c.children},o.shapes[c.id]={children:c.children.filter(u=>!e.includes(u))},((p=o.shapes[c.id])==null?void 0:p.children.length)===0&&(o.shapes[c.id]=void 0,n.shapes[c.id]=I.getShape(s,c.id,t)))});let r=I.getPage(s,t);return Object.values(r.bindings).filter(c=>a.has(c.fromId)||a.has(c.toId)).forEach(c=>{for(let p of[c.toId,c.fromId])if(o.shapes[p]===void 0){n.bindings[c.id]=c,o.bindings[c.id]=void 0;let u=r.shapes[p];u&&u.handles&&Object.values(u.handles).filter(h=>h.bindingId===c.id).forEach(h=>{var m,g,T,y,b,S;n.shapes[p]=C(f({},n.shapes[p]),{handles:C(f({},(m=n.shapes[p])==null?void 0:m.handles),{[h.id]:C(f({},(T=(g=n.shapes[p])==null?void 0:g.handles)==null?void 0:T[h.id]),{bindingId:c.id})})}),a.has(p)||(o.shapes[p]=C(f({},o.shapes[p]),{handles:C(f({},(y=o.shapes[p])==null?void 0:y.handles),{[h.id]:C(f({},(S=(b=o.shapes[p])==null?void 0:b.handles)==null?void 0:S[h.id]),{bindingId:void 0})})}))})}}),Object.values(s.document.pages).flatMap(c=>Object.values(c.shapes)).forEach(c=>{"assetId"in c&&c.assetId&&!a.has(c.id)&&l.delete(c.assetId)}),{before:n,after:o,assetsToRemove:Array.from(l)}}var Tu=(s,e)=>{let t=f({},s);return e.forEach(n=>t[n]=void 0),t};function pr(s,e,t=s.currentPageId){let{pageState:n,selectedIds:o,document:{assets:i}}=s,{before:a,after:l,assetsToRemove:r}=Qd(s.state,e,t),c=Tu(i,r);return{id:"delete",before:{document:{assets:i,pages:{[t]:a},pageStates:{[t]:{selectedIds:[...s.selectedIds]}}}},after:{document:{assets:c,pages:{[t]:l},pageStates:{[t]:{selectedIds:o.filter(p=>!e.includes(p)),hoveredId:n.hoveredId&&e.includes(n.hoveredId)?void 0:n.hoveredId}}}}}}var el=require("@tldraw/core");var ur=M(require("@tldraw/vec"));function tl(s,e,t){let{currentPageId:n}=s,o=e.map(r=>s.getShape(r)),i=Object.fromEntries(bu(o,t).map(r=>[r.id,r])),{before:a,after:l}=I.mutateShapes(s.state,e.filter(r=>i[r]!==void 0),r=>({point:i[r.id].next}),n);return o.forEach(r=>{if(r.type==="group"){let c=ur.default.sub(l[r.id].point,a[r.id].point);r.children.forEach(p=>{let u=s.getShape(p);a[u.id]={point:u.point},l[u.id]={point:ur.default.add(u.point,c)}}),delete a[r.id],delete l[r.id]}}),{id:"distribute",before:{document:{pages:{[n]:{shapes:a}},pageStates:{[n]:{selectedIds:e}}}},after:{document:{pages:{[n]:{shapes:l}},pageStates:{[n]:{selectedIds:e}}}}}}function bu(s,e){let t=s.map(a=>{let l=I.getShapeUtil(a);return{id:a.id,point:[...a.point],bounds:l.getBounds(a),center:l.getCenter(a)}}),n=t.length,o=el.Utils.getCommonBounds(t.map(({bounds:a})=>a)),i=[];switch(e){case"horizontal":{let a=t.reduce((l,r)=>l+r.bounds.width,0);if(a>o.width){let l=t.sort((h,m)=>h.bounds.minX-m.bounds.minX)[0],r=t.sort((h,m)=>m.bounds.maxX-h.bounds.maxX)[0],c=t.filter(h=>h!==l&&h!==r).sort((h,m)=>h.center[0]-m.center[0]),p=(r.center[0]-l.center[0])/(n-1),u=l.center[0]+p;c.forEach(({id:h,point:m,bounds:g},T)=>{i.push({id:h,prev:m,next:[u+p*T-g.width/2,g.minY]})})}else{let l=t.sort((p,u)=>p.center[0]-u.center[0]),r=o.minX,c=(o.width-a)/(n-1);l.forEach(({id:p,point:u,bounds:h})=>{i.push({id:p,prev:u,next:[r,h.minY]}),r+=h.width+c})}break}case"vertical":{let a=t.reduce((l,r)=>l+r.bounds.height,0);if(a>o.height){let l=t.sort((h,m)=>h.bounds.minY-m.bounds.minY)[0],r=t.sort((h,m)=>m.bounds.maxY-h.bounds.maxY)[0],c=t.filter(h=>h!==l&&h!==r).sort((h,m)=>h.center[1]-m.center[1]),p=(r.center[1]-l.center[1])/(n-1),u=l.center[1]+p;c.forEach(({id:h,point:m,bounds:g},T)=>{i.push({id:h,prev:m,next:[g.minX,u+p*T-g.height/2]})})}else{let l=t.sort((p,u)=>p.center[1]-u.center[1]),r=o.minY,c=(o.height-a)/(n-1);l.forEach(({id:p,point:u,bounds:h})=>{i.push({id:p,prev:u,next:[h.minX,r]}),r+=h.height+c})}break}}return i}var nl=require("@tldraw/core");function ol(s,e){let t=nl.Utils.uniqueId(),{currentPageId:n,page:o,pageState:{camera:i}}=s,a=C(f({},o),{id:t,name:o.name+" Copy",shapes:Object.fromEntries(Object.entries(o.shapes).map(([l,r])=>[l,C(f({},r),{parentId:r.parentId===e?t:r.parentId})]))});return{id:"duplicate_page",before:{appState:{currentPageId:n},document:{pages:{[t]:void 0},pageStates:{[t]:void 0}}},after:{appState:{currentPageId:t},document:{pages:{[t]:a},pageStates:{[t]:C(f({},o),{id:t,selectedIds:[],camera:f({},i),editingId:void 0,bindingId:void 0,hoveredId:void 0,pointedId:void 0})}}}}}var vn=require("@tldraw/core"),ti=require("@tldraw/vec");function sl(s,e,t){let{selectedIds:n,currentPageId:o,page:i,shapes:a}=s,l={shapes:{},bindings:{}},r={shapes:{},bindings:{}},c={},p=e.map(m=>s.getShape(m)).filter(m=>!e.includes(m.parentId));p.forEach(m=>{let g=vn.Utils.uniqueId();if(l.shapes[g]=void 0,r.shapes[g]=C(f({},vn.Utils.deepClone(m)),{id:g,childIndex:I.getChildIndexAbove(s.state,m.id,o)}),m.children&&(r.shapes[g].children=[]),m.parentId!==o){let T=s.getShape(m.parentId);l.shapes[T.id]=C(f({},l.shapes[T.id]),{children:T.children}),r.shapes[T.id]=C(f({},r.shapes[T.id]),{children:[...(r.shapes[T.id]||T).children,g]})}c[m.id]=g}),p.forEach(m=>{m.children&&m.children.forEach(g=>{var S,w;let T=s.getShape(g),y=vn.Utils.uniqueId(),b=c[m.id];l.shapes[y]=void 0,r.shapes[y]=C(f({},vn.Utils.deepClone(T)),{id:y,parentId:b,childIndex:I.getChildIndexAbove(s.state,T.id,o)}),c[g]=y,(w=(S=r.shapes[c[m.id]])==null?void 0:S.children)==null||w.push(y)})});let u=new Set(Object.keys(c));Object.values(i.bindings).filter(m=>u.has(m.fromId)||u.has(m.toId)).forEach(m=>{if(u.has(m.fromId))if(u.has(m.toId)){let g=vn.Utils.uniqueId(),T=C(f({},vn.Utils.deepClone(m)),{id:g,fromId:c[m.fromId],toId:c[m.toId]});l.bindings[g]=void 0,r.bindings[g]=T;let y=r.shapes[T.fromId];Object.values(y.handles).forEach(b=>{b.bindingId===m.id&&(b.bindingId=g)})}else{let g=r.shapes[c[m.fromId]];Object.values(g.handles).forEach(T=>{T.bindingId===m.id&&(T.bindingId=void 0)})}});let h=Object.values(r.shapes);if(t){let m=vn.Utils.getCommonBounds(h.map(T=>I.getBounds(T))),g=vn.Utils.getBoundsCenter(m);h.forEach(T=>{!T.point||(T.point=ti.Vec.sub(t,ti.Vec.sub(g,T.point)))})}else{let m=[16,16];h.forEach(g=>{!g.point||(g.point=ti.Vec.add(g.point,m))})}return h.forEach(m=>{m.isLocked&&(m.isLocked=!1)}),{id:"duplicate",before:{document:{pages:{[o]:l},pageStates:{[o]:{selectedIds:n}}}},after:{document:{pages:{[o]:r},pageStates:{[o]:{selectedIds:Array.from(u.values()).map(m=>c[m])}}}}}}var eo=require("@tldraw/core");function hr(s,e,t){let{selectedIds:n,currentPageId:o,shapes:i}=s,a=i.map(p=>I.getBounds(p)),l=eo.Utils.getCommonBounds(a),{before:r,after:c}=I.mutateShapes(s.state,e,p=>{let u=I.getBounds(p);switch(t){case"horizontal":{let h=eo.Utils.getRelativeTransformedBoundingBox(l,l,u,!0,!1);return I.getShapeUtil(p).transform(p,h,{type:eo.TLBoundsCorner.TopLeft,scaleX:-1,scaleY:1,initialShape:p,transformOrigin:[.5,.5]})}case"vertical":{let h=eo.Utils.getRelativeTransformedBoundingBox(l,l,u,!1,!0);return I.getShapeUtil(p).transform(p,h,{type:eo.TLBoundsCorner.TopLeft,scaleX:1,scaleY:-1,initialShape:p,transformOrigin:[.5,.5]})}}},o);return{id:"flip",before:{document:{pages:{[o]:{shapes:r}},pageStates:{[o]:{selectedIds:n}}}},after:{document:{pages:{[o]:{shapes:c}},pageStates:{[o]:{selectedIds:e}}}}}}var il=require("@tldraw/core");function rl(s,e,t,n){var D,E;if(e.length<2)return;let o={},i={},a={},l={},r=[...e],c=[],p=[],u=[];for(let x of e){let B=s.getShape(x);if(!B.isLocked)if(B.children===void 0)c.push(B);else{let k=B.children.filter(ee=>!s.getShape(ee).isLocked);u.push(B),r.push(...k),c.push(...k.map(ee=>s.getShape(ee)).filter(Boolean))}}if(c.every(x=>x.parentId===c[0].parentId)&&c[0].parentId!==n&&((D=s.getShape(c[0].parentId).children)==null?void 0:D.length)===r.length)return;let h=I.flattenPage(s.state,n),m=Object.fromEntries(c.map(x=>[x.id,h.indexOf(x)])),g=c.sort((x,B)=>m[x.id]-m[B.id]),T=n,y=(g.filter(x=>x.parentId===n)[0]||g[0]).childIndex,b=il.Utils.getCommonBounds(c.map(x=>I.getBounds(x)));for(o[t]=void 0,i[t]=I.getShapeUtil("group").create({id:t,childIndex:y,parentId:T,point:[b.minX,b.minY],size:[b.width,b.height],children:g.map(x=>x.id)}),g.forEach((x,B)=>{if(x.parentId!==n){let k=s.getShape(x.parentId);u.push(k)}o[x.id]=C(f({},o[x.id]),{parentId:x.parentId,childIndex:x.childIndex}),i[x.id]=C(f({},i[x.id]),{parentId:t,childIndex:B+1})});u.length>0;){let x=u.pop();if(!x)break;let B=(((E=o[x.id])==null?void 0:E.children)||x.children).filter(k=>k&&!(r.includes(k)||p.includes(k)));B.length===0?(o[x.id]=x,i[x.id]=void 0,x.parentId!==n&&(p.push(x.id),u.push(s.getShape(x.parentId)))):(o[x.id]=C(f({},o[x.id]),{children:x.children}),i[x.id]=C(f({},i[x.id]),{children:B}))}let{bindings:S}=s,w=new Set(p);return S.forEach(x=>{for(let B of[x.toId,x.fromId])if(w.has(B)){a[x.id]=x,l[x.id]=void 0;let k=s.getShape(B);k.handles&&Object.values(k.handles).filter(ee=>ee.bindingId===x.id).forEach(ee=>{var oe,ne;o[B]=C(f({},o[B]),{handles:C(f({},(oe=o[B])==null?void 0:oe.handles),{[ee.id]:{bindingId:x.id}})}),p.includes(B)||(i[B]=C(f({},i[B]),{handles:C(f({},(ne=i[B])==null?void 0:ne.handles),{[ee.id]:{bindingId:void 0}})}))})}}),{id:"group",before:{document:{pages:{[n]:{shapes:o,bindings:a}},pageStates:{[n]:{selectedIds:e}}}},after:{document:{pages:{[n]:{shapes:i,bindings:a}},pageStates:{[n]:{selectedIds:[t]}}}}}}var al=require("@tldraw/core"),mr=require("@tldraw/vec");function dl(s,e,t,n,o){let{page:i}=s,a={before:{shapes:{},bindings:{}},after:{shapes:{},bindings:{}}},l={before:{shapes:{},bindings:{}},after:{shapes:{},bindings:{}}},r=new Set,c=new Set;e.map(S=>s.getShape(S,n)).filter(S=>!S.isLocked).forEach(S=>{r.add(S.id),c.add(S),S.children!==void 0&&S.children.forEach(w=>{r.add(w),c.add(s.getShape(w,n))})});let p=I.getTopChildIndex(s.state,o),u=Array.from(c.values());u.forEach((S,w)=>{if(a.before.shapes[S.id]=S,a.after.shapes[S.id]=void 0,l.before.shapes[S.id]=void 0,l.after.shapes[S.id]=S,!r.has(S.parentId)&&(l.after.shapes[S.id]=C(f({},S),{parentId:o,childIndex:p+w}),S.parentId!==n)){let D=s.getShape(S.parentId,n);a.before.shapes[D.id]={children:D.children},a.after.shapes[D.id]={children:D.children.filter(E=>E!==S.id)}}}),Object.values(i.bindings).filter(S=>r.has(S.fromId)||r.has(S.toId)).forEach(S=>{a.before.bindings[S.id]=S,a.after.bindings[S.id]=void 0;let w=s.getShape(S.fromId,n);if(r.has(S.fromId)&&r.has(S.toId))l.before.bindings[S.id]=void 0,l.after.bindings[S.id]=S;else if(r.has(S.fromId)){let E=s.getShape(S.fromId,n),B=Object.values(w.handles).find(ee=>ee.bindingId===S.id).id,k=l.after.shapes[E.id];k.handles=C(f({},k.handles),{[B]:C(f({},k.handles[B]),{bindingId:void 0})})}else{let E=s.getShape(S.fromId,n),x=Object.values(w.handles).find(B=>B.bindingId===S.id);a.before.shapes[E.id]={handles:{[x.id]:{bindingId:S.id}}},a.after.shapes[E.id]={handles:{[x.id]:{bindingId:void 0}}}}});let h=s.state.document.pageStates[o],m=al.Utils.getCommonBounds(u.map(S=>I.getBounds(S))),g=I.getCameraZoom(t.width<t.height?(t.width-128)/m.width:(t.height-128)/m.height),T=(t.width-m.width*g)/2/g,y=(t.height-m.height*g)/2/g,b=mr.Vec.toFixed(mr.Vec.add([-m.minX,-m.minY],[T,y]));return{id:"move_to_page",before:{appState:{currentPageId:n},document:{pages:{[n]:a.before,[o]:l.before},pageStates:{[n]:{selectedIds:e},[o]:{selectedIds:h.selectedIds,camera:h.camera}}}},after:{appState:{currentPageId:o},document:{pages:{[n]:a.after,[o]:l.after},pageStates:{[n]:{selectedIds:[]},[o]:{selectedIds:e,camera:{zoom:g,point:b}}}}}}}function ll(s,e,t){let{pages:n}=s.document,o=n[e],i=Object.values(n).sort((r,c)=>{var p,u;return((p=r.childIndex)!=null?p:0)-((u=c.childIndex)!=null?u:0)}),a=i.indexOf(o),l=[...i];return l.splice(a,1),l.splice(t>a?t-1:t,0,o),{id:"move_page",before:{document:{pages:Object.fromEntries(i.map(r=>[r.id,{childIndex:r.childIndex}]))}},after:{document:{pages:Object.fromEntries(l.map((r,c)=>[r.id,{childIndex:c}]))}}}}function Qo(s,e,t){let{currentPageId:n,page:o}=s,i=new Set(e.map(p=>s.getShape(p).parentId)),a={before:{},after:{}},l,r,c;return Array.from(i.values()).forEach(p=>{let u=[];if(p===o.id)u=Object.values(o.shapes).sort((g,T)=>g.childIndex-T.childIndex);else{let g=s.getShape(p);if(!g.children)throw Error("No children in parent!");u=g.children.map(T=>s.getShape(T)).sort((T,y)=>T.childIndex-y.childIndex)}let h=u.map(g=>g.id),m=e.filter(g=>h.includes(g)).map(g=>h.indexOf(g)).sort((g,T)=>g-T);if(m.length!==h.length)switch(t){case"toBack":{for(let g=0;g<h.length;g++)if(!m.includes(g)){l=g;break}r=u[l].childIndex,c=r/(m.length+1),a=I.mutateShapes(s.state,m.map(g=>u[g].id).reverse(),(g,T)=>({childIndex:r-(T+1)*c}),n);break}case"toFront":{for(let g=h.length-1;g>=0;g--)if(!m.includes(g)){l=g;break}r=u[l].childIndex,c=1,a=I.mutateShapes(s.state,m.map(g=>u[g].id),(g,T)=>({childIndex:r+(T+1)}),n);break}case"backward":{let g={};for(let T=h.length-1;T>=0;T--)if(m.includes(T)){for(let y=T;y>=0;y--)if(!m.includes(y)){let b=u[y].childIndex,S,w;y===0?(S=b/2,w=b/2/(T-y+1)):(S=u[y-1].childIndex,w=(b-S)/(T-y+1),S+=w);for(let D=0;D<T-y;D++)g[u[y+D+1].id]=S+w*D;break}}Object.values(g).length>0&&(a=I.mutateShapes(s.state,m.map(T=>u[T].id),T=>({childIndex:g[T.id]}),n));break}case"forward":{let g={};for(let T=0;T<h.length;T++)if(m.includes(T)){for(let y=T;y<h.length;y++)if(!m.includes(y)){r=u[y].childIndex;let b=y===h.length-1?1:(u[y+1].childIndex-r)/(y-T+1);for(let S=0;S<y-T;S++)g[u[T+S].id]=r+b*(S+1);break}}Object.values(g).length>0&&(a=I.mutateShapes(s.state,m.map(T=>u[T].id),T=>({childIndex:g[T.id]}),n));break}}}),{id:"move",before:{document:{pages:{[n]:{shapes:a.before}},pageStates:{[n]:{selectedIds:e}}}},after:{document:{pages:{[n]:{shapes:a.after}},pageStates:{[n]:{selectedIds:e}}}}}}function cl(s,e,t){let{page:n}=s;return{id:"rename_page",before:{document:{pages:{[e]:{name:n.name}}}},after:{document:{pages:{[e]:{name:t}}}}}}function gr(s,e,t){let{currentPageId:n}=s,{before:o,after:i}=I.mutateShapes(s.state,e,a=>{var l,r;return(r=(l=s.getShapeUtil(a)).onDoubleClickBoundsHandle)==null?void 0:r.call(l,a)},t);return{id:"reset_bounds",before:{document:{pages:{[n]:{shapes:o}},pageStates:{[n]:{selectedIds:e}}}},after:{document:{pages:{[n]:{shapes:i}},pageStates:{[n]:{selectedIds:e}}}}}}var fr=require("@tldraw/core");var yu=Math.PI*2;function pl(s,e,t=-yu/4){let{currentPageId:n}=s,o={},i={},a=e.flatMap(r=>{let c=s.getShape(r);return c.children?c.children.map(p=>s.getShape(p)):c}).filter(r=>!r.isLocked),l=fr.Utils.getBoundsCenter(fr.Utils.getCommonBounds(a.map(r=>I.getBounds(r))));return a.forEach(r=>{let c=I.getRotatedShapeMutation(r,I.getCenter(r),l,t);!c||(o[r.id]=I.getBeforeShape(r,c),i[r.id]=c)}),{id:"rotate",before:{document:{pages:{[n]:{shapes:o}},pageStates:{[n]:{selectedIds:e}}}},after:{document:{pages:{[n]:{shapes:i}},pageStates:{[n]:{selectedIds:e}}}}}}var es=require("@tldraw/core");function ul(s,e,t){let{currentPageId:n,selectedIds:o}=s,i=e.map(u=>s.getShape(u)),a=i.map(u=>I.getBounds(u)),l=es.Utils.getCommonBounds(a),r=e.flatMap(u=>{let h=s.getShape(u);return h.children?h.children:h.id}).filter(u=>!s.getShape(u).isLocked),{before:c,after:p}=I.mutateShapes(s.state,r,u=>{let h=I.getBounds(u);switch(t){case"horizontal":{let m=C(f({},h),{minX:l.minX,maxX:l.maxX,width:l.width});return I.getShapeUtil(u).transformSingle(u,m,{type:es.TLBoundsCorner.TopLeft,scaleX:m.width/h.width,scaleY:1,initialShape:u,transformOrigin:[.5,.5]})}case"vertical":{let m=C(f({},h),{minY:l.minY,maxY:l.maxY,height:l.height});return I.getShapeUtil(u).transformSingle(u,m,{type:es.TLBoundsCorner.TopLeft,scaleX:1,scaleY:m.height/h.height,initialShape:u,transformOrigin:[.5,.5]})}}},n);return i.forEach(u=>{u.type==="group"&&(delete c[u.id],delete p[u.id])}),{id:"stretch",before:{document:{pages:{[n]:{shapes:c}},pageStates:{[n]:{selectedIds:o}}}},after:{document:{pages:{[n]:{shapes:p}},pageStates:{[n]:{selectedIds:e}}}}}}var ni=require("@tldraw/vec");function hl(s,e,t){let{currentPageId:n,selectedIds:o}=s,i=e.flatMap(r=>I.getDocumentBranch(s.state,r,n)).filter(r=>!s.getShape(r).isLocked),a={},l={};return i.map(r=>s.getShape(r)).filter(r=>!r.isLocked).forEach(r=>{a[r.id]={style:f({},Object.fromEntries(Object.keys(t).map(c=>[c,r.style[c]])))},l[r.id]={style:t},r.type==="text"&&(a[r.id].point=r.point,l[r.id].point=ni.Vec.toFixed(ni.Vec.add(r.point,ni.Vec.sub(s.getShapeUtil(r).getCenter(r),s.getShapeUtil(r).getCenter(C(f({},r),{style:f(f({},r.style),t)}))))))}),{id:"style",before:{document:{pages:{[n]:{shapes:a}},pageStates:{[n]:{selectedIds:o}}},appState:{currentStyle:f({},s.appState.currentStyle)}},after:{document:{pages:{[n]:{shapes:l}},pageStates:{[n]:{selectedIds:e}}},appState:{currentStyle:t}}}}function ml(s,e,t){let{currentPageId:n,selectedIds:o}=s,i=Object.fromEntries(e.map(l=>{var r;return[l,{decorations:{[t]:(r=s.getShape(l).decorations)==null?void 0:r[t]}}]})),a=Object.fromEntries(e.filter(l=>!s.getShape(l).isLocked).map(l=>{var r;return[l,{decorations:{[t]:((r=s.getShape(l).decorations)==null?void 0:r[t])?void 0:"arrow"}}]}));return{id:"toggle_decorations",before:{document:{pages:{[n]:{shapes:i}},pageStates:{[n]:{selectedIds:o}}}},after:{document:{pages:{[n]:{shapes:a}},pageStates:{[n]:{selectedIds:e}}}}}}function oi(s,e,t){let{currentPageId:n}=s,o=e.map(r=>s.getShape(r)).filter(r=>t==="isLocked"?!0:!r.isLocked),i=o.every(r=>r[t]),a={},l={};return o.forEach(r=>{a[r.id]={[t]:r[t]},l[r.id]={[t]:!i}}),{id:"toggle",before:{document:{pages:{[n]:{shapes:a}},pageStates:{[n]:{selectedIds:e}}}},after:{document:{pages:{[n]:{shapes:l}},pageStates:{[n]:{selectedIds:e}}}}}}var Sr=require("@tldraw/vec");function gl(s,e,t){let{currentPageId:n,selectedIds:o}=s;s.rotationInfo.selectedIds=[...o];let i={shapes:{},bindings:{}},a={shapes:{},bindings:{}},l=e.flatMap(p=>{let u=s.getShape(p);return u.children?u.children:u.id}).filter(p=>!s.getShape(p).isLocked),r=I.mutateShapes(s.state,l,p=>({point:Sr.Vec.toFixed(Sr.Vec.add(p.point,t))}),n);return i.shapes=r.before,a.shapes=r.after,I.getBindings(s.state,n).filter(p=>e.includes(p.fromId)&&!e.includes(p.toId)).forEach(p=>{i.bindings[p.id]=p,a.bindings[p.id]=void 0;for(let u of[p.toId,p.fromId]){let h=s.getShape(u);!h.handles||Object.values(h.handles).filter(m=>m.bindingId===p.id).forEach(m=>{var g,T;i.shapes[u]=C(f({},i.shapes[u]),{handles:C(f({},(g=i.shapes[u])==null?void 0:g.handles),{[m.id]:{bindingId:p.id}})}),a.shapes[u]=C(f({},a.shapes[u]),{handles:C(f({},(T=a.shapes[u])==null?void 0:T.handles),{[m.id]:{bindingId:void 0}})})})}}),{id:"translate",before:{document:{pages:{[n]:i},pageStates:{[n]:{selectedIds:e}}}},after:{document:{pages:{[n]:a},pageStates:{[n]:{selectedIds:e}}}}}}function fl(s,e,t,n){let{bindings:o}=s,i={},a={},l={},r={},c=e,p=e.filter(u=>!t.find(h=>h.id===u));return t.filter(u=>!u.isLocked).forEach(u=>{let h=[],m=[];i[u.id]=u,a[u.id]=void 0,u.children.forEach(S=>{p.push(S);let w=s.getShape(S,n);h.push(w)});let g=u.childIndex,y=(I.getChildIndexAbove(s.state,u.id,n)-g)/h.length;h.sort((S,w)=>S.childIndex-w.childIndex).forEach((S,w)=>{i[S.id]={parentId:S.parentId,childIndex:S.childIndex},a[S.id]={parentId:n,childIndex:g+y*w}}),o.filter(S=>S.toId===u.id||S.fromId===u.id).forEach(S=>{for(let w of[S.toId,S.fromId])if(a[w]===void 0){l[S.id]=S,r[S.id]=void 0;let D=s.getShape(w,n);D.handles&&Object.values(D.handles).filter(E=>E.bindingId===S.id).forEach(E=>{var x,B;i[w]=C(f({},i[w]),{handles:C(f({},(x=i[w])==null?void 0:x.handles),{[E.id]:{bindingId:S.id}})}),m.includes(w)||(a[w]=C(f({},a[w]),{handles:C(f({},(B=a[w])==null?void 0:B.handles),{[E.id]:{bindingId:void 0}})}))})}})}),{id:"ungroup",before:{document:{pages:{[n]:{shapes:i,bindings:l}},pageStates:{[n]:{selectedIds:c}}}},after:{document:{pages:{[n]:{shapes:a,bindings:l}},pageStates:{[n]:{selectedIds:p}}}}}}function Tr(s,e,t){let n=e.map(i=>i.id),o=I.mutateShapes(s.state,n.filter(i=>!s.getShape(i,t).isLocked),(i,a)=>e[a],t);return{id:"update",before:{document:{pages:{[t]:{shapes:o.before}}}},after:{document:{pages:{[t]:{shapes:o.after}}}}}}function Sl(s,e,t){let{currentPageId:n,selectedIds:o}=s,i=e.map(c=>s.getShape(c)).filter(c=>t.isLocked?!0:!c.isLocked),a={},l={},r=Object.keys(t);return i.forEach(c=>{a[c.id]=Object.fromEntries(r.map(p=>[p,c[p]])),l[c.id]=t}),{id:"set_props",before:{document:{pages:{[n]:{shapes:a}},pageStates:{[n]:{selectedIds:o}}}},after:{document:{pages:{[n]:{shapes:l}},pageStates:{[n]:{selectedIds:o}}}}}}var Mt=require("@tldraw/core"),to=require("@tldraw/vec");function Tl(s,e,t={}){let{currentPageId:n}=s,{point:o,select:i,overwrite:a}=t,l=s.document.pages[n],r={shapes:{},bindings:{}},c={},p={shapes:{},bindings:{}};if(a){for(let h of e.shapes)r.shapes[h.id]=l.shapes[h.id],p.shapes[h.id]=h;if(e.bindings)for(let h of e.bindings)r.bindings[h.id]=l.bindings[h.id],p.bindings[h.id]=h;if(e.assets)for(let h of e.assets)c[h.id]=h}else{let h={},m=I.getTopChildIndex(s.state,n),g=e.shapes.sort((b,S)=>b.childIndex-S.childIndex).map(b=>{let S=Mt.Utils.uniqueId();return h[b.id]=S,C(f({},Mt.Utils.deepClone(b)),{id:S})}),T=new Set;for(;g.length>0;){let b=g.shift();if(!b)break;if(T.add(b.id),b.parentId==="currentPageId")b.parentId=n,b.childIndex=m++;else{b.parentId=h[b.parentId];let S=p.shapes[b.parentId];if(!S){T.has(b.id)&&(b.parentId="currentPageId"),g.push(b);continue}S.children.push(b.id)}b.children&&(b.children=[]),r.shapes[b.id]=void 0,p.shapes[b.id]=b}Object.values(p.shapes).forEach(b=>{b.children&&b.children.length===0&&(delete r.shapes[b.id],delete p.shapes[b.id])}),e.bindings&&e.bindings.forEach(b=>{let S=Mt.Utils.uniqueId();h[b.id]=S;let w=h[b.toId],D=h[b.fromId];if(!w||!D){if(D){let k=p.shapes[D].handles;k&&Object.values(k).forEach(ee=>{ee.bindingId===b.id&&(ee.bindingId=void 0)})}if(w){let k=p.shapes[w].handles;k&&Object.values(k).forEach(ee=>{ee.bindingId===b.id&&(ee.bindingId=void 0)})}return}let E=p.shapes[D].handles;E&&Object.values(E).forEach(k=>{k.bindingId===b.id&&(k.bindingId=S)}),p.shapes[w].handles&&Object.values(p.shapes[w].handles).forEach(k=>{k.bindingId===b.id&&(k.bindingId=S)});let B=C(f({},Mt.Utils.deepClone(b)),{id:S,toId:w,fromId:D});r.bindings[B.id]=void 0,p.bindings[B.id]=B});let y=Object.values(p.shapes);if(y.length>0)if(o){let b=Mt.Utils.getCommonBounds(y.map(w=>I.getBounds(w))),S=Mt.Utils.getBoundsCenter(b);y.forEach(w=>{!w.point||(w.point=to.Vec.sub(o,to.Vec.sub(S,w.point)))})}else{let b=Mt.Utils.getCommonBounds(y.map(I.getBounds));if(!(Mt.Utils.boundsContain(s.viewport,b)||Mt.Utils.boundsCollide(s.viewport,b))){let S=to.Vec.toFixed(s.getPagePoint(s.centerPoint)),w=Mt.Utils.centerBounds(b,S),D=to.Vec.sub(Mt.Utils.getBoundsCenter(w),Mt.Utils.getBoundsCenter(b));y.forEach(E=>{E.point=to.Vec.toFixed(to.Vec.add(E.point,D))})}}if(e.assets)for(let b of e.assets)c[b.id]=b}let u=document.createElement("textarea");return Object.values(p.shapes).forEach(h=>{"text"in h&&(u.innerHTML=h.text,h.text=u.value),"label"in h&&(u.innerHTML=h.label,h.label=u.value)}),u.remove(),{id:"insert",before:{document:{pages:{[n]:r},pageStates:{[n]:{selectedIds:[...s.selectedIds]}}}},after:{document:{pages:{[n]:p},assets:c,pageStates:{[n]:{selectedIds:i?Object.keys(p.shapes):[...s.selectedIds]}}}}}}var Pe=require("@tldraw/vec");var ze=class{constructor(e){this.app=e}};var cn=require("@tldraw/core");var br=class extends ze{constructor(e,t,n,o=!1){super(e);d(this,"type","arrow");d(this,"performanceMode");d(this,"status","translatingHandle");d(this,"newStartBindingId",cn.Utils.uniqueId());d(this,"draggedBindingId",cn.Utils.uniqueId());d(this,"didBind",!1);d(this,"initialShape");d(this,"handleId");d(this,"bindableShapeIds");d(this,"initialBinding");d(this,"startBindingShapeId");d(this,"isCreate");d(this,"start",()=>{});d(this,"update",()=>{var E,x,B;let{initialShape:e}=this,{currentPoint:t,shiftKey:n,altKey:o,metaKey:i,currentGrid:a,settings:{showGrid:l}}=this.app,r=this.app.getShape(e.id);if(r.isLocked)return;let{handles:c}=e,p=this.handleId;if(!c[p].canBind)return;let u=Pe.Vec.sub(t,Pe.Vec.add(c[p].point,e.point));if(n){let k=o?Pe.Vec.med(c.start.point,c.end.point):c[p==="start"?"end":"start"].point,ee=c[p].point,oe=Pe.Vec.add(ee,u),ne=Pe.Vec.angle(k,oe),ve=Pe.Vec.rotWith(oe,k,cn.Utils.snapAngleToSegments(ne,24)-ne);u=Pe.Vec.add(u,Pe.Vec.sub(ve,oe))}let h=Pe.Vec.add(c[p].point,u),m={[p]:C(f({},c[p]),{point:l?Pe.Vec.snap(h,a):Pe.Vec.toFixed(h),bindingId:void 0})},g=ln["arrow"],T=(E=g.onHandleChange)==null?void 0:E.call(g,e,m);if(!T)return;let y={shape:cn.Utils.deepMerge(r,T),bindings:{}},b,S=y.shape.handles[this.handleId],w=y.shape.handles[this.handleId==="start"?"end":"start"];if(this.startBindingShapeId){let k,ee=this.app.page.shapes[this.startBindingShapeId],oe=I.getShapeUtil(ee),ne=oe.getCenter(ee),ve=y.shape.handles.start,Ie=y.shape.handles.end,Ce=Pe.Vec.add(ve.point,y.shape.point);Pe.Vec.isEqual(Ce,ne)&&Ce[1]++;let Ve=ne,Ke=oe.hitTestPoint(ee,t),at=Pe.Vec.uni(Pe.Vec.sub(Ce,Ve)),gt=this.app.getBinding(this.newStartBindingId)!==void 0;!i&&!oe.hitTestPoint(ee,Pe.Vec.add(y.shape.point,Ie.point))&&(k=this.findBindingPoint(r,ee,"start",this.newStartBindingId,ne,Ve,at,Ke)),k&&!gt?(this.didBind=!0,y.bindings[this.newStartBindingId]=k,y.shape=cn.Utils.deepMerge(y.shape,{handles:{start:{bindingId:k.id}}})):!k&&gt&&(this.didBind=!1,y.bindings[this.newStartBindingId]=void 0,y.shape=cn.Utils.deepMerge(e,{handles:{start:{bindingId:void 0}}}))}if(!i){let k=Pe.Vec.add(w.point,y.shape.point),ee=Pe.Vec.add(S.point,y.shape.point),oe=Pe.Vec.uni(Pe.Vec.sub(ee,k)),ne=Pe.Vec.add(y.shape.point,y.shape.handles.start.point),ve=Pe.Vec.add(y.shape.point,y.shape.handles.end.point),Ie=this.bindableShapeIds.map(Ce=>this.app.page.shapes[Ce]).sort((Ce,Ve)=>Ve.childIndex-Ce.childIndex).filter(Ce=>{if(Ce.isLocked)return!1;let Ve=I.getShapeUtil(Ce);return![ne,ve].every(Ke=>Ve.hitTestPoint(Ce,Ke))});for(let Ce of Ie)if(b=this.findBindingPoint(r,Ce,this.handleId,this.draggedBindingId,ee,k,oe,o),b)break}if(b)this.didBind=!0,y.bindings[this.draggedBindingId]=b,y.shape=cn.Utils.deepMerge(y.shape,{handles:{[this.handleId]:{bindingId:this.draggedBindingId}}});else{this.didBind=this.didBind||!1;let k=r.handles[this.handleId].bindingId;k!==void 0&&(y.bindings[k]=void 0,y.shape=cn.Utils.deepMerge(y.shape,{handles:{[this.handleId]:{bindingId:void 0}}}))}let D=(B=(x=I.getShapeUtil(y.shape)).onHandleChange)==null?void 0:B.call(x,y.shape,y.shape.handles);return{document:{pages:{[this.app.currentPageId]:{shapes:{[r.id]:f(f({},y.shape),D!=null?D:{})},bindings:y.bindings}},pageStates:{[this.app.currentPageId]:{bindingId:y.shape.handles[p].bindingId}}}}});d(this,"cancel",()=>{let{initialShape:e,initialBinding:t,newStartBindingId:n,draggedBindingId:o}=this,i=I.onSessionComplete(this.app.page.shapes[e.id]),a=this.isCreate||Pe.Vec.dist(i.handles.start.point,i.handles.end.point)<4,l={};return l[o]=void 0,t&&(l[t.id]=a?void 0:t),n&&(l[n]=void 0),{document:{pages:{[this.app.currentPageId]:{shapes:{[e.id]:a?void 0:e},bindings:l}},pageStates:{[this.app.currentPageId]:{selectedIds:a?[]:[e.id],bindingId:void 0,hoveredId:void 0,editingId:void 0}}}}});d(this,"complete",()=>{let{initialShape:e,initialBinding:t,newStartBindingId:n,startBindingShapeId:o,handleId:i}=this,a=I.onSessionComplete(this.app.page.shapes[e.id]),l=a.handles[i].bindingId,r=Pe.Vec.dist(a.handles.start.point,a.handles.end.point);if(!(l||t)&&r<4)return this.cancel();let c={},p={};return t&&(c[t.id]=this.isCreate?void 0:t,p[t.id]=void 0),l&&(c[l]=void 0,p[l]=this.app.page.bindings[l]),o&&(c[n]=void 0,p[n]=this.app.page.bindings[n]),{id:"arrow",before:{document:{pages:{[this.app.currentPageId]:{shapes:{[e.id]:this.isCreate?void 0:e},bindings:c}},pageStates:{[this.app.currentPageId]:{selectedIds:this.isCreate?[]:[e.id],bindingId:void 0,hoveredId:void 0,editingId:void 0}}}},after:{document:{pages:{[this.app.currentPageId]:{shapes:{[e.id]:a},bindings:p}},pageStates:{[this.app.currentPageId]:{selectedIds:[e.id],bindingId:void 0,hoveredId:void 0,editingId:void 0}}}}}});d(this,"findBindingPoint",(e,t,n,o,i,a,l,r)=>{let p=I.getShapeUtil(t.type).getBindingPoint(t,e,i,a,l,r);if(!!p)return{id:o,type:"arrow",fromId:e.id,toId:t.id,handleId:n,point:Pe.Vec.toFixed(p.point),distance:p.distance}});var c,p,u;this.isCreate=o;let{currentPageId:i}=e.state.appState,a=e.state.document.pages[i];this.handleId=n,this.initialShape=ct(a.shapes[t]),this.bindableShapeIds=I.getBindableShapeIds(e.state).filter(h=>!(h===this.initialShape.id||h===this.initialShape.parentId));let l=(c=this.initialShape.handles[n==="start"?"end":"start"])==null?void 0:c.bindingId;if(l){let h=(p=a.bindings[l])==null?void 0:p.toId;h&&(this.bindableShapeIds=this.bindableShapeIds.filter(m=>m!==h))}let{originPoint:r}=this.app;if(this.isCreate)this.startBindingShapeId=(u=this.bindableShapeIds.map(h=>a.shapes[h]).filter(h=>!h.isLocked&&cn.Utils.pointInBounds(r,I.getShapeUtil(h).getBounds(h))).sort((h,m)=>m.childIndex-h.childIndex)[0])==null?void 0:u.id,this.startBindingShapeId&&this.bindableShapeIds.splice(this.bindableShapeIds.indexOf(this.startBindingShapeId),1);else{let h=this.initialShape.handles[this.handleId].bindingId;h?this.initialBinding=a.bindings[h]:this.initialShape.handles[this.handleId].bindingId=void 0}}};var yr=require("@tldraw/core");var wr=class extends ze{constructor(e){super(e);d(this,"type","brush");d(this,"performanceMode");d(this,"status","brushing");d(this,"initialSelectedIds");d(this,"shapesToTest");d(this,"start",()=>{});d(this,"update",()=>{let{initialSelectedIds:e,shapesToTest:t,app:{metaKey:n,settings:o,originPoint:i,currentPoint:a}}=this,l=yr.Utils.getBoundsFromPoints([i,a]),r=o.isCadSelectMode?!n&&i[0]<a[0]:n,c=new Set,p=new Set(e);t.forEach(({id:g,selectId:T})=>{let y=this.app.getShape(g);if(!c.has(T)){let b=this.app.getShapeUtil(y);(r?yr.Utils.boundsContain(l,b.getBounds(y)):b.hitTestBounds(y,l))?(c.add(T),p.has(T)||p.add(T)):p.has(T)&&p.delete(T)}});let u=this.app.selectedIds,h=p.size!==u.length||u.some(g=>!p.has(g)),m=h?Array.from(p.values()):u;return h?{appState:{selectByContain:r},document:{pageStates:{[this.app.currentPageId]:{brush:l,selectedIds:m}}}}:{document:{pageStates:{[this.app.currentPageId]:{brush:l}}}}});d(this,"cancel",()=>({appState:{selectByContain:!1},document:{pageStates:{[this.app.currentPageId]:{brush:null,selectedIds:Array.from(this.initialSelectedIds.values())}}}}));d(this,"complete",()=>({appState:{selectByContain:!1},document:{pageStates:{[this.app.currentPageId]:{brush:null,selectedIds:[...this.app.selectedIds]}}}}));let{currentPageId:t}=e;this.initialSelectedIds=new Set(this.app.selectedIds),this.shapesToTest=this.app.shapes.filter(n=>!(n.isLocked||n.isHidden||n.parentId!==t||this.initialSelectedIds.has(n.id)||this.initialSelectedIds.has(n.parentId))).map(n=>({id:n.id,bounds:this.app.getShapeUtil(n).getBounds(n),selectId:n.id})),this.update()}};var xr=require("@tldraw/core"),it=require("@tldraw/vec");var Ir=class extends ze{constructor(e,t){super(e);d(this,"type","draw");d(this,"performanceMode");d(this,"status","creating");d(this,"topLeft");d(this,"points");d(this,"initialShape");d(this,"lastAdjustedPoint");d(this,"shiftedPoints",[]);d(this,"shapeId");d(this,"isLocked");d(this,"isExtending");d(this,"lockedDirection");d(this,"start",()=>{var i;let e=this.app.originPoint,t=[0,0,(i=e[2])!=null?i:.5];this.points.push(t);let n=[Math.min(this.topLeft[0],e[0]),Math.min(this.topLeft[1],e[1])],o=it.Vec.sub(n,e);return this.topLeft=n,this.shiftedPoints=this.points.map(a=>it.Vec.toFixed(it.Vec.sub(a,o)).concat(a[2])),{document:{pages:{[this.app.currentPageId]:{shapes:{[this.shapeId]:{point:this.topLeft,points:this.shiftedPoints}}}},pageStates:{[this.app.currentPageId]:{selectedIds:[this.shapeId]}}}}});d(this,"update",()=>{let{shapeId:e}=this,{currentPoint:t,originPoint:n,shiftKey:o}=this.app;if(!this.lockedDirection&&this.points.length>1){let a=xr.Utils.getBoundsFromPoints(this.points);(a.width>8||a.height>8)&&(this.lockedDirection=a.width>a.height?"horizontal":"vertical")}if(o){if(!this.isLocked&&this.points.length>2){if(!this.lockedDirection){let l=xr.Utils.getBoundsFromPoints(this.points);this.lockedDirection=l.width>l.height?"horizontal":"vertical"}this.isLocked=!0;let a=[...this.lastAdjustedPoint];this.lockedDirection==="vertical"?a[0]=0:a[1]=0,this.points.push(a.concat(t[2]))}}else this.isLocked&&(this.isLocked=!1);this.isLocked&&(this.lockedDirection==="vertical"?t[0]=n[0]:t[1]=n[1]);let i=this.addPoint(t);if(!!i)return{document:{pages:{[this.app.currentPageId]:{shapes:{[e]:i}}},pageStates:{[this.app.currentPageId]:{selectedIds:[e]}}}}});d(this,"cancel",()=>{let{shapeId:e}=this,t=this.app.currentPageId;return{document:{pages:{[t]:{shapes:{[e]:this.isExtending?this.initialShape:void 0}}},pageStates:{[t]:{selectedIds:[]}}}}});d(this,"complete",()=>{let{shapeId:e}=this,t=this.app.currentPageId,n=this.app.getShape(e);return{id:"create_draw",before:{document:{pages:{[t]:{shapes:{[e]:this.isExtending?this.initialShape:void 0}}},pageStates:{[t]:{selectedIds:[]}}}},after:{document:{pages:{[t]:{shapes:{[e]:C(f({},n),{point:it.Vec.toFixed(n.point),points:n.points.map(o=>it.Vec.toFixed(o)),isComplete:!0})}}},pageStates:{[this.app.currentPageId]:{selectedIds:[]}}}}}});d(this,"addPoint",e=>{let{originPoint:t}=this.app,n=it.Vec.toFixed(it.Vec.sub(e,t)).concat(e[2]);if(it.Vec.isEqual(this.lastAdjustedPoint,n))return;this.points.push(n),this.lastAdjustedPoint=n;let o=[...this.topLeft],i=[Math.min(this.topLeft[0],e[0]),Math.min(this.topLeft[1],e[1])],a=it.Vec.sub(i,t),l;return o[0]!==i[0]||o[1]!==i[1]?(this.topLeft=i,l=this.points.map(r=>it.Vec.toFixed(it.Vec.sub(r,a)).concat(r[2]))):l=[...this.shiftedPoints,it.Vec.sub(n,a).concat(n[2])],this.shiftedPoints=l,{point:this.topLeft,points:l}});var r;let{originPoint:n}=this.app;this.shapeId=t,this.initialShape=this.app.getShape(t),this.topLeft=[...this.initialShape.point];let o=[0,0,(r=n[2])!=null?r:.5],i=it.Vec.sub(n,this.topLeft),a=this.initialShape.points.map(c=>it.Vec.sub(c,i).concat(c[2]));this.isExtending=a.length>0;let l=[];if(this.isExtending){let c=a[a.length-1];if(c){l.push(c,c);let p=Math.floor(it.Vec.dist(c,o)/16);if(p>1)for(let u=0;u<p;u++){let h=u/(p-1);l.push(it.Vec.lrp(c,o,h).concat(c[2]))}else l.push(o,o)}}else l.push(o);this.points=[...a,...l],this.shiftedPoints=this.points.map(c=>it.Vec.add(c,i).concat(c[2])),this.lastAdjustedPoint=this.points[this.points.length-1]}};var si=require("@tldraw/vec");var Cr=class extends ze{constructor(e,t,n,o="move_handle"){super(e);d(this,"type","handle");d(this,"performanceMode");d(this,"status","translatingHandle");d(this,"commandId");d(this,"topLeft");d(this,"shiftKey",!1);d(this,"initialShape");d(this,"handleId");d(this,"start",()=>{});d(this,"update",()=>{var p,u;let{initialShape:e,app:{currentPageId:t,currentPoint:n}}=this,o=this.app.getShape(e.id);if(o.isLocked)return;let i=o.handles,a=this.handleId,l=si.Vec.sub(n,i[a].point),r={[a]:C(f({},i[a]),{point:si.Vec.sub(si.Vec.add(i[a].point,l),o.point)})},c=(u=(p=I.getShapeUtil(o)).onHandleChange)==null?void 0:u.call(p,o,r);if(!!c)return{document:{pages:{[t]:{shapes:{[o.id]:c}}}}}});d(this,"cancel",()=>{let{initialShape:e,app:{currentPageId:t}}=this;return{document:{pages:{[t]:{shapes:{[e.id]:e}}}}}});d(this,"complete",()=>{let{initialShape:e,app:{currentPageId:t}}=this;return{id:this.commandId,before:{document:{pages:{[t]:{shapes:{[e.id]:e}}}}},after:{document:{pages:{[t]:{shapes:{[e.id]:I.onSessionComplete(this.app.getShape(this.initialShape.id))}}}}}}});let{originPoint:i}=e;this.topLeft=[...i],this.handleId=n,this.initialShape=this.app.getShape(t),this.commandId=o}};var ts=require("@tldraw/core"),vr=require("@tldraw/vec");var kr=class extends ze{constructor(e){super(e);d(this,"type","rotate");d(this,"status","transforming");d(this,"performanceMode");d(this,"delta",[0,0]);d(this,"commonBoundsCenter");d(this,"initialAngle");d(this,"initialShapes");d(this,"changes",{});d(this,"start",()=>{});d(this,"update",()=>{let{commonBoundsCenter:e,initialShapes:t,app:{currentPageId:n,currentPoint:o,shiftKey:i}}=this,a={},l=vr.Vec.angle(e,o)-this.initialAngle;return i&&(l=ts.Utils.snapAngleToSegments(l,24)),t.forEach(({center:r,shape:c})=>{let{rotation:p=0}=c,u=0;i&&(u=ts.Utils.snapAngleToSegments(p,24)-p);let h=I.getRotatedShapeMutation(c,r,e,i?l+u:l);h&&(a[c.id]=h)}),this.changes=a,{document:{pages:{[n]:{shapes:a}}}}});d(this,"cancel",()=>{let{initialShapes:e,app:{currentPageId:t}}=this,n={};return e.forEach(({shape:o})=>n[o.id]=o),{document:{pages:{[t]:{shapes:n}}}}});d(this,"complete",()=>{let{initialShapes:e,app:{currentPageId:t}}=this,n={},o=this.changes;return e.forEach(({shape:{id:i,point:a,rotation:l,handles:r}})=>{n[i]={point:a,rotation:l,handles:r}}),{id:"rotate",before:{document:{pages:{[t]:{shapes:n}}}},after:{document:{pages:{[t]:{shapes:o}}}}}});let{app:{currentPageId:t,pageState:n,originPoint:o}}=this,i=I.getSelectedBranchSnapshot(e.state,t).filter(a=>!a.isLocked);if(i.length===0)throw Error("No selected shapes!");if(e.rotationInfo.selectedIds===n.selectedIds){if(e.rotationInfo.center===void 0)throw Error("We should have a center for rotation!");this.commonBoundsCenter=e.rotationInfo.center}else this.commonBoundsCenter=ts.Utils.getBoundsCenter(ts.Utils.getCommonBounds(i.map(I.getBounds))),e.rotationInfo.selectedIds=n.selectedIds,e.rotationInfo.center=this.commonBoundsCenter;this.initialShapes=i.filter(a=>a.children===void 0).map(a=>({shape:a,center:this.app.getShapeUtil(a).getCenter(a)})),this.initialAngle=vr.Vec.angle(this.commonBoundsCenter,o)}};var tt=require("@tldraw/core"),no=require("@tldraw/vec");var Dr=class extends ze{constructor(e,t=tt.TLBoundsCorner.BottomRight,n=!1){super(e);this.transformType=t;this.isCreate=n;d(this,"type","transform");d(this,"performanceMode");d(this,"status","transforming");d(this,"scaleX",1);d(this,"scaleY",1);d(this,"initialShapes");d(this,"initialShapeIds");d(this,"initialSelectedIds");d(this,"shapeBounds");d(this,"hasUnlockedShapes");d(this,"isAllAspectRatioLocked");d(this,"initialCommonBounds");d(this,"snapInfo",{state:"empty"});d(this,"prevPoint",[0,0]);d(this,"speed",1);d(this,"start",()=>{this.snapInfo={state:"ready",bounds:this.app.shapes.filter(e=>!this.initialShapeIds.includes(e.id)).map(e=>tt.Utils.getBoundsWithCenter(I.getRotatedBounds(e)))}});d(this,"update",()=>{let{transformType:e,shapeBounds:t,initialCommonBounds:n,isAllAspectRatioLocked:o,app:{currentPageId:i,pageState:{camera:a},viewport:l,currentPoint:r,previousPoint:c,originPoint:p,shiftKey:u,altKey:h,metaKey:m,currentGrid:g,settings:{isSnapping:T,showGrid:y}}}=this,b={},S=h?no.Vec.mul(no.Vec.sub(r,p),2):no.Vec.sub(r,p),w=tt.Utils.getTransformedBoundingBox(n,e,S,0,u||o);h&&(w=f(f({},w),tt.Utils.centerBounds(w,tt.Utils.getBoundsCenter(n)))),y&&(w=f(f({},w),tt.Utils.snapBoundsToGrid(w,g)));let E=no.Vec.dist(r,c)-this.speed;this.speed=this.speed+E*(E>1?.5:.15);let x=[];if((T&&!m||!T&&m)&&this.speed*a.zoom<10&&this.snapInfo.state==="ready"){let B=tt.Utils.getSnapPoints(tt.Utils.getBoundsWithCenter(w),this.snapInfo.bounds.filter(k=>tt.Utils.boundsContain(l,k)||tt.Utils.boundsCollide(l,k)),5/a.zoom);B&&(x=B.snapLines,w=tt.Utils.getTransformedBoundingBox(n,e,no.Vec.sub(S,B.offset),0,u||o))}return this.scaleX=w.scaleX,this.scaleY=w.scaleY,t.forEach(({initialShape:B,initialShapeBounds:k,transformOrigin:ee})=>{let oe=tt.Utils.getRelativeTransformedBoundingBox(w,n,k,this.scaleX<0,this.scaleY<0);y&&(oe=tt.Utils.snapBoundsToGrid(oe,g));let ne=I.transform(this.app.getShape(B.id),oe,{type:this.transformType,initialShape:B,scaleX:this.scaleX,scaleY:this.scaleY,transformOrigin:ee});b[B.id]=ne}),{appState:{snapLines:x},document:{pages:{[i]:{shapes:b}}}}});d(this,"cancel",()=>{let{shapeBounds:e,app:{currentPageId:t}}=this,n={};return this.isCreate?e.forEach(o=>n[o.initialShape.id]=void 0):e.forEach(o=>n[o.initialShape.id]=o.initialShape),{appState:{snapLines:[]},document:{pages:{[t]:{shapes:n}},pageStates:{[t]:{selectedIds:this.isCreate?[]:e.map(o=>o.initialShape.id)}}}}});d(this,"complete",()=>{let{isCreate:e,shapeBounds:t,hasUnlockedShapes:n,app:{currentPageId:o}}=this;if(!n)return;if(this.isCreate&&no.Vec.dist(this.app.originPoint,this.app.currentPoint)<2)return this.cancel();let i={},a={},l,r;return e?(l=[],r=[],t.forEach(({initialShape:c})=>{i[c.id]=void 0,a[c.id]=this.app.getShape(c.id)})):(l=this.initialSelectedIds,r=this.initialSelectedIds,t.forEach(({initialShape:c})=>{i[c.id]=c,a[c.id]=this.app.getShape(c.id)})),{id:"transform",before:{appState:{snapLines:[]},document:{pages:{[o]:{shapes:i}},pageStates:{[o]:{selectedIds:l,hoveredId:void 0,editingId:void 0}}}},after:{appState:{snapLines:[]},document:{pages:{[o]:{shapes:a}},pageStates:{[o]:{selectedIds:r,hoveredId:void 0,editingId:void 0}}}}}});this.initialSelectedIds=[...this.app.selectedIds],this.app.rotationInfo.selectedIds=[...this.initialSelectedIds],this.initialShapes=I.getSelectedBranchSnapshot(this.app.state,this.app.currentPageId).filter(l=>!l.isLocked),this.initialShapeIds=this.initialShapes.map(l=>l.id),this.hasUnlockedShapes=this.initialShapes.length>0,this.isAllAspectRatioLocked=this.initialShapes.every(l=>l.isAspectRatioLocked||I.getShapeUtil(l).isAspectRatioLocked);let o=Object.fromEntries(this.initialShapes.map(l=>[l.id,I.getBounds(l)])),i=Object.values(o);this.initialCommonBounds=tt.Utils.getCommonBounds(i);let a=tt.Utils.getBoundsFromPoints(i.map(tt.Utils.getBoundsCenter));this.shapeBounds=this.initialShapes.map(l=>{let r=o[l.id],c=tt.Utils.getBoundsCenter(r),p=(c[0]-a.minX)/a.width,u=(c[1]-a.minY)/a.height;return{initialShape:l,initialShapeBounds:r,transformOrigin:[p,u]}})}};var Kt=require("@tldraw/core"),jn=require("@tldraw/vec");var Pr=class extends ze{constructor(e,t,n,o=!1){super(e);d(this,"type","transformSingle");d(this,"status","transforming");d(this,"performanceMode");d(this,"transformType");d(this,"scaleX",1);d(this,"scaleY",1);d(this,"isCreate");d(this,"initialShape");d(this,"initialShapeBounds");d(this,"initialCommonBounds");d(this,"snapInfo",{state:"empty"});d(this,"prevPoint",[0,0]);d(this,"speed",1);d(this,"start",()=>{this.snapInfo={state:"ready",bounds:this.app.shapes.filter(e=>e.id!==this.initialShape.id).map(e=>Kt.Utils.getBoundsWithCenter(I.getRotatedBounds(e)))}});d(this,"update",()=>{let{transformType:e,initialShape:t,initialShapeBounds:n,app:{settings:{isSnapping:o,showGrid:i},currentPageId:a,pageState:{camera:l},viewport:r,currentPoint:c,previousPoint:p,originPoint:u,currentGrid:h,shiftKey:m,altKey:g,metaKey:T}}=this;if(t.isLocked)return;let y={},b=g?jn.Vec.mul(jn.Vec.sub(c,u),2):jn.Vec.sub(c,u),S=this.app.getShape(t.id),w=I.getShapeUtil(S),D=Kt.Utils.getTransformedBoundingBox(n,e,b,S.rotation,m||S.isAspectRatioLocked||w.isAspectRatioLocked);g&&(D=f(f({},D),Kt.Utils.centerBounds(D,Kt.Utils.getBoundsCenter(n)))),i&&(D=f(f({},D),Kt.Utils.snapBoundsToGrid(D,h)));let x=jn.Vec.dist(c,p)-this.speed;this.speed=this.speed+x*(x>1?.5:.15);let B=[];if((o&&!T||!o&&T)&&!t.rotation&&this.speed*l.zoom<10&&this.snapInfo.state==="ready"){let ee=Kt.Utils.getSnapPoints(Kt.Utils.getBoundsWithCenter(D),this.snapInfo.bounds.filter(oe=>Kt.Utils.boundsContain(r,oe)||Kt.Utils.boundsCollide(r,oe)),5/l.zoom);ee&&(B=ee.snapLines,D=Kt.Utils.getTransformedBoundingBox(n,e,jn.Vec.sub(b,ee.offset),S.rotation,m||S.isAspectRatioLocked||w.isAspectRatioLocked))}let k=I.getShapeUtil(S).transformSingle(S,D,{initialShape:t,type:this.transformType,scaleX:D.scaleX,scaleY:D.scaleY,transformOrigin:[.5,.5]});return k&&(y[S.id]=k),i&&k&&k.point&&(k.point=jn.Vec.snap(k.point,h)),{appState:{snapLines:B},document:{pages:{[a]:{shapes:y}}}}});d(this,"cancel",()=>{let{initialShape:e,app:{currentPageId:t}}=this,n={};return this.isCreate?n[e.id]=void 0:n[e.id]=e,{appState:{snapLines:[]},document:{pages:{[t]:{shapes:n}},pageStates:{[t]:{selectedIds:this.isCreate?[]:[e.id]}}}}});d(this,"complete",()=>{let{initialShape:e,app:{currentPageId:t}}=this;if(e.isLocked)return;if(this.isCreate&&jn.Vec.dist(this.app.originPoint,this.app.currentPoint)<2)return this.cancel();let n={},o={};return n[e.id]=this.isCreate?void 0:e,o[e.id]=I.onSessionComplete(this.app.getShape(e.id)),{id:"transform_single",before:{appState:{snapLines:[]},document:{pages:{[t]:{shapes:n}},pageStates:{[t]:{selectedIds:this.isCreate?[]:[e.id],editingId:void 0,hoveredId:void 0}}}},after:{appState:{snapLines:[]},document:{pages:{[t]:{shapes:o}},pageStates:{[t]:{selectedIds:[e.id],editingId:void 0,hoveredId:void 0}}}}}});this.isCreate=o,this.transformType=n;let i=this.app.getShape(t);this.initialShape=i,this.initialShapeBounds=I.getBounds(i),this.initialCommonBounds=I.getRotatedBounds(i),this.app.rotationInfo.selectedIds=[i.id]}};var vt=require("@tldraw/core"),Re=require("@tldraw/vec");var Br=class extends ze{constructor(e,t=!1,n=!1){super(e);d(this,"performanceMode");d(this,"type","translate");d(this,"status","translating");d(this,"delta",[0,0]);d(this,"prev",[0,0]);d(this,"prevPoint",[0,0]);d(this,"speed",1);d(this,"cloneInfo",{state:"empty"});d(this,"snapInfo",{state:"empty"});d(this,"snapLines",[]);d(this,"isCloning",!1);d(this,"isCreate");d(this,"link");d(this,"initialIds");d(this,"hasUnlockedShapes");d(this,"initialSelectedIds");d(this,"initialCommonBounds");d(this,"initialShapes");d(this,"initialParentChildren");d(this,"bindingsToDelete");d(this,"start",()=>{let{bindingsToDelete:e,initialIds:t,app:{currentPageId:n,page:o}}=this,i=[],a=[];if(Object.values(o.shapes).forEach(r=>{let c=vt.Utils.getBoundsWithCenter(I.getRotatedBounds(r));i.push(c),t.has(r.id)||a.push(c)}),this.snapInfo={state:"ready",bounds:i,others:a},e.length===0)return;let l={};return e.forEach(r=>l[r.id]=void 0),{document:{pages:{[n]:{bindings:l}}}}});d(this,"update",()=>{let{initialParentChildren:e,initialShapes:t,initialCommonBounds:n,bindingsToDelete:o,app:{pageState:{camera:i},settings:{isSnapping:a,showGrid:l},currentPageId:r,viewport:c,selectedIds:p,currentPoint:u,previousPoint:h,originPoint:m,altKey:g,shiftKey:T,metaKey:y,currentGrid:b}}=this,S={},w={},D={},E=Re.Vec.sub(u,m),x=!1;this.isCreate||(g&&!this.isCloning?(this.isCloning=!0,x=!0):!g&&this.isCloning&&(this.isCloning=!1,x=!0)),T&&(Math.abs(E[0])<Math.abs(E[1])?E[0]=0:E[1]=0);let k=Re.Vec.dist(u,h)-this.speed;if(this.speed=this.speed+k*(k>1?.5:.15),this.snapLines=[],(a&&!y||!a&&y)&&this.speed*i.zoom<10&&this.snapInfo.state==="ready"){let ee=vt.Utils.getSnapPoints(vt.Utils.getBoundsWithCenter(l?vt.Utils.snapBoundsToGrid(vt.Utils.translateBounds(n,E),b):vt.Utils.translateBounds(n,E)),(this.isCloning?this.snapInfo.bounds:this.snapInfo.others).filter(oe=>vt.Utils.boundsContain(c,oe)||vt.Utils.boundsCollide(c,oe)),5/i.zoom);ee&&(this.snapLines=ee.snapLines,E=Re.Vec.sub(E,ee.offset))}if(this.prev=E,this.isCloning)if(x){if(this.cloneInfo.state==="empty"&&this.createCloneInfo(),this.cloneInfo.state==="empty")throw Error;let{clones:ee,clonedBindings:oe}=this.cloneInfo;this.isCloning=!0,o.forEach(ne=>S[ne.id]=ne),t.forEach(ne=>w[ne.id]={point:ne.point}),ee.forEach(ne=>{var ve;if(w[ne.id]=f({},ne),ne.parentId!==r&&!p.includes(ne.parentId)){let Ie=((ve=w[ne.parentId])==null?void 0:ve.children)||e[ne.parentId];Ie.includes(ne.id)||(w[ne.parentId]=C(f({},w[ne.parentId]),{children:[...Ie,ne.id]}))}});for(let ne of oe)S[ne.id]=ne;D.selectedIds=ee.map(ne=>ne.id),ee.forEach(ne=>{w[ne.id]=C(f({},ne),{point:l?Re.Vec.snap(Re.Vec.toFixed(Re.Vec.add(ne.point,E)),b):Re.Vec.toFixed(Re.Vec.add(ne.point,E))})})}else{if(this.cloneInfo.state==="empty")throw Error;let{clones:ee}=this.cloneInfo;ee.forEach(oe=>{w[oe.id]={point:l?Re.Vec.snap(Re.Vec.toFixed(Re.Vec.add(oe.point,E)),b):Re.Vec.toFixed(Re.Vec.add(oe.point,E))}})}else if(x){if(this.cloneInfo.state==="empty")throw Error;let{clones:ee,clonedBindings:oe}=this.cloneInfo;this.isCloning=!1,o.forEach(ne=>S[ne.id]=void 0),ee.forEach(ne=>{ne.parentId!==r&&(w[ne.parentId]=C(f({},w[ne.parentId]),{children:e[ne.parentId]}))}),ee.forEach(ne=>w[ne.id]=void 0),t.forEach(ne=>{w[ne.id]={point:l?Re.Vec.snap(Re.Vec.toFixed(Re.Vec.add(ne.point,E)),b):Re.Vec.toFixed(Re.Vec.add(ne.point,E))}});for(let ne of oe)S[ne.id]=void 0;D.selectedIds=t.map(ne=>ne.id)}else t.forEach(ee=>{w[ee.id]={point:l?Re.Vec.snap(Re.Vec.toFixed(Re.Vec.add(ee.point,E)),b):Re.Vec.toFixed(Re.Vec.add(ee.point,E))}});return{appState:{snapLines:this.snapLines},document:{pages:{[r]:{shapes:w,bindings:S}},pageStates:{[r]:D}}}});d(this,"cancel",()=>{let{initialShapes:e,initialSelectedIds:t,bindingsToDelete:n,app:{currentPageId:o}}=this,i={},a={},l={editingId:void 0,hoveredId:void 0};if(n.forEach(r=>i[r.id]=r),this.isCreate?(e.forEach(({id:r})=>a[r]=void 0),l.selectedIds=[]):(e.forEach(({id:r,point:c})=>a[r]=C(f({},a[r]),{point:c})),l.selectedIds=t),this.cloneInfo.state==="ready"){let{clones:r,clonedBindings:c}=this.cloneInfo;r.forEach(p=>a[p.id]=void 0),c.forEach(p=>i[p.id]=void 0)}return{appState:{snapLines:[]},document:{pages:{[o]:{shapes:a,bindings:i}},pageStates:{[o]:l}}}});d(this,"complete",()=>{let{initialShapes:e,initialParentChildren:t,bindingsToDelete:n,app:{currentPageId:o}}=this,i={},a={},l={},r={};if(this.isCloning){if(this.cloneInfo.state==="empty"&&this.createCloneInfo(),this.cloneInfo.state!=="ready")throw Error;let{clones:c,clonedBindings:p}=this.cloneInfo;c.forEach(u=>{a[u.id]=void 0,r[u.id]=this.app.getShape(u.id),u.parentId!==o&&(a[u.parentId]=C(f({},a[u.parentId]),{children:t[u.parentId]}),r[u.parentId]=C(f({},r[u.parentId]),{children:this.app.getShape(u.parentId).children}))}),p.forEach(u=>{i[u.id]=void 0,l[u.id]=this.app.getBinding(u.id)})}else e.forEach(c=>{a[c.id]=this.isCreate?void 0:C(f({},a[c.id]),{point:c.point}),r[c.id]=f(f({},r[c.id]),this.isCreate?this.app.getShape(c.id):{point:this.app.getShape(c.id).point})});return n.forEach(c=>{i[c.id]=c;for(let p of[c.toId,c.fromId]){let u=this.app.getShape(p);!u.handles||Object.values(u.handles).filter(h=>h.bindingId===c.id).forEach(h=>{a[p]=C(f({},a[p]),{handles:{}}),r[p]=C(f({},r[p]),{handles:{}}),a[p].handles[h.id]={bindingId:c.id},r[p].handles[h.id]={bindingId:void 0}})}}),{id:"translate",before:{appState:{snapLines:[]},document:{pages:{[o]:{shapes:a,bindings:i}},pageStates:{[o]:{selectedIds:this.isCreate?[]:[...this.initialSelectedIds]}}}},after:{appState:{snapLines:[]},document:{pages:{[o]:{shapes:r,bindings:l}},pageStates:{[o]:{selectedIds:[...this.app.selectedIds]}}}}}});d(this,"createCloneInfo",()=>{let{initialShapes:e,initialParentChildren:t,app:{selectedIds:n,currentPageId:o,page:i}}=this,a={},l={},r=[],c=[];e.forEach(u=>{let h=vt.Utils.uniqueId();t[h]=t[u.id],a[u.id]=h;let m=C(f({},vt.Utils.deepClone(u)),{id:h,parentId:u.parentId,childIndex:I.getChildIndexAbove(this.app.state,u.id,o)});if(m.type==="video"){let g=document.getElementById(u.id+"_video");g&&(m.currentTime=(g.currentTime+16)%g.duration)}c.push(m)}),c.forEach(u=>{u.children!==void 0&&(u.children=u.children.map(h=>a[h]))}),c.forEach(u=>{n.includes(u.parentId)&&(u.parentId=a[u.parentId])});let p=new Set(Object.keys(a));Object.values(i.bindings).filter(u=>p.has(u.fromId)||p.has(u.toId)).forEach(u=>{if(p.has(u.fromId)&&p.has(u.toId)){let h=vt.Utils.uniqueId(),m=C(f({},vt.Utils.deepClone(u)),{id:h,fromId:a[u.fromId]||u.fromId,toId:a[u.toId]||u.toId});l[u.id]=h,r.push(m)}}),c.forEach(u=>{if(u.handles&&u.handles)for(let h in u.handles){let m=u.handles[h];m.bindingId=m.bindingId?l[m.bindingId]:void 0}}),c.forEach(u=>{if(i.shapes[u.id])throw Error("uh oh, we didn't clone correctly")}),this.cloneInfo={state:"ready",clones:c,cloneMap:a,clonedBindings:r}});this.isCreate=t,this.link=n;let{currentPageId:o,selectedIds:i,page:a}=this.app;this.initialSelectedIds=[...i];let l=(n?I.getLinkedShapeIds(this.app.state,o,n,!1):i).map(c=>this.app.getShape(c)).filter(c=>!c.isLocked),r=new Set(l.map(c=>c.id));this.hasUnlockedShapes=l.length>0,this.initialShapes=Array.from(new Set(l.filter(c=>!r.has(c.parentId)).flatMap(c=>c.children?[c,...c.children.map(p=>this.app.getShape(p))]:[c])).values()),this.initialIds=new Set(this.initialShapes.map(c=>c.id)),this.bindingsToDelete=[],Object.values(a.bindings).filter(c=>this.initialIds.has(c.fromId)||this.initialIds.has(c.toId)).forEach(c=>{this.initialIds.has(c.fromId)&&(this.initialIds.has(c.toId)||this.bindingsToDelete.push(c))}),this.initialParentChildren={},this.initialShapes.map(c=>c.parentId).filter(c=>c!==a.id).forEach(c=>{this.initialParentChildren[c]=this.app.getShape(c).children}),this.initialCommonBounds=vt.Utils.getCommonBounds(this.initialShapes.map(I.getRotatedBounds)),this.app.rotationInfo.selectedIds=[...this.app.selectedIds]}};var Co=require("@tldraw/vec");var Er=class extends ze{constructor(e){super(e);d(this,"type","draw");d(this,"performanceMode");d(this,"status","creating");d(this,"isLocked");d(this,"lockedDirection");d(this,"erasedShapes",new Set);d(this,"erasedBindings",new Set);d(this,"initialSelectedShapes");d(this,"erasableShapes");d(this,"prevPoint");d(this,"prevEraseShapesSize",0);d(this,"interval");d(this,"timestamp1",0);d(this,"timestamp2",0);d(this,"prevErasePoint",[]);d(this,"loop",()=>{let e=Date.now(),t=e-this.timestamp1,n=e-this.timestamp2,{eraseLine:o}=this.app.appState,i=[...o],a=!1;t>16&&this.prevErasePoint!==this.prevPoint&&(a=!0,i=[...o,this.prevPoint],this.prevErasePoint=this.prevPoint),n>32&&i.length>1&&(a=!0,i.splice(0,Math.ceil(i.length*.1)),this.timestamp2=e),a&&this.app.patchState({appState:{eraseLine:i}},"eraseline"),this.interval=requestAnimationFrame(this.loop)});d(this,"start",()=>{});d(this,"update",()=>{let{page:e,shiftKey:t,originPoint:n,currentPoint:o,zoom:i}=this.app;if(t){if(!this.isLocked&&Co.Vec.dist(n,o)>4/i){if(!this.lockedDirection){let c=Co.Vec.sub(o,n);this.lockedDirection=c[0]>c[1]?"horizontal":"vertical"}this.isLocked=!0}}else this.isLocked&&(this.isLocked=!1);this.isLocked&&(this.lockedDirection==="vertical"?o[0]=n[0]:o[1]=n[1]);let a=Co.Vec.toFixed(Co.Vec.add(n,Co.Vec.sub(o,n))),l=new Set([]);this.erasableShapes.forEach(c=>{if(!this.erasedShapes.has(c)&&this.app.getShapeUtil(c).hitTestLineSegment(c,this.prevPoint,a)&&(this.erasedShapes.add(c),l.add(c.id),c.children!==void 0))for(let p of c.children)this.erasedShapes.add(this.app.getShape(p)),l.add(p)}),Object.values(e.bindings).forEach(c=>{for(let p of[c.toId,c.fromId])l.has(p)&&this.erasedBindings.add(c)}),this.erasedShapes.forEach(c=>{this.app.getShape(c.id)||(this.erasedShapes.delete(c),this.erasableShapes.delete(c),l.delete(c.id))});let r=Array.from(this.erasedShapes.values());if(this.prevPoint=a,r.length!==this.prevEraseShapesSize)return this.prevEraseShapesSize=r.length,{document:{pages:{[e.id]:{shapes:Object.fromEntries(r.map(c=>[c.id,{isGhost:!0}]))}}}}});d(this,"cancel",()=>{let{page:e}=this.app;cancelAnimationFrame(this.interval),this.erasedShapes.forEach(n=>{this.app.getShape(n.id)||(this.erasedShapes.delete(n),this.erasableShapes.delete(n))});let t=Array.from(this.erasedShapes.values());return{document:{pages:{[e.id]:{shapes:Object.fromEntries(t.map(n=>[n.id,{isGhost:!1}]))}},pageStates:{[e.id]:{selectedIds:this.initialSelectedShapes.map(n=>n.id)}}},appState:{eraseLine:[]}}});d(this,"complete",()=>{let{page:e}=this.app;cancelAnimationFrame(this.interval),this.erasedShapes.forEach(r=>{this.app.getShape(r.id)||(this.erasedShapes.delete(r),this.erasableShapes.delete(r))}),this.erasedBindings.forEach(r=>{this.app.getBinding(r.id)||this.erasedBindings.delete(r)});let t=Array.from(this.erasedShapes.values()),n=Array.from(this.erasedBindings.values()),o=t.map(r=>r.id),i=n.map(r=>r.id),a={shapes:Object.fromEntries(t.map(r=>[r.id,r])),bindings:Object.fromEntries(n.map(r=>[r.id,r]))},l={shapes:Object.fromEntries(t.map(r=>[r.id,void 0])),bindings:Object.fromEntries(n.map(r=>[r.id,void 0]))};return this.app.shapes.forEach(r=>{r.handles&&!l.shapes[r.id]&&Object.values(r.handles).forEach(c=>{var p,u;c.bindingId&&i.includes(c.bindingId)&&(a.shapes[r.id]=C(f({},a.shapes[r.id]),{handles:C(f({},(p=a.shapes[r.id])==null?void 0:p.handles),{[c.id]:c})}),o.includes(r.id)||(l.shapes[r.id]=C(f({},l.shapes[r.id]),{handles:C(f({},(u=l.shapes[r.id])==null?void 0:u.handles),{[c.id]:C(f({},c),{bindingId:void 0})})})))})}),{id:"erase",before:{document:{pages:{[e.id]:a},pageStates:{[e.id]:{selectedIds:this.initialSelectedShapes.filter(r=>!!this.app.getShape(r.id)).map(r=>r.id)}}},appState:{eraseLine:[]}},after:{document:{pages:{[e.id]:l},pageStates:{[e.id]:{selectedIds:this.initialSelectedShapes.filter(r=>!!this.app.getShape(r.id)).filter(r=>!o.includes(r.id)).map(r=>r.id)}}},appState:{eraseLine:[]}}}});this.prevPoint=[...e.originPoint],this.initialSelectedShapes=this.app.selectedIds.map(t=>this.app.getShape(t)),this.erasableShapes=new Set(this.app.shapes.filter(t=>!t.isLocked)),this.interval=this.loop()}};var Mr=require("@tldraw/core"),Rr=require("@tldraw/vec");var Lr=class extends ze{constructor(e,t){super(e);d(this,"type","grid");d(this,"performanceMode");d(this,"status","translating");d(this,"shape");d(this,"bounds");d(this,"initialSelectedIds");d(this,"initialSiblings");d(this,"grid",{});d(this,"columns",1);d(this,"rows",1);d(this,"isCopying",!1);d(this,"start",()=>{});d(this,"update",()=>{let{currentPageId:e,altKey:t,shiftKey:n,currentPoint:o}=this.app,i={},a={},l=Mr.Utils.getBoundsCenter(this.bounds),r=Rr.Vec.sub(o,l);n&&(Math.abs(r[0])<Math.abs(r[1])?r[0]=0:r[1]=0);let c=this.bounds.width+32,p=this.bounds.height+32,u=Math.ceil(r[0]/c),h=Math.ceil(r[1]/p),m=Math.min(u,0),g=Math.min(h,0),T=Math.max(u,1),y=Math.max(h,1),b=new Set,S=t;S!==this.isCopying&&(Object.values(this.grid).filter(w=>w!==this.shape.id).forEach(w=>i[w]=void 0),this.grid={"0_0":this.shape.id},this.isCopying=S);for(let w=m;w<T;w++)for(let D=g;D<y;D++){let E=`${w}_${D}`;if(b.add(E),this.grid[E]||w===0&&D===0)continue;let x=this.getClone(Rr.Vec.add(this.shape.point,[w*c,D*p]),S);i[x.id]=x,this.grid[E]=x.id}if(Object.entries(this.grid).forEach(([w,D])=>{b.has(w)||(i[D]=void 0,delete this.grid[w])}),Object.values(i).length!==0)return this.initialSiblings&&(i[this.shape.parentId]={children:[...this.initialSiblings,...Object.values(this.grid)]}),{document:{pages:{[e]:{shapes:i}},pageStates:{[e]:a}}}});d(this,"cancel",()=>{let{currentPageId:e}=this.app,t={};return Object.values(this.grid).forEach(n=>{t[n]=void 0}),t[this.shape.id]=C(f({},t[this.shape.id]),{point:this.shape.point}),this.initialSiblings&&(t[this.shape.parentId]={children:[...this.initialSiblings,this.shape.id]}),{document:{pages:{[e]:{shapes:t}},pageStates:{[e]:{selectedIds:[this.shape.id]}}}}});d(this,"complete",()=>{let{currentPageId:e}=this.app,t={},n={},o=[];if(Object.values(this.grid).forEach(i=>{t[i]=void 0,n[i]=this.app.getShape(i),o.push(i)}),t[this.shape.id]=this.shape,this.initialSiblings&&(t[this.shape.parentId]={children:[...this.initialSiblings,this.shape.id]},n[this.shape.parentId]={children:[...this.initialSiblings,...Object.values(this.grid)]}),o.length!==1)return{id:"grid",before:{document:{pages:{[e]:{shapes:t}},pageStates:{[e]:{selectedIds:[],hoveredId:void 0}}}},after:{document:{pages:{[e]:{shapes:n}},pageStates:{[e]:{selectedIds:o,hoveredId:void 0}}}}}});d(this,"getClone",(e,t)=>{let n=C(f({},this.shape),{id:Mr.Utils.uniqueId(),point:e});return t||n.type==="sticky"&&(n.text=""),n});var n;this.shape=this.app.getShape(t),this.grid["0_0"]=this.shape.id,this.bounds=this.app.getShapeBounds(t),this.initialSelectedIds=[...this.app.selectedIds],this.shape.parentId!==this.app.currentPageId&&(this.initialSiblings=(n=this.app.getShape(this.shape.parentId).children)==null?void 0:n.filter(o=>o!==this.shape.id))}};var Ar=class extends ze{constructor(e,t,n){super(e);d(this,"type","edit");d(this,"performanceMode");d(this,"initialShape");d(this,"initialSelectedIds");d(this,"currentPageId");d(this,"isCreating");d(this,"start",()=>{});d(this,"update",()=>{});d(this,"cancel",()=>({document:{pages:{[this.currentPageId]:{shapes:{[this.initialShape.id]:this.isCreating?void 0:this.initialShape}}},pageStates:{[this.currentPageId]:{selectedIds:this.isCreating?[]:this.initialSelectedIds,editingId:void 0}}}}));d(this,"complete",()=>{let e=this.app.getShape(this.initialShape.id);return{id:"edit",before:{document:{pages:{[this.currentPageId]:{shapes:{[this.initialShape.id]:this.isCreating?void 0:this.initialShape}}},pageStates:{[this.currentPageId]:{selectedIds:this.isCreating?[]:this.initialSelectedIds,editingId:void 0}}}},after:{document:{pages:{[this.currentPageId]:{shapes:{[this.initialShape.id]:e}}},pageStates:{[this.currentPageId]:{selectedIds:[e.id],editingId:void 0}}}}}});this.initialShape=e.getShape(t,e.currentPageId),this.currentPageId=e.currentPageId,this.isCreating=n,this.initialSelectedIds=[...e.selectedIds]}};var xu={["arrow"]:br,["brush"]:wr,["draw"]:Ir,["erase"]:Er,["handle"]:Cr,["rotate"]:kr,["transform"]:Dr,["transformSingle"]:Pr,["translate"]:Br,["grid"]:Lr,["edit"]:Ar},bl=s=>xu[s];var vo=require("@tldraw/core");var yl=require("@tldraw/core");var Ne=class extends Is{constructor(e){super();this.app=e;d(this,"type","select");d(this,"previous");d(this,"status","idle");d(this,"setStatus",e=>{this.status=e,this.app.setStatus(this.status)});d(this,"onEnter",()=>{this.setStatus("idle")});d(this,"onExit",()=>{this.setStatus("idle")});d(this,"onCancel",()=>{this.status==="idle"?this.app.selectTool("select"):this.setStatus("idle"),this.app.cancelSession()});d(this,"getNextChildIndex",()=>{let{shapes:e,appState:{currentPageId:t}}=this.app;return e.length===0?1:e.filter(n=>n.parentId===t).sort((n,o)=>o.childIndex-n.childIndex)[0].childIndex+1});d(this,"onPinchStart",()=>{this.app.cancelSession(),this.setStatus("pinching")});d(this,"onPinchEnd",()=>{yl.Utils.isMobileSafari()&&this.app.undoSelect(),this.setStatus("idle")});d(this,"onPinch",(e,t)=>{var n;this.status==="pinching"&&(isNaN(e.delta[0])||isNaN(e.delta[1])||(this.app.pinchZoom(e.point,e.delta,e.delta[2]),(n=this.onPointerMove)==null||n.call(this,e,t)))});d(this,"onKeyDown",e=>{if(e==="Escape"){this.onCancel();return}if(e==="Meta"||e==="Control"||e==="Alt"){this.app.updateSession();return}});d(this,"onKeyUp",e=>{if(e==="Meta"||e==="Control"||e==="Alt"){this.app.updateSession();return}});d(this,"onPointerMove",()=>{this.status==="creating"&&this.app.updateSession()});d(this,"onPointerUp",()=>{if(this.status==="creating"){this.app.completeSession();let{isToolLocked:e}=this.app.appState;e||this.app.selectTool("select")}this.setStatus("idle")})}};var pn=M(require("@tldraw/vec"));var ss=class extends Ne{constructor(){super(...arguments);d(this,"type","select");d(this,"pointedId");d(this,"selectedGroupId");d(this,"pointedHandleId");d(this,"pointedBoundsHandle");d(this,"pointedLinkHandleId");d(this,"onEnter",()=>{this.setStatus("idle")});d(this,"onExit",()=>{this.setStatus("idle")});d(this,"clonePaint",e=>{if(this.app.selectedIds.length===0)return;let t=this.app.selectedIds.map(c=>this.app.getShape(c)),n=vo.Utils.expandBounds(vo.Utils.getCommonBounds(t.map(I.getBounds)),16),o=vo.Utils.getBoundsCenter(n),i=[n.width,n.height],a=[o[0]+i[0]*Math.floor((e[0]+i[0]/2-o[0])/i[0]),o[1]+i[1]*Math.floor((e[1]+i[1]/2-o[1])/i[1])],l=vo.Utils.centerBounds(n,a);this.app.shapes.some(c=>I.getShapeUtil(c).hitTestBounds(c,l))||this.app.duplicate(this.app.selectedIds,a)});d(this,"getShapeClone",(e,t)=>{let n=this.app.getShape(e),o=I.getShapeUtil(n);if(o.canClone){let i=o.getBounds(n),a=o.getCenter(n),l={top:[i.minX,i.minY-(i.height+32)],right:[i.maxX+32,i.minY],bottom:[i.minX,i.maxY+32],left:[i.minX-(i.width+32),i.minY],topLeft:[i.minX-(i.width+32),i.minY-(i.height+32)],topRight:[i.maxX+32,i.minY-(i.height+32)],bottomLeft:[i.minX-(i.width+32),i.maxY+32],bottomRight:[i.maxX+32,i.maxY+32]}[t];if(n.rotation!==0){let p=pn.default.add(l,[i.width/2,i.height/2]),u=pn.default.rotWith(p,a,n.rotation||0);l=pn.default.sub(u,[i.width/2,i.height/2])}let r=vo.Utils.uniqueId(),c=C(f({},n),{id:r,point:l});return c.type==="sticky"&&(c.text=""),c}});d(this,"onCancel",()=>{this.app.session?this.app.cancelSession():this.selectNone(),this.setStatus("idle")});d(this,"onKeyDown",(e,t,n)=>{switch(e){case"Escape":{this.onCancel();break}case"Tab":{if(this.app.readOnly)return;if(!this.app.pageState.editingId&&this.status==="idle"&&this.app.selectedIds.length===1){let[o]=this.app.selectedIds,i=this.getShapeClone(o,"right");i&&(this.app.createShapes(i),this.setStatus("idle"),i.type==="sticky"&&(this.app.select(i.id),this.app.setEditingId(i.id)))}break}case"Meta":case"Control":case"Alt":{this.app.updateSession();break}case"Enter":{if(this.app.readOnly)return;let{pageState:o}=this.app;o.selectedIds.length===1&&!o.editingId&&(this.app.setEditingId(o.selectedIds[0]),n.preventDefault())}}});d(this,"onKeyUp",(e,t)=>{if(this.status==="clonePainting"&&!(t.altKey&&t.shiftKey)){this.setStatus("idle");return}if(e==="Meta"||e==="Control"||e==="Alt"){this.app.updateSession();return}});d(this,"onPointerMove",()=>{let{originPoint:e,currentPoint:t}=this.app;if(this.app.readOnly&&this.app.isPointing){this.app.session?this.app.updateSession():pn.default.dist(e,t)>3&&(this.app.startSession("brush"),this.setStatus("brushing"));return}switch(this.status){case"pointingBoundsHandle":{if(!this.pointedBoundsHandle)throw Error("No pointed bounds handle");if(pn.default.dist(e,t)>3){if(this.pointedBoundsHandle==="rotate")this.setStatus("rotating"),this.app.startSession("rotate");else if(this.pointedBoundsHandle==="center"||this.pointedBoundsHandle==="left"||this.pointedBoundsHandle==="right")this.setStatus("translating"),this.app.startSession("translate",!1,this.pointedBoundsHandle);else{this.setStatus("transforming");let n=this.app.selectedIds.flatMap(o=>I.getDocumentBranch(this.app.state,o,this.app.currentPageId));n.length===1?this.app.startSession("transformSingle",n[0],this.pointedBoundsHandle):this.app.startSession("transform",this.pointedBoundsHandle)}this.app.updateSession()}break}case"pointingCanvas":{pn.default.dist(e,t)>3&&(this.app.startSession("brush"),this.setStatus("brushing"));break}case"pointingClone":{pn.default.dist(e,t)>3&&(this.setStatus("translatingClone"),this.app.startSession("translate"),this.app.updateSession());break}case"pointingBounds":{pn.default.dist(e,t)>3&&(this.setStatus("translating"),this.app.startSession("translate"),this.app.updateSession());break}case"pointingHandle":{if(!this.pointedHandleId)throw Error("No pointed handle");if(pn.default.dist(e,t)>3){this.setStatus("translatingHandle");let n=this.app.getShape(this.app.selectedIds[0]);n&&(this.pointedHandleId==="bend"?(this.app.startSession("handle",n.id,this.pointedHandleId),this.app.updateSession()):(this.app.startSession("arrow",n.id,this.pointedHandleId,!1),this.app.updateSession()))}break}case"clonePainting":{this.clonePaint(t);break}default:if(this.app.session){this.app.updateSession();break}}});d(this,"onPointerDown",(e,t)=>{if(e.target==="canvas"&&this.status==="idle"){let{currentPoint:n}=this.app;if(e.spaceKey&&t.buttons===1)return;if(this.status==="idle"&&e.altKey&&e.shiftKey){this.setStatus("clonePainting"),this.clonePaint(n);return}if(!e.shiftKey){if(this.app.onShapeBlur(),e.altKey&&this.app.selectedIds.length>0){this.app.duplicate(this.app.selectedIds,n);return}this.selectNone()}this.setStatus("pointingCanvas")}});d(this,"onPointerUp",e=>{var t;if(this.status==="translatingClone"||this.status==="pointingClone"){this.pointedId&&(this.app.completeSession(),this.app.setEditingId(this.pointedId)),this.setStatus("idle"),this.pointedId=void 0;return}if(this.status==="pointingBounds"){if(e.target==="bounds")this.selectNone();else if(this.app.isSelected(e.target))e.shiftKey?this.pointedId!==e.target&&this.deselect(e.target):this.pointedId!==e.target&&this.app.selectedIds.length>1&&this.select(e.target);else if(this.pointedId===e.target){if(this.app.getShape(e.target).isLocked)return;e.shiftKey?this.pushSelect(e.target):this.select(e.target)}}this.setStatus("idle"),this.pointedBoundsHandle=void 0,this.pointedHandleId=void 0,this.pointedId=void 0,((t=this.app.session)==null?void 0:t.type)!=="edit"&&this.app.completeSession()});d(this,"onDoubleClickCanvas",()=>{!this.app.readOnly});d(this,"onPointShape",(e,t)=>{if(e.spaceKey&&t.buttons===1||this.app.getShape(e.target).isLocked)return;let{editingId:n,hoveredId:o}=this.app.pageState;if(n&&e.target!==n&&this.app.onShapeBlur(),(this.status==="idle"||this.status==="pointingBounds")&&e.metaKey&&e.shiftKey&&o){this.pointedId=o,this.app.isSelected(o)?this.deselect(o):(this.pushSelect(o),this.setStatus("pointingBounds"));return}if(this.status==="pointingBounds"){let{parentId:i}=this.app.getShape(e.target);this.pointedId=i===this.app.currentPageId?e.target:i;return}if(this.status==="idle"){if(this.setStatus("pointingBounds"),e.metaKey){e.shiftKey||this.selectNone(),this.app.startSession("brush"),this.setStatus("brushing");return}let i,{parentId:a}=this.app.getShape(e.target);a===this.app.currentPageId?(i=e.target,this.selectedGroupId=void 0):a===this.selectedGroupId?i=e.target:(i=a,this.selectedGroupId=void 0),this.app.isSelected(i)||(this.pointedId=i,e.shiftKey?this.pushSelect(i):this.select(i))}});d(this,"onDoubleClickShape",e=>{if(this.app.readOnly)return;let t=this.app.getShape(e.target);if(t.isLocked){this.app.select(e.target);return}I.getShapeUtil(t.type).canEdit&&(t.parentId===this.app.currentPageId||t.parentId===this.selectedGroupId)&&this.app.setEditingId(e.target),t.parentId!==this.app.currentPageId&&(this.selectedGroupId=t.parentId),this.app.select(e.target)});d(this,"onRightPointShape",e=>{this.app.isSelected(e.target)||this.app.select(e.target)});d(this,"onHoverShape",e=>{this.app.setHoveredId(e.target)});d(this,"onUnhoverShape",e=>{let{currentPageId:t}=this.app;requestAnimationFrame(()=>{t===this.app.currentPageId&&this.app.pageState.hoveredId===e.target&&this.app.setHoveredId(void 0)})});d(this,"onPointBounds",e=>{if(e.metaKey){e.shiftKey||this.selectNone(),this.app.startSession("brush"),this.setStatus("brushing");return}this.setStatus("pointingBounds")});d(this,"onRightPointBounds",(e,t)=>{t.stopPropagation()});d(this,"onReleaseBounds",()=>{(this.status==="translating"||this.status==="brushing")&&this.app.completeSession(),this.setStatus("idle")});d(this,"onPointBoundsHandle",e=>{this.pointedBoundsHandle=e.target,this.setStatus("pointingBoundsHandle")});d(this,"onDoubleClickBoundsHandle",e=>{switch(e.target){case"center":case"left":case"right":{this.app.select(...I.getLinkedShapeIds(this.app.state,this.app.currentPageId,e.target,e.shiftKey));break}default:if(this.app.selectedIds.length===1){this.app.resetBounds(this.app.selectedIds);let t=this.app.getShape(this.app.selectedIds[0]);"label"in t&&this.app.setEditingId(t.id)}}});d(this,"onReleaseBoundsHandle",()=>{this.setStatus("idle")});d(this,"onPointHandle",e=>{this.pointedHandleId=e.target,this.setStatus("pointingHandle")});d(this,"onDoubleClickHandle",e=>{if(e.target==="bend"){let{selectedIds:t}=this.app;if(t.length!==1)return;let n=this.app.getShape(t[0]);I.getShapeUtil(n.type).canEdit&&(n.parentId===this.app.currentPageId||n.parentId===this.selectedGroupId)&&this.app.setEditingId(n.id);return}this.app.toggleDecoration(e.target)});d(this,"onReleaseHandle",()=>{this.setStatus("idle")});d(this,"onShapeClone",e=>{let t=this.app.selectedIds[0],n=this.getShapeClone(t,e.target);e.target==="left"||e.target==="right"||e.target==="top"||e.target==="bottom"?n&&(this.app.createShapes(n),this.pointedId=n.id,this.setStatus("pointingClone")):(this.setStatus("gridCloning"),this.app.startSession("grid",t))})}deselect(e){this.app.select(...this.app.selectedIds.filter(t=>t!==e))}select(e){this.app.select(e)}pushSelect(e){let t=this.app.getShape(e);this.app.select(...this.app.selectedIds.filter(n=>n!==t.parentId),e)}selectNone(){this.app.selectNone()}};var wl=M(require("@tldraw/vec"));var is=class extends Ne{constructor(){super(...arguments);d(this,"type","erase");d(this,"status","idle");d(this,"onPointerDown",()=>{this.app.readOnly||this.status==="idle"&&this.setStatus("pointing")});d(this,"onPointerMove",e=>{if(!this.app.readOnly)switch(this.status){case"pointing":{wl.default.dist(e.origin,e.point)>3&&(this.app.startSession("erase"),this.app.updateSession(),this.setStatus("erasing"));break}case"erasing":this.app.updateSession()}});d(this,"onPointerUp",()=>{if(!this.app.readOnly){switch(this.status){case"pointing":{let e=this.app.shapes.filter(t=>!t.isLocked).filter(t=>this.app.getShapeUtil(t).hitTestPoint(t,this.app.currentPoint)).flatMap(t=>t.children?[t.id,...t.children]:t.id);this.app.delete(e);break}case"erasing":this.app.completeSession()}this.setStatus("idle")}});d(this,"onCancel",()=>{this.status==="idle"?this.previous?this.app.selectTool(this.previous):this.app.selectTool("select"):this.setStatus("idle"),this.app.cancelSession()})}};var xl=M(require("@tldraw/vec"));var rs=class extends Ne{constructor(){super(...arguments);d(this,"type","text");d(this,"stopEditingShape",()=>{this.setStatus("idle"),this.app.appState.isToolLocked||this.app.selectTool("select")});d(this,"onKeyUp",()=>{});d(this,"onKeyDown",()=>{});d(this,"onPointerDown",()=>{if(this.status==="creating"){this.stopEditingShape();return}if(this.status==="idle"){let{currentPoint:e,currentGrid:t,settings:{showGrid:n}}=this.app;this.app.createTextShapeAtPoint(n?xl.default.snap(e,t):e,void 0,!0),this.setStatus("creating");return}});d(this,"onPointerUp",()=>{});d(this,"onPointShape",e=>{if(this.app.readOnly)return;let t=this.app.getShape(e.target);t.type==="text"&&(this.setStatus("idle"),this.app.setEditingId(t.id))});d(this,"onShapeBlur",()=>{this.app.readOnly||this.stopEditingShape()})}};var Il=require("@tldraw/core");var as=class extends Ne{constructor(){super(...arguments);d(this,"type","draw");d(this,"lastShapeId");d(this,"onEnter",()=>{this.lastShapeId=void 0});d(this,"onCancel",()=>{switch(this.status){case"idle":{this.app.selectTool("select");break}default:{this.setStatus("idle");break}}this.app.cancelSession()});d(this,"onPointerDown",e=>{if(this.status!=="idle"||this.app.readOnly)return;let{currentPoint:t,appState:{currentPageId:n,currentStyle:o}}=this.app,i=this.lastShapeId&&this.app.getShape(this.lastShapeId);if(e.shiftKey&&i)this.app.startSession("draw",i.id),this.setStatus("extending");else{let a=this.getNextChildIndex(),l=Il.Utils.uniqueId(),r=ei.create({id:l,parentId:n,childIndex:a,point:t,style:f({},o)});this.lastShapeId=l,this.app.patchCreate([r]),this.app.startSession("draw",l),this.setStatus("creating")}});d(this,"onPointerMove",()=>{if(!this.app.readOnly)switch(this.status){case"extending":case"creating":this.app.updateSession()}});d(this,"onPointerUp",()=>{this.app.completeSession(),this.setStatus("idle")})}};var ii=require("@tldraw/core"),Cl=M(require("@tldraw/vec"));var ds=class extends Ne{constructor(){super(...arguments);d(this,"type","ellipse");d(this,"onPointerDown",()=>{if(this.app.readOnly||this.status!=="idle")return;let{currentPoint:e,currentGrid:t,settings:{showGrid:n},appState:{currentPageId:o,currentStyle:i}}=this.app,a=this.getNextChildIndex(),l=ii.Utils.uniqueId(),r=Qs.create({id:l,parentId:o,childIndex:a,point:n?Cl.default.snap(e,t):e,style:f({},i)});this.app.patchCreate([r]),this.app.startSession("transformSingle",r.id,ii.TLBoundsCorner.BottomRight,!0),this.setStatus("creating")})}};var ri=require("@tldraw/core"),vl=M(require("@tldraw/vec"));var ls=class extends Ne{constructor(){super(...arguments);d(this,"type","rectangle");d(this,"onPointerDown",()=>{if(this.app.readOnly||this.status!=="idle")return;let{currentPoint:e,currentGrid:t,settings:{showGrid:n},appState:{currentPageId:o,currentStyle:i}}=this.app,a=this.getNextChildIndex(),l=ri.Utils.uniqueId(),r=qs.create({id:l,parentId:o,childIndex:a,point:n?vl.default.snap(e,t):e,style:f({},i)});this.app.patchCreate([r]),this.app.startSession("transformSingle",r.id,ri.TLBoundsCorner.BottomRight,!0),this.setStatus("creating")})}};var ai=require("@tldraw/core"),kl=M(require("@tldraw/vec"));var cs=class extends Ne{constructor(){super(...arguments);d(this,"type","triangle");d(this,"onPointerDown",()=>{if(this.app.readOnly||this.status!=="idle")return;let{currentPoint:e,currentGrid:t,settings:{showGrid:n},appState:{currentPageId:o,currentStyle:i}}=this.app,a=this.getNextChildIndex(),l=ai.Utils.uniqueId(),r=Js.create({id:l,parentId:o,childIndex:a,point:n?kl.default.snap(e,t):e,style:f({},i)});this.app.patchCreate([r]),this.app.startSession("transformSingle",r.id,ai.TLBoundsCorner.BottomRight,!0),this.setStatus("creating")})}};var Dl=require("@tldraw/core"),Pl=M(require("@tldraw/vec"));var ps=class extends Ne{constructor(){super(...arguments);d(this,"type","line");d(this,"onPointerDown",()=>{if(this.app.readOnly||this.status!=="idle")return;let{currentPoint:e,currentGrid:t,settings:{showGrid:n},appState:{currentPageId:o,currentStyle:i}}=this.app,a=this.getNextChildIndex(),l=Dl.Utils.uniqueId(),r=Io.create({id:l,parentId:o,childIndex:a,point:n?Pl.default.snap(e,t):e,decorations:{start:void 0,end:void 0},style:f({},i)});this.app.patchCreate([r]),this.app.startSession("arrow",r.id,"end",!0),this.setStatus("creating")})}};var Bl=require("@tldraw/core"),El=M(require("@tldraw/vec"));var us=class extends Ne{constructor(){super(...arguments);d(this,"type","arrow");d(this,"onPointerDown",()=>{if(this.status!=="idle")return;let{currentPoint:e,currentGrid:t,settings:{showGrid:n},appState:{currentPageId:o,currentStyle:i}}=this.app,a=this.getNextChildIndex(),l=Bl.Utils.uniqueId(),r=Io.create({id:l,parentId:o,childIndex:a,point:n?El.default.snap(e,t):e,style:f({},i)});this.app.patchCreate([r]),this.app.startSession("arrow",r.id,"end",!0),this.setStatus("creating")})}};var Hr=M(require("@tldraw/vec")),Ml=require("@tldraw/core");var hs=class extends Ne{constructor(){super(...arguments);d(this,"type","sticky");d(this,"shapeId");d(this,"onPointerDown",()=>{if(!this.app.readOnly){if(this.status==="creating"){this.setStatus("idle"),this.app.appState.isToolLocked||this.app.selectTool("select");return}if(this.status==="idle"){let{currentPoint:e,currentGrid:t,settings:{showGrid:n},appState:{currentPageId:o,currentStyle:i}}=this.app,a=this.getNextChildIndex(),l=Ml.Utils.uniqueId();this.shapeId=l;let r=Jo.create({id:l,parentId:o,childIndex:a,point:n?Hr.default.snap(e,t):e,style:f({},i)}),c=Jo.getBounds(r);r.point=Hr.default.sub(r.point,[c.width/2,c.height/2]),this.app.patchCreate([r]),this.app.startSession("translate"),this.setStatus("creating")}}});d(this,"onPointerUp",()=>{this.app.readOnly||this.status==="creating"&&(this.setStatus("idle"),this.app.completeSession(),this.app.selectTool("select"),this.app.setEditingId(this.shapeId))})}};var Rl=M(require("zustand/vanilla")),Ll=M(require("zustand")),oo=M(require("idb-keyval"));var Al=require("@tldraw/core"),zr=class{constructor(e,t,n,o){d(this,"_idbId");d(this,"initialState");d(this,"store");d(this,"pointer",-1);d(this,"_state");d(this,"_status","loading");d(this,"stack",[]);d(this,"_snapshot");d(this,"useStore");d(this,"ready");d(this,"isPaused",!1);d(this,"persist",(e,t)=>{if(this._status==="ready"&&(this.onPersist&&this.onPersist(this._state,e,t),this._idbId))return oo.set(this._idbId,this._state).catch(n=>console.error(n))});d(this,"applyPatch",(e,t)=>{let n=this._state,o=Al.Utils.deepMerge(this._state,e),i=this.cleanup(o,n,e,t);return this.onStateWillChange&&this.onStateWillChange(i,t),this._state=i,this.store.setState(this._state,!0),this.onStateDidChange&&this.onStateDidChange(this._state,t),this});d(this,"migrate",e=>e);d(this,"cleanup",(e,t,n,o)=>e);d(this,"onStateWillChange");d(this,"onStateDidChange");d(this,"patchState",(e,t)=>(this.applyPatch(e,t),this.onPatch&&this.onPatch(this._state,e,t),this));d(this,"replaceState",(e,t)=>{let n=this.cleanup(e,this._state,e,t);return this.onStateWillChange&&this.onStateWillChange(n,"replace"),this._state=n,this.store.setState(this._state,!0),this.onStateDidChange&&this.onStateDidChange(this._state,"replace"),this});d(this,"setState",(e,t=e.id)=>(this.pointer<this.stack.length-1&&(this.stack=this.stack.slice(0,this.pointer+1)),this.stack.push(C(f({},e),{id:t})),this.pointer=this.stack.length-1,this.applyPatch(e.after,t),this.onCommand&&this.onCommand(this._state,e,t),this.persist(e.after,t),this));d(this,"onReady");d(this,"onPatch");d(this,"onCommand");d(this,"onPersist");d(this,"onReplace");d(this,"onReset");d(this,"onResetHistory");d(this,"onUndo");d(this,"onRedo");d(this,"reset",()=>(this.onStateWillChange&&this.onStateWillChange(this.initialState,"reset"),this._state=this.initialState,this.store.setState(this._state,!0),this.resetHistory(),this.persist({},"reset"),this.onStateDidChange&&this.onStateDidChange(this._state,"reset"),this.onReset&&this.onReset(this._state),this));d(this,"replaceHistory",(e,t=e.length-1)=>(this.stack=e,this.pointer=t,this.onReplace&&this.onReplace(this._state),this));d(this,"resetHistory",()=>(this.stack=[],this.pointer=-1,this.onResetHistory&&this.onResetHistory(this._state),this));d(this,"undo",()=>{if(!this.isPaused){if(!this.canUndo)return this;let e=this.stack[this.pointer];this.pointer--,this.applyPatch(e.before,"undo"),this.persist(e.before,"undo")}return this.onUndo&&this.onUndo(this._state),this});d(this,"redo",()=>{if(!this.isPaused){if(!this.canRedo)return this;this.pointer++;let e=this.stack[this.pointer];this.applyPatch(e.after,"redo"),this.persist(e.after,"undo")}return this.onRedo&&this.onRedo(this._state),this});d(this,"setSnapshot",()=>(this._snapshot=f({},this._state),this));d(this,"forceUpdate",()=>{this.store.setState(this._state,!0)});this._idbId=t,this._state=ct(e),this._snapshot=ct(e),this.initialState=ct(e),this.store=(0,Rl.default)(()=>this._state),this.useStore=(0,Ll.default)(this.store),this.ready=new Promise(i=>{let a="none";this._idbId?(a="restored",oo.get(this._idbId).then(l=>te(this,null,function*(){if(l){let r=l;if(n){let p=yield oo.get(t+"_version");p&&p<n&&(r=o?o(l,e,p):e,a="migrated")}yield oo.set(t+"_version",n||-1);let c=this._state.appState.isEmptyCanvas;r=this.migrate(r),this._state=ct(r),this._snapshot=ct(r),this._state.appState.isEmptyCanvas=c,this.store.setState(this._state,!0)}else yield oo.set(t+"_version",n||-1);this._status="ready",i(a)})).catch(l=>console.error(l))):(this._status="ready",i(a))}).then(i=>(this.onReady&&this.onReady(i),i))}pause(){this.isPaused=!0}resume(){this.isPaused=!1}get canUndo(){return this.pointer>-1}get canRedo(){return this.pointer<this.stack.length-1}get state(){return this._state}get status(){return this._status}get snapshot(){return this._snapshot}};var ms=require("idb-keyval"),Hl="tldraw_clipboard";function zl(){return te(this,null,function*(){return(0,ms.get)(Hl)})}function Fl(s){return te(this,null,function*(){return(0,ms.set)(Hl,s)})}var Fr=Tt.Utils.uniqueId(),Ze=class extends zr{constructor(e,t={}){super(Ze.defaultState,e,Ze.version,(n,o,i)=>Sn(C(f({},o),{document:C(f(f({},o.document),n.document),{version:i})}),Ze.version));d(this,"callbacks",{});d(this,"tools",{select:new ss(this),erase:new is(this),["text"]:new rs(this),["draw"]:new as(this),["ellipse"]:new ds(this),["rectangle"]:new ls(this),["triangle"]:new cs(this),["line"]:new ps(this),["arrow"]:new us(this),["sticky"]:new hs(this)});d(this,"currentTool",this.tools.select);d(this,"session");d(this,"readOnly",!1);d(this,"isDirty",!1);d(this,"isCreating",!1);d(this,"originPoint",[0,0]);d(this,"currentPoint",[0,0]);d(this,"previousPoint",[0,0]);d(this,"shiftKey",!1);d(this,"altKey",!1);d(this,"metaKey",!1);d(this,"ctrlKey",!1);d(this,"spaceKey",!1);d(this,"isPointing",!1);d(this,"isForcePanning",!1);d(this,"editingStartTime",-1);d(this,"fileSystemHandle",null);d(this,"viewport",Tt.Utils.getBoundsFromPoints([[0,0],[100,100]]));d(this,"rendererBounds",Tt.Utils.getBoundsFromPoints([[0,0],[100,100]]));d(this,"selectHistory",{stack:[[]],pointer:0});d(this,"clipboard");d(this,"rotationInfo",{selectedIds:[],center:[0,0]});d(this,"pasteInfo",{center:[0,0],offset:[0,0]});d(this,"migrate",e=>Sn(e,Ze.version));d(this,"onReady",()=>{var e,t;this.loadDocument(this.document),Oa().then(n=>{this.fileSystemHandle=n});try{this.patchState(C(f({},Sn(this.state,Ze.version)),{appState:{status:"idle"}}))}catch(n){console.error("The data appears to be corrupted. Resetting!",n),localStorage.setItem(this.document.id+"_corrupted",JSON.stringify(this.document)),this.patchState(C(f({},Ze.defaultState),{appState:C(f({},Ze.defaultState.appState),{status:"idle"})}))}(t=(e=this.callbacks).onMount)==null||t.call(e,this)});d(this,"cleanup",(e,t)=>{var a;let n=f({},e);n.document!==t.document&&Object.entries(n.document.pages).forEach(([l,r])=>{if(r===void 0){delete n.document.pages[l],delete n.document.pageStates[l];return}let c=t.document.pages[l],p={};if(!c||r.shapes!==c.shapes||r.bindings!==c.bindings){r.shapes=f({},r.shapes),r.bindings=f({},r.bindings);let h=new Set;Object.entries(r.shapes).forEach(([T,y])=>{var S;let b;y?b=y.parentId:(b=(S=c==null?void 0:c.shapes[T])==null?void 0:S.parentId,delete r.shapes[T]),r.id===n.appState.currentPageId&&(c==null?void 0:c.shapes[T])!==y&&(p[T]=y),b&&b!==l&&r.shapes[b]!==void 0&&h.add(r.shapes[b])}),Object.keys(r.bindings).forEach(T=>{r.bindings[T]||delete r.bindings[T]}),n.document.pages[l]=r;let m=I.getRelatedBindings(n,Object.keys(p),l),g=new Set;m.forEach(T=>{if(!r.bindings[T.id])return;let y=r.shapes[T.toId],b=r.shapes[T.fromId];if(!(y&&b)){delete n.document.pages[l].bindings[T.id];return}if(g.has(b))return;let S=I.updateArrowBindings(r,b);if(g.add(b),S){let w=f(f({},b),S);r.shapes[b.id]=w}}),h.forEach(T=>{if(!T)throw Error("no group!");let y=T.children.filter(S=>r.shapes[S]!==void 0),b=Tt.Utils.getCommonBounds(y.map(S=>r.shapes[S]).filter(Boolean).map(S=>I.getRotatedBounds(S)));r.shapes[T.id]=C(f({},T),{point:[b.minX,b.minY],size:[b.width,b.height],children:y})})}let u=f({},n.document.pageStates[l]);u.brush||delete u.brush,u.hoveredId&&!r.shapes[u.hoveredId]&&delete u.hoveredId,u.bindingId&&!r.bindings[u.bindingId]&&(I.warn(`Could not find the binding of ${l}`),delete u.bindingId),u.editingId&&!r.shapes[u.editingId]&&(I.warn("Could not find the editing shape!"),delete u.editingId),n.document.pageStates[l]=u}),Object.keys((a=n.document.assets)!=null?a:{}).forEach(l=>{var r,c;((r=n.document.assets)==null?void 0:r[l])||(c=n.document.assets)==null||delete c[l]});let o=n.appState.currentPageId,i=n.document.pageStates[o];if(n.room&&n.room!==t.room){let l=C(f({},n.room),{users:f({},n.room.users)});t.room&&Object.values(t.room.users).filter(Boolean).forEach(r=>{l.users[r.id]===void 0&&delete l.users[r.id]}),n.room=l}return n.room&&(n.room.users[n.room.userId]=C(f({},n.room.users[n.room.userId]),{point:this.currentPoint,selectedIds:i.selectedIds})),this.readOnly&&(n.document.pages=t.document.pages),n});d(this,"broadcastPatch",(e,t)=>{var c,p,u,h,m,g,T,y,b;let n={},o={},i={},a=(u=(p=(c=e==null?void 0:e.document)==null?void 0:c.pages)==null?void 0:p[this.currentPageId])==null?void 0:u.shapes,l=(g=(m=(h=e==null?void 0:e.document)==null?void 0:h.pages)==null?void 0:m[this.currentPageId])==null?void 0:g.bindings,r=(T=e==null?void 0:e.document)==null?void 0:T.assets;a&&Object.keys(a).forEach(S=>{n[S]=this.getShape(S,this.currentPageId)}),l&&Object.keys(l).forEach(S=>{o[S]=this.getBinding(S,this.currentPageId)}),r&&Object.keys(r).forEach(S=>{i[S]=this.document.assets[S]}),(b=(y=this.callbacks).onChangePage)==null||b.call(y,this,n,o,i,t)});d(this,"onPatch",(e,t,n)=>{var o,i,a,l,r,c;(this.callbacks.onChangePage&&((i=(o=t==null?void 0:t.document)==null?void 0:o.pages)==null?void 0:i[this.currentPageId])||((a=t==null?void 0:t.document)==null?void 0:a.assets))&&(((l=t==null?void 0:t.document)==null?void 0:l.assets)||this.session&&this.session.type!=="brush"&&this.session.type!=="erase"&&this.session.type!=="draw")&&this.broadcastPatch(t,!1),(c=(r=this.callbacks).onPatch)==null||c.call(r,this,t,n)});d(this,"onCommand",(e,t,n)=>{var o,i;this.clearSelectHistory(),this.isDirty=!0,(i=(o=this.callbacks).onCommand)==null||i.call(o,this,t,n)});d(this,"onReplace",()=>{this.clearSelectHistory(),this.isDirty=!1});d(this,"onUndo",()=>{var e,t;this.rotationInfo.selectedIds=[...this.selectedIds],(t=(e=this.callbacks).onUndo)==null||t.call(e,this)});d(this,"onRedo",()=>{var e,t;this.rotationInfo.selectedIds=[...this.selectedIds],(t=(e=this.callbacks).onRedo)==null||t.call(e,this)});d(this,"onPersist",(e,t)=>{var n,o;(o=(n=this.callbacks).onPersist)==null||o.call(n,this),this.broadcastPatch(t,!0)});d(this,"prevSelectedIds",this.selectedIds);d(this,"onStateDidChange",(e,t)=>{var n,o,i,a;(o=(n=this.callbacks).onChange)==null||o.call(n,this,t),this.room&&this.selectedIds!==this.prevSelectedIds&&((a=(i=this.callbacks).onChangePresence)==null||a.call(i,this,C(f({},this.room.users[this.room.userId]),{selectedIds:this.selectedIds,session:!!this.session})),this.prevSelectedIds=this.selectedIds)});d(this,"justSent",!1);d(this,"prevShapes",this.page.shapes);d(this,"prevBindings",this.page.bindings);d(this,"prevAssets",this.document.assets);d(this,"getReservedContent",(e,t=this.currentPageId)=>{let{bindings:n}=this.document.pages[t],o={},i={},a=Object.values(n),l=new Map(a.map(m=>[m.toId,m])),r=new Map(a.map(m=>[m.fromId,m])),c=[l,r],p=[];this.session&&e.forEach(m=>p.push(m)),this.pageState.editingId&&p.push(this.pageState.editingId);let u=new Set(p),h=new Set;for(;p.length>0;){let m=p.pop();if(!m)break;if(h.has(m))continue;h.add(m);let g=this.getShape(m);o[m]=g,g.parentId!==t&&p.push(g.parentId),g.children&&p.push(...g.children),c.map(T=>T.get(g.id)).filter(Boolean).forEach(T=>{i[T.id]=T,p.push(T.toId,T.fromId)})}return{reservedShapes:o,reservedBindings:i,strongReservedShapeIds:u}});d(this,"replacePageContent",(e,t,n,o=this.currentPageId)=>{if(this.justSent)return this.justSent=!1,this;let i=this.document.pages[this.currentPageId];return Object.values(e).forEach(a=>{a.parentId!==o&&!(i.shapes[a.parentId]||e[a.parentId])&&(console.warn("Added a shape without a parent on the page"),a.parentId=o)}),this.useStore.setState(a=>{let{hoveredId:l,editingId:r,bindingId:c,selectedIds:p}=a.document.pageStates[o],u=[...p],h=r&&a.document.pages[this.currentPageId].shapes[r];h&&u.push(h.id);let{reservedShapes:m,reservedBindings:g,strongReservedShapeIds:T}=this.getReservedContent(u,this.currentPageId);Object.values(m).filter(B=>!("text"in B)).forEach(B=>{let k=e[B.id];if(!!k){if(!(B.type==="arrow"||T.has(B.id))){e[B.id]=k;return}"decorations"in k&&"decorations"in B&&(e[B.id]=C(f({},B),{decorations:k.decorations})),B.style=k.style}}),this.prevShapes=e,this.prevBindings=t,this.prevAssets=n;let y=f(f({},e),m);h&&(y[h.id]=h);let b=f(f({},t),g),S=f({},n),w=C(f({},a),{document:C(f({},a.document),{pages:{[o]:C(f({},a.document.pages[o]),{shapes:y,bindings:b})},assets:S,pageStates:C(f({},a.document.pageStates),{[o]:C(f({},a.document.pageStates[o]),{selectedIds:p.filter(B=>y[B]!==void 0),hoveredId:l?y[l]===void 0?void 0:l:void 0,editingId:r,bindingId:c?b[c]===void 0?void 0:c:void 0})})})}),D=w.document.pages[o],E=I.getRelatedBindings(w,Object.keys(y),o),x=new Set;return E.forEach(B=>{if(!D.bindings[B.id])return;let k=D.shapes[B.fromId];if(x.has(k))return;let ee=I.updateArrowBindings(D,k);if(x.add(k),ee){let oe=f(f({},k),ee);D.shapes[k.id]=oe}}),Object.values(y).forEach(B=>{if(B.type!=="group")return;let k=B.children.filter(oe=>D.shapes[oe]!==void 0),ee=Tt.Utils.getCommonBounds(k.map(oe=>D.shapes[oe]).filter(Boolean).map(oe=>I.getRotatedBounds(oe)));D.shapes[B.id]=C(f({},B),{point:[ee.minX,ee.minY],size:[ee.width,ee.height],children:k})}),this.state.document=w.document,w},!0),this});d(this,"updateBounds",e=>{this.rendererBounds=e;let{point:t,zoom:n}=this.camera;this.updateViewport(t,n),!this.readOnly&&this.session&&this.session.update()});d(this,"updateViewport",(e,t)=>{let{width:n,height:o}=this.rendererBounds,[i,a]=he.Vec.sub(he.Vec.div([0,0],t),e),[l,r]=he.Vec.sub(he.Vec.div([n,o],t),e);this.viewport={minX:i,minY:a,maxX:l,maxY:r,height:l-i,width:r-a}});d(this,"setEditingId",(e,t=!1)=>{if(!this.readOnly){if(e)this.startSession("edit",e,t);else{if(!this.pageState.editingId)return;this.completeSession()}this.editingStartTime=performance.now(),this.patchState({document:{pageStates:{[this.currentPageId]:{editingId:e}}}},"set_editing_id")}});d(this,"setHoveredId",e=>{this.patchState({document:{pageStates:{[this.currentPageId]:{hoveredId:e}}}},"set_hovered_id")});d(this,"setSetting",(e,t)=>{if(this.session)return this;let n={settings:{[e]:typeof t=="function"?t(this.settings[e]):t}};return this.patchState(n,`settings:${e}`),this.persist(n),this});d(this,"toggleFocusMode",()=>{if(this.session)return this;let e={settings:{isFocusMode:!this.settings.isFocusMode}};return this.patchState(e,"settings:toggled_focus_mode"),this.persist(e),this});d(this,"togglePenMode",()=>{if(this.session)return this;let e={settings:{isPenMode:!this.settings.isPenMode}};return this.patchState(e,"settings:toggled_pen_mode"),this.persist(e),this});d(this,"toggleDarkMode",()=>{if(this.session)return this;let e={settings:{isDarkMode:!this.settings.isDarkMode}};return this.patchState(e,"settings:toggled_dark_mode"),this.persist(e),this});d(this,"toggleZoomSnap",()=>{if(this.session)return this;let e={settings:{isZoomSnap:!this.settings.isZoomSnap}};return this.patchState(e,"settings:toggled_zoom_snap"),this.persist(e),this});d(this,"toggleDebugMode",()=>{if(this.session)return this;let e={settings:{isDebugMode:!this.settings.isDebugMode}};return this.patchState(e,"settings:toggled_debug"),this.persist(e),this});d(this,"setMenuOpen",e=>{let t={appState:{isMenuOpen:e}};return this.patchState(t,"ui:toggled_menu_opened"),this.persist(t),this});d(this,"setIsLoading",e=>{let t={appState:{isLoading:e}};return this.patchState(t,"ui:toggled_is_loading"),this.persist(t),this});d(this,"setDisableAssets",e=>(this.patchState({appState:{disableAssets:e}},"ui:toggled_disable_images"),this));d(this,"toggleGrid",()=>{if(this.session)return this;let e={settings:{showGrid:!this.settings.showGrid}};return this.patchState(e,"settings:toggled_grid"),this.persist(e),this});d(this,"selectTool",e=>{if(this.readOnly||this.session)return this;this.isPointing=!1;let t=this.tools[e];return t===this.currentTool?(this.patchState({appState:{isToolLocked:!1}}),this):(this.currentTool.onExit(),t.previous=this.currentTool.type,this.currentTool=t,this.currentTool.onEnter(),this.patchState({appState:{activeTool:e,isToolLocked:!1}},`selected_tool:${e}`))});d(this,"toggleToolLock",()=>this.session?this:this.patchState({appState:{isToolLocked:!this.appState.isToolLocked}},"toggled_tool_lock"));d(this,"resetDocument",()=>{if(this.session)return this;this.session=void 0,this.pasteInfo.offset=[0,0],this.currentTool=this.tools.select;let e=Ze.defaultDocument;return e.pages.page.name="Page 1",this.resetHistory().clearSelectHistory().loadDocument(Ze.defaultDocument).persist({}),this});d(this,"updateUsers",(e,t=!1)=>{this.patchState({room:{users:Object.fromEntries(e.map(n=>[n.id,n]))}},t?"room:self:update":"room:user:update")});d(this,"removeUser",e=>{this.patchState({room:{users:{[e]:void 0}}})});d(this,"mergeDocument",e=>{if(this.document.id!==e.id)return this.replaceState(C(f({},Sn(C(f({},this.state),{document:e}),Ze.version)),{appState:C(f({},this.appState),{currentPageId:Object.keys(e.pages)[0]})})),this;let t=f({},this.document.pageStates),n=C(f({},this.appState),{currentPageId:e.pages[this.currentPageId]?this.currentPageId:Object.keys(e.pages)[0],pages:Object.values(e.pages).map((i,a)=>({id:i.id,name:i.name,childIndex:i.childIndex||a}))});this.resetHistory(),Object.keys(this.document.pages).forEach(i=>{e.pages[i]||(i===this.appState.currentPageId&&(this.cancelSession(),this.selectNone()),t[i]=void 0)}),this.session&&this.selectedIds.filter(i=>!e.pages[this.currentPageId].shapes[i]).forEach(i=>e.pages[this.currentPageId].shapes[i]=this.page.shapes[i]),Object.entries(t).forEach(([i,a])=>{a.selectedIds=a.selectedIds.filter(l=>!!e.pages[i].shapes[l])});let{editingId:o}=this.pageState;return o&&(e.pages[this.currentPageId].shapes[o]=this.page.shapes[o],t[this.currentPageId].selectedIds=[o]),this.replaceState(C(f({},Sn(C(f({},this.state),{document:C(f({},e),{pageStates:t})}),Ze.version)),{appState:n}),"merge")});d(this,"updateDocument",(e,t="updated_document")=>{let n=this.state,o=C(f({},n),{document:f({},n.document)});e.pages[this.currentPageId]||(o.appState=C(f({},n.appState),{currentPageId:Object.keys(e.pages)[0]}));let i=1;for(let a of Object.values(e.pages))a!==n.document.pages[a.id]&&(o.document.pages[a.id]=a,a.name||(o.document.pages[a.id].name=`Page ${i+1}`,i++));for(let a of Object.values(e.pageStates))if(a!==n.document.pageStates[a.id]){o.document.pageStates[a.id]=a;let l=e.pages[a.id],r=["bindingId","editingId","hoveredId","pointedId"];for(let c of r)l.shapes[c]||(a[c]=void 0);a.selectedIds=a.selectedIds.filter(c=>!!e.pages[l.id].shapes[c])}return this.replaceState(Sn(o,o.document.version||0),`${t}:${e.id}`)});d(this,"loadRoom",e=>(this.patchState({room:{id:e,userId:Fr,users:{[Fr]:{id:Fr,color:Li[Math.floor(Math.random()*Li.length)],point:[100,100],selectedIds:[],activeShapes:[]}}}}),this));d(this,"loadDocument",e=>{this.selectNone(),this.resetHistory(),this.clearSelectHistory(),this.session=void 0;let t=C(f({},Ze.defaultState),{settings:f({},this.state.settings),document:e,appState:C(f(f({},Ze.defaultState.appState),this.state.appState),{currentPageId:Object.keys(e.pages)[0],disableAssets:this.disableAssets})});this.replaceState(Sn(t,Ze.version),"loaded_document");let{point:n,zoom:o}=this.camera;return this.updateViewport(n,o),this});d(this,"newProject",()=>{!this.isLocal||(this.fileSystemHandle=null,this.resetDocument())});d(this,"saveProject",()=>te(this,null,function*(){if(!this.readOnly){try{let e=yield Ai(Sn(this.state,Ze.version).document,this.fileSystemHandle);this.fileSystemHandle=e,this.persist({}),this.isDirty=!1}catch(e){console.error(e.message)}return this}}));d(this,"saveProjectAs",()=>te(this,null,function*(){try{let e=yield Ai(this.document,null);this.fileSystemHandle=e,this.persist({}),this.isDirty=!1}catch(e){console.error(e.message)}return this}));d(this,"openProject",()=>te(this,null,function*(){if(!!this.isLocal)try{let e=yield Ua();if(!e)throw Error();let{fileHandle:t,document:n}=e;this.loadDocument(n),this.fileSystemHandle=t,this.zoomToFit(),this.persist({})}catch(e){console.error(e)}finally{this.persist({})}}));d(this,"openAsset",()=>te(this,null,function*(){if(!this.disableAssets)try{let e=yield Ga();if(!e)return;this.addMediaFromFile(e)}catch(e){console.error(e)}finally{this.persist({})}}));d(this,"signOut",()=>{});d(this,"getAppState",()=>this.appState);d(this,"getPage",(e=this.currentPageId)=>I.getPage(this.state,e||this.currentPageId));d(this,"getShapes",(e=this.currentPageId)=>I.getShapes(this.state,e||this.currentPageId));d(this,"getBindings",(e=this.currentPageId)=>I.getBindings(this.state,e||this.currentPageId));d(this,"getShape",(e,t=this.currentPageId)=>I.getShape(this.state,e,t));d(this,"getShapeBounds",(e,t=this.currentPageId)=>I.getBounds(this.getShape(e,t)));d(this,"getBinding",(e,t=this.currentPageId)=>I.getBinding(this.state,e,t));d(this,"getPageState",(e=this.currentPageId)=>I.getPageState(this.state,e||this.currentPageId));d(this,"getPagePoint",(e,t=this.currentPageId)=>{let{camera:n}=this.getPageState(t);return he.Vec.sub(he.Vec.div(e,n.zoom),n.point)});d(this,"createPage",(e,t)=>{if(this.readOnly)return this;let{width:n,height:o}=this.rendererBounds;return this.setState(qd(this,[-n/2,-o/2],e,t))});d(this,"changePage",e=>this.setState(Yd(this,e)));d(this,"movePage",(e,t)=>this.readOnly?this:this.setState(ll(this,e,t)));d(this,"renamePage",(e,t)=>this.readOnly?this:this.setState(cl(this,e,t)));d(this,"duplicatePage",e=>this.readOnly?this:this.setState(ol(this,e)));d(this,"deletePage",e=>this.readOnly?this:Object.values(this.document.pages).length<=1?this:this.setState(Jd(this,e||this.currentPageId)));d(this,"cut",(e=this.selectedIds,t)=>(t==null||t.preventDefault(),this.copy(e,t),this.readOnly||this.delete(e),this));d(this,"copy",(e=this.selectedIds,t)=>{var i;t==null||t.preventDefault(),this.clipboard=this.getContent(e);let o=`<tldraw>${JSON.stringify(f({type:"tldr/clipboard"},this.clipboard))}</tldraw>`;return Fl(o),t&&((i=t.clipboardData)==null||i.setData("text/html",o)),navigator.clipboard&&window.ClipboardItem&&navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([o],{type:"text/html"})})]),this.pasteInfo.offset=[0,0],this.pasteInfo.center=[0,0],this});d(this,"paste",(e,t)=>te(this,null,function*(){var a,l;if(this.readOnly)return;let n=r=>te(this,null,function*(){let c=document.createElement("div");c.innerHTML=r;let p=c.firstChild;p.style.setProperty("background-color","transparent");let u=yield I.getImageForSvg(p,"svg",{scale:1,quality:1});if(u){let h=new File([u],"image.svg");this.addMediaFromFile(h)}else o(r)}),o=r=>{let c=Tt.Utils.uniqueId();this.createShapes({id:c,type:"text",parentId:this.appState.currentPageId,text:I.normalizeText(r.trim()),point:this.getPagePoint(this.centerPoint,this.currentPageId),style:f({},this.appState.currentStyle)}),this.select(c)},i=r=>{var c;try{let p=(c=r.match(/<tldraw>(.*)<\/tldraw>/))==null?void 0:c[1];if(!p)return;let u=JSON.parse(p);if(u.type==="tldr/clipboard"){this.insertContent(u,{point:e,select:!0});return}else throw Error("Not tldraw data!")}catch(p){o(r);return}};if(t!==void 0){let r=(l=(a=t.clipboardData)==null?void 0:a.items)!=null?l:[];for(let c in r){let p=r[c];if(p.type==="text/html"){p.getAsString(u=>te(this,null,function*(){i(u)}));return}else switch(p.kind){case"string":{p.getAsString(u=>te(this,null,function*(){u.startsWith("<svg")?n(u):o(u)}));return}case"file":{let u=p.getAsFile();if(u){this.addMediaFromFile(u);return}}}}}if(zl().then(r=>{r&&i(r)}),navigator.clipboard){let r="read"in navigator.clipboard?yield navigator.clipboard.read():[];if(r.length===0)return;try{for(let c of r){let p=yield c.getType("text/png");if(p){let m=new File([p],"image.png");this.addMediaFromFile(m);return}let u=yield c.getType("image/svg+xml");if(u){let m=new File([u],"image.svg");this.addMediaFromFile(m);return}let h=yield c.getType("text/plain");if(h){let m=yield h.text();m.trim(),m.startsWith("<svg")?n(m):o(m);return}}}catch(c){}}else I.warn("This browser does not support the Clipboard API!"),this.clipboard&&this.insertContent(this.clipboard,{point:e,select:!0});return this}));d(this,"getSvg",(...n)=>te(this,[...n],function*(e=this.selectedIds.length?this.selectedIds:Object.keys(this.page.shapes),t={}){if(e.length===0)return;let o=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=document.createElementNS("http://www.w3.org/2000/svg","defs"),a=document.createElementNS("http://www.w3.org/2000/svg","style");if(typeof window!="undefined"&&window.focus(),t.includeFonts)try{let{fonts:p}=yield fetch(Ze.assetSrc,{mode:"no-cors"}).then(u=>u.json());a.textContent=`
          @font-face {
            font-family: 'Caveat Brush';
            src: url(data:application/x-font-woff;charset=utf-8;base64,${p.caveat}) format('woff');
            font-weight: 500;
            font-style: normal;
          }
          @font-face {
            font-family: 'Source Code Pro';
            src: url(data:application/x-font-woff;charset=utf-8;base64,${p.source_code_pro}) format('woff');
            font-weight: 500;
            font-style: normal;
          }
          @font-face {
            font-family: 'Source Sans Pro';
            src: url(data:application/x-font-woff;charset=utf-8;base64,${p.source_sans_pro}) format('woff');
            font-weight: 500;
            font-style: normal;
          }
          @font-face {
            font-family: 'Crimson Pro';
            src: url(data:application/x-font-woff;charset=utf-8;base64,${p.crimson_pro}) format('woff');
            font-weight: 500;
            font-style: normal;
          }
          `}catch(p){I.warn("Could not find tldraw-assets.json file.")}else a.textContent="@import url('https://fonts.googleapis.com/css2?family=Caveat+Brush&family=Source+Code+Pro&family=Source+Sans+Pro&family=Crimson+Pro&display=block');";i.append(a),o.append(i);let l=e.map(p=>this.getShape(p,this.currentPageId)).sort((p,u)=>p.childIndex-u.childIndex),r=Tt.Utils.getCommonBounds(l.map(I.getRotatedBounds)),c=p=>{let u=I.getShapeUtil(p),h=u.getBounds(p),m=u.getSvgElement(p,this.settings.isDarkMode);if(!!m)return p.type==="image"?m.setAttribute("xlink:href",this.document.assets[p.assetId].src):p.type==="video"&&m.setAttribute("xlink:href",this.serializeVideo(p.id)),m.setAttribute("transform",`translate(${(16+p.point[0]-r.minX).toFixed(2)}, ${(16+p.point[1]-r.minY).toFixed(2)}) rotate(${((p.rotation||0)*180/Math.PI).toFixed(2)}, ${(h.width/2).toFixed(2)}, ${(h.height/2).toFixed(2)})`),m};return l.forEach(p=>{var h;if((h=p.children)==null?void 0:h.length){let m=document.createElementNS("http://www.w3.org/2000/svg","g");p.children.forEach(g=>{let T=this.getShape(g,this.currentPageId),y=c(T);y&&m.append(y)}),o.append(m);return}let u=c(p);u&&o.append(u)}),o.setAttribute("viewBox",[0,0,r.width+16*2,r.height+16*2].join(" ")),o.setAttribute("width",r.width.toString()),o.setAttribute("height",r.height.toString()),t.transparentBackground?o.style.setProperty("background-color","transparent"):o.style.setProperty("background-color",this.settings.isDarkMode?"#212529":"rgb(248, 249, 250)"),o.querySelectorAll(".tl-fill-hitarea, .tl-stroke-hitarea, .tl-binding-indicator").forEach(p=>p.remove()),o}));d(this,"copySvg",(...t)=>te(this,[...t],function*(e=this.selectedIds.length?this.selectedIds:Object.keys(this.page.shapes)){if(e.length===0)return;let n=yield this.getSvg(e);if(!n)return;let o=I.getSvgString(n,1);this.clipboard=this.getContent(e);let i=JSON.stringify(f({type:"tldr/clipboard"},this.clipboard));return navigator.clipboard&&window.ClipboardItem&&navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([i],{type:"text/html"}),"text/plain":new Blob([o],{type:"text/plain"})})]),o}));d(this,"getContent",e=>{let t=this.getPage(this.currentPageId);if(e&&e.length===0||(e||(e=this.selectedIds),e.length===0&&(e=Object.keys(t.shapes)),e.length===0))return;let n=e.map(l=>t.shapes[l]).flatMap(l=>{var r;return[l,...((r=l.children)!=null?r:[]).map(c=>t.shapes[c])]}).map(ct),o=new Set(n.map(l=>l.id));n.forEach(l=>{l.parentId===this.currentPageId&&(l.parentId="currentPageId")});let i=Object.values(t.bindings).filter(l=>{if(o.has(l.fromId)||o.has(l.toId))return!0;if(o.has(l.fromId)){let c=n.find(p=>p.id===l.fromId).handles;c&&Object.values(c).forEach(p=>{p.bindingId===l.id&&(p.bindingId=void 0)})}if(o.has(l.toId)){let c=n.find(p=>p.id===l.toId).handles;c&&Object.values(c).forEach(p=>{p.bindingId===l.id&&(p.bindingId=void 0)})}return!1}).map(ct),a=[...new Set(n.map(l=>{if(!!l.assetId)return this.document.assets[l.assetId]}).filter(Boolean).map(ct))];return{shapes:n,bindings:i,assets:a}});d(this,"copyJson",(e=this.selectedIds)=>{let t=this.getContent(e);return t&&I.copyStringToClipboard(JSON.stringify(t)),this});d(this,"exportJson",(e=this.selectedIds)=>{let t=this.getContent(e);if(t){let n=new Blob([JSON.stringify(t)],{type:"application/json"}),o=URL.createObjectURL(n),i=document.createElement("a");i.href=o,i.download="export.json",i.click()}return this});d(this,"insertContent",(e,t={})=>this.setState(Tl(this,e,t),"insert_content"));d(this,"getImage",(...n)=>te(this,[...n],function*(e="png",t={}){let{ids:o=this.selectedIds.length?this.selectedIds:Object.keys(this.page.shapes)}=t,i=yield this.getSvg(o,{includeFonts:e!=="svg",transparentBackground:e==="png"});if(!i)return;if(e==="svg"){let l=I.getSvgString(i,1);return new Blob([l],{type:"image/svg+xml"})}let a=yield I.getImageForSvg(i,e,t);if(!!a)return a}));d(this,"copyImage",(...n)=>te(this,[...n],function*(e="png",t={}){if(e==="svg"){this.copySvg(t.ids);return}if(!(navigator.clipboard&&window.ClipboardItem)){console.warn("Sorry, your browser does not support copying images.");return}let o=yield this.getImage(e,t);!o||navigator.clipboard.write([new ClipboardItem({[o.type]:o})])}));d(this,"exportImage",(...n)=>te(this,[...n],function*(e="png",t={}){var l;let{pageId:o=this.currentPageId}=t,i=yield this.getImage(e,t);if(!i)return;let a=(l=this.document.pages[o].name)!=null?l:"export";if(this.callbacks.onExport)this.callbacks.onExport(this,{name:a,type:e,blob:i});else{let r=URL.createObjectURL(i),c=document.createElement("a");c.href=r,c.download=`${a}.${e}`,c.click()}}));d(this,"setCamera",(e,t,n)=>(this.updateViewport(e,t),this.patchState({document:{pageStates:{[this.currentPageId]:{camera:{point:e,zoom:t}}}}},n),this));d(this,"resetCamera",()=>this.setCamera(this.centerPoint,1,"reset_camera"));d(this,"pan",e=>{let{camera:t}=this.pageState;return this.setCamera(he.Vec.toFixed(he.Vec.sub(t.point,e)),t.zoom,"panned")});d(this,"pinchZoom",(e,t,n)=>{let{camera:o}=this.pageState,i=he.Vec.sub(o.point,he.Vec.div(t,o.zoom)),a=n,l=he.Vec.sub(he.Vec.div(e,o.zoom),i),r=he.Vec.sub(he.Vec.div(e,a),i);return this.setCamera(he.Vec.toFixed(he.Vec.add(i,he.Vec.sub(r,l))),a,"pinch_zoomed")});d(this,"zoomTo",(e,t=this.centerPoint)=>{let{zoom:n,point:o}=this.camera,i=he.Vec.sub(he.Vec.div(t,n),o),a=he.Vec.sub(he.Vec.div(t,e),o);return this.setCamera(he.Vec.toFixed(he.Vec.add(o,he.Vec.sub(a,i))),e,"zoomed_camera")});d(this,"zoomIn",()=>{let e=Math.round(this.camera.zoom*100/25),t=I.getCameraZoom((e+1)*.25);return this.zoomTo(t)});d(this,"zoomOut",()=>{let e=Math.round(this.camera.zoom*100/25),t=I.getCameraZoom((e-1)*.25);return this.zoomTo(t)});d(this,"zoomToFit",()=>{let{shapes:e,pageState:{camera:t}}=this;if(e.length===0)return this;let{rendererBounds:n}=this,o=Tt.Utils.getCommonBounds(e.map(I.getBounds)),i=I.getCameraZoom(Math.min((n.width-128)/o.width,(n.height-128)/o.height));i=t.zoom===i||t.zoom<1?Math.min(1,i):i;let a=(n.width-o.width*i)/2/i,l=(n.height-o.height*i)/2/i;return this.setCamera(he.Vec.toFixed(he.Vec.sub([a,l],[o.minX,o.minY])),i,"zoomed_to_fit")});d(this,"zoomToSelection",()=>{if(this.selectedIds.length===0)return this;let{rendererBounds:e}=this,t=I.getSelectedBounds(this.state),n=I.getCameraZoom(Math.min((e.width-128)/t.width,(e.height-128)/t.height));n=this.camera.zoom===n||this.camera.zoom<1?Math.min(1,n):n;let o=(e.width-t.width*n)/2/n,i=(e.height-t.height*n)/2/n;return this.setCamera(he.Vec.toFixed(he.Vec.sub([o,i],[t.minX,t.minY])),n,"zoomed_to_selection")});d(this,"zoomToContent",()=>{let e=this.shapes,t=this.pageState;if(e.length===0)return this;let{rendererBounds:n}=this,{zoom:o}=t.camera,i=Tt.Utils.getCommonBounds(e.map(I.getBounds)),a=(n.width-i.width*o)/2/o,l=(n.height-i.height*o)/2/o;return this.setCamera(he.Vec.toFixed(he.Vec.sub([a,l],[i.minX,i.minY])),this.camera.zoom,"zoomed_to_content")});d(this,"resetZoom",()=>this.zoomTo(1));d(this,"zoomBy",Tt.Utils.throttle((e,t)=>{let{zoom:n}=this.camera,o=I.getCameraZoom(n-e*n);return this.zoomTo(o,t)},16));d(this,"clearSelectHistory",()=>(this.selectHistory.pointer=0,this.selectHistory.stack=[this.selectedIds],this));d(this,"addToSelectHistory",e=>(this.selectHistory.pointer<this.selectHistory.stack.length&&(this.selectHistory.stack=this.selectHistory.stack.slice(0,this.selectHistory.pointer+1)),this.selectHistory.pointer++,this.selectHistory.stack.push(e),this));d(this,"setSelectedIds",(e,t=!1)=>{let n=t?[...this.pageState.selectedIds,...e]:[...e];return this.patchState({appState:{activeTool:"select"},document:{pageStates:{[this.currentPageId]:{selectedIds:n}}}},"selected")});d(this,"undoSelect",()=>(this.selectHistory.pointer>0&&(this.selectHistory.pointer--,this.setSelectedIds(this.selectHistory.stack[this.selectHistory.pointer])),this));d(this,"redoSelect",()=>(this.selectHistory.pointer<this.selectHistory.stack.length-1&&(this.selectHistory.pointer++,this.setSelectedIds(this.selectHistory.stack[this.selectHistory.pointer])),this));d(this,"select",(...e)=>(e.forEach(t=>{if(!this.page.shapes[t])throw Error(`That shape does not exist on page ${this.currentPageId}`)}),this.setSelectedIds(e),this.addToSelectHistory(e),this));d(this,"selectAll",(e=this.currentPageId)=>this.session?this:(this.setSelectedIds(Object.values(this.document.pages[e].shapes).filter(t=>t.parentId===e).map(t=>t.id)),this.addToSelectHistory(this.selectedIds),this.selectTool("select"),this));d(this,"selectNone",()=>(this.setSelectedIds([]),this.addToSelectHistory(this.selectedIds),this));d(this,"startSession",(e,...t)=>{var i,a;if(this.readOnly&&e!=="brush")return this;this.session&&(I.warn(`Already in a session! (${this.session.constructor.name})`),this.cancelSession());let n=bl(e);this.session=new n(this,...t);let o=this.session.start();return o&&this.patchState(o,`session:start_${this.session.constructor.name}`),(a=(i=this.callbacks).onSessionStart)==null||a.call(i,this,this.session.constructor.name),this});d(this,"updateSession",()=>{let{session:e}=this;if(!e)return this;let t=e.update();return t?this.patchState(t,`session:${e==null?void 0:e.constructor.name}`):this});d(this,"cancelSession",()=>{var n,o;let{session:e}=this;if(!e)return this;this.session=void 0;let t=e.cancel();return t&&this.patchState(t,`session:cancel:${e.constructor.name}`),this.setEditingId(),(o=(n=this.callbacks).onSessionEnd)==null||o.call(n,this,e.constructor.name),this});d(this,"completeSession",()=>{var n,o,i,a,l,r,c,p,u;let{session:e}=this;if(!e)return this;this.session=void 0;let t=e.complete();if(t===void 0)this.isCreating=!1,this.patchState({appState:{status:"idle"},document:{pageStates:{[this.currentPageId]:{editingId:void 0,bindingId:void 0,hoveredId:void 0}}}},`session:complete:${e.constructor.name}`);else if("after"in t){if(this.isCreating){if(t.before={appState:C(f({},t.before.appState),{status:"idle"}),document:{pages:{[this.currentPageId]:{shapes:Object.fromEntries(this.selectedIds.map(h=>[h,void 0]))}},pageStates:{[this.currentPageId]:{selectedIds:[],editingId:null,bindingId:null,hoveredId:null}}}},this.appState.isToolLocked){let h=((i=(o=(n=t.after)==null?void 0:n.document)==null?void 0:o.pageStates)==null?void 0:i[this.currentPageId])||{};h.selectedIds=[]}this.isCreating=!1}t.after.appState=C(f({},t.after.appState),{status:"idle"}),t.after.document=C(f({},t.after.document),{pageStates:C(f({},(a=t.after.document)==null?void 0:a.pageStates),{[this.currentPageId]:C(f({},(((l=t.after.document)==null?void 0:l.pageStates)||{})[this.currentPageId]),{editingId:null})})}),this.setState(t,`session:complete:${e.constructor.name}`)}else this.patchState(C(f({},t),{appState:C(f({},t.appState),{status:"idle"}),document:C(f({},t.document),{pageStates:{[this.currentPageId]:C(f({},(c=(r=t.document)==null?void 0:r.pageStates)==null?void 0:c[this.currentPageId]),{editingId:null})}})}),`session:complete:${e.constructor.name}`);return(u=(p=this.callbacks).onSessionEnd)==null||u.call(p,this,e.constructor.name),this});d(this,"createShapes",(...e)=>e.length===0?this:this.create(e.map(t=>I.getShapeUtil(t.type).create(f({parentId:this.currentPageId},t)))));d(this,"updateShapes",(...e)=>{let t=this.document.pages[this.currentPageId].shapes,n=e.filter(o=>t[o.id]);return n.length===0?this:this.setState(Tr(this,n,this.currentPageId),"updated_shapes")});d(this,"create",(e=[],t=[])=>e.length===0?this:this.setState(cr(this,e,t)));d(this,"patchCreate",(e=[],t=[])=>e.length===0?this:this.patchState(cr(this,e,t).after));d(this,"delete",(e=this.selectedIds)=>{var n,o;if(e.length===0)return this;let t=pr(this,e);if(this.callbacks.onAssetDelete&&((n=t.before.document)==null?void 0:n.assets)&&((o=t.after.document)==null?void 0:o.assets)){let i=Object.keys(t.before.document.assets).filter(r=>!!t.before.document.assets[r]),a=Object.keys(t.after.document.assets).filter(r=>!!t.after.document.assets[r]);i.filter(r=>!a.includes(r)).forEach(r=>this.callbacks.onAssetDelete(this,r))}return this.setState(t)});d(this,"deleteAll",()=>(this.selectAll(),this.delete(),this));d(this,"style",(e,t=this.selectedIds)=>this.setState(hl(this,t,e)));d(this,"align",(e,t=this.selectedIds)=>t.length<2?this:this.setState(_d(this,t,e)));d(this,"distribute",(e,t=this.selectedIds)=>t.length<3?this:this.setState(tl(this,t,e)));d(this,"stretch",(e,t=this.selectedIds)=>t.length<2?this:this.setState(ul(this,t,e)));d(this,"flipHorizontal",(e=this.selectedIds)=>e.length===0?this:this.setState(hr(this,e,"horizontal")));d(this,"flipVertical",(e=this.selectedIds)=>e.length===0?this:this.setState(hr(this,e,"vertical")));d(this,"moveToPage",(e,t=this.currentPageId,n=this.selectedIds)=>{if(n.length===0)return this;let{rendererBounds:o}=this;return this.setState(dl(this,n,o,t,e)),this});d(this,"moveToBack",(e=this.selectedIds)=>e.length===0?this:this.setState(Qo(this,e,"toBack")));d(this,"moveBackward",(e=this.selectedIds)=>e.length===0?this:this.setState(Qo(this,e,"backward")));d(this,"moveForward",(e=this.selectedIds)=>e.length===0?this:this.setState(Qo(this,e,"forward")));d(this,"moveToFront",(e=this.selectedIds)=>e.length===0?this:this.setState(Qo(this,e,"toFront")));d(this,"nudge",(e,t=!1,n=this.selectedIds)=>{if(n.length===0)return this;let o=t?this.settings.showGrid?this.currentGrid*4:10:this.settings.showGrid?this.currentGrid:1;return this.setState(gl(this,n,he.Vec.mul(e,o)))});d(this,"duplicate",(e=this.selectedIds,t)=>this.readOnly?this:e.length===0?this:this.setState(sl(this,e,t)));d(this,"resetBounds",(e=this.selectedIds)=>{let t=gr(this,e,this.currentPageId);return this.setState(gr(this,e,this.currentPageId),t.id)});d(this,"toggleHidden",(e=this.selectedIds)=>e.length===0?this:this.setState(oi(this,e,"isHidden")));d(this,"toggleLocked",(e=this.selectedIds)=>e.length===0?this:this.setState(oi(this,e,"isLocked")));d(this,"toggleAspectRatioLocked",(e=this.selectedIds)=>e.length===0?this:this.setState(oi(this,e,"isAspectRatioLocked")));d(this,"toggleDecoration",(e,t=this.selectedIds)=>t.length===0||!(e==="start"||e==="end")?this:this.setState(ml(this,t,e)));d(this,"setShapeProps",(e,t=this.selectedIds)=>this.setState(Sl(this,t,e)));d(this,"rotate",(e=Math.PI*-.5,t=this.selectedIds)=>{if(t.length===0)return this;let n=pl(this,t,e);return n?this.setState(n):this});d(this,"group",(e=this.selectedIds,t=Tt.Utils.uniqueId(),n=this.currentPageId)=>{if(this.readOnly)return this;if(e.length===1&&this.getShape(e[0],n).type==="group")return this.ungroup(e,n);if(e.length<2)return this;let o=rl(this,e,t,n);return o?this.setState(o):this});d(this,"ungroup",(e=this.selectedIds,t=this.currentPageId)=>{if(this.readOnly)return this;let n=e.map(i=>this.getShape(i,t)).filter(i=>i.type==="group");if(n.length===0)return this;let o=fl(this,e,n,t);return o?this.setState(o):this});d(this,"cancel",()=>{var e,t;return(t=(e=this.currentTool).onCancel)==null||t.call(e),this});d(this,"addMediaFromFile",(n,...o)=>te(this,[n,...o],function*(e,t=this.centerPoint){this.setIsLoading(!0);let i=Tt.Utils.uniqueId(),a=this.getPagePoint(t),l=e.name.match(/\.[0-9a-z]+$/i);if(!l)throw Error("No extension");let r=Ps.includes(l[0].toLowerCase()),c=Bs.includes(l[0].toLowerCase());if(!(r||c))throw Error("Wrong extension");let p=r?"image":"video",u=r?"image":"video",h;try{if(this.callbacks.onAssetCreate){let m=yield this.callbacks.onAssetCreate(this,e,i);if(!m)throw Error("Asset creation callback returned false");h=m}else h=yield Va(e);if(typeof h=="string"){let m=[0,0];if(r){if(l[0]==".svg"){let y,b=yield $a(e),S=this.getViewboxFromSVG(b);S&&(y=S.split(" "),m[0]=parseFloat(y[2]),m[1]=parseFloat(y[3]))}he.Vec.isEqual(m,[0,0])&&(m=yield Na(h))}else m=yield Ka(h);let g=Object.values(this.document.assets).find(y=>y.type===u&&y.src===h),T;if(g)T=g.id;else{T=Tt.Utils.uniqueId();let y={id:T,type:u,name:e.name,src:h,size:m};this.patchState({document:{assets:{[T]:y}}})}this.createImageOrVideoShapeAtPoint(i,p,a,m,T)}}catch(m){return console.warn(m),this.setIsLoading(!1),this}return this.setIsLoading(!1),this}));d(this,"getViewboxFromSVG",e=>{let t=/.*?viewBox=["'](-?[\d.]+[, ]+-?[\d.]+[, ][\d.]+[, ][\d.]+)["']/;if(typeof e=="string"){let n=e.match(t);return n&&n.length>=2?n[1]:null}return console.warn("could not get viewbox from svg string"),this.setIsLoading(!1),null});d(this,"onKeyDown",(e,t,n)=>{var o,i;switch(n.key){case"/":{if(this.status==="idle"&&!this.pageState.editingId){let{shiftKey:a,metaKey:l,altKey:r,ctrlKey:c,spaceKey:p}=this;this.onPointerDown({target:"canvas",pointerId:0,origin:t.point,point:t.point,delta:[0,0],pressure:.5,shiftKey:a,ctrlKey:c,metaKey:l,altKey:r,spaceKey:p},{shiftKey:a,altKey:r,ctrlKey:c,pointerId:0,clientX:t.point[0],clientY:t.point[1]})}break}case"Escape":{this.cancel();break}case"Meta":{this.metaKey=!0;break}case"Alt":{this.altKey=!0;break}case"Control":{this.ctrlKey=!0;break}case" ":{this.isForcePanning=!0,this.spaceKey=!0;break}}return(i=(o=this.currentTool).onKeyDown)==null||i.call(o,e,t,n),this});d(this,"onKeyUp",(e,t,n)=>{var o,i;if(!!t){switch(n.key){case"/":{let{currentPoint:a,shiftKey:l,metaKey:r,altKey:c,ctrlKey:p,spaceKey:u}=this;this.onPointerUp({target:"canvas",pointerId:0,origin:a,point:a,delta:[0,0],pressure:.5,shiftKey:l,ctrlKey:p,metaKey:r,altKey:c,spaceKey:u},{shiftKey:l,altKey:c,ctrlKey:p,pointerId:0,clientX:a[0],clientY:a[1]});break}case"Meta":{this.metaKey=!1;break}case"Alt":{this.altKey=!1;break}case"Control":{this.ctrlKey=!1;break}case" ":{this.isForcePanning=!1,this.spaceKey=!1;break}}(i=(o=this.currentTool).onKeyUp)==null||i.call(o,e,t,n)}});d(this,"refreshBoundingBoxes",()=>{let e=this.shapes.map(n=>[n.id,f({point:[...n.point]},"label"in n&&{label:""})]),t=this.shapes.map(n=>[n.id,f({point:[...n.point]},"label"in n&&{label:n.label})]);Za(),this.patchState({document:{pages:{[this.currentPageId]:{shapes:Object.fromEntries(e)}}}}),this.patchState({document:{pages:{[this.currentPageId]:{shapes:Object.fromEntries(t)}}}})});d(this,"onDragOver",e=>{e.preventDefault()});d(this,"onDrop",e=>te(this,null,function*(){var t;if(e.preventDefault(),this.disableAssets)return this;if((t=e.dataTransfer.files)==null?void 0:t.length){let n=e.dataTransfer.files[0];this.addMediaFromFile(n,[e.clientX,e.clientY])}return this}));d(this,"onPinchStart",(e,t)=>{var n,o;(o=(n=this.currentTool).onPinchStart)==null||o.call(n,e,t)});d(this,"onPinchEnd",(e,t)=>{var n,o;return(o=(n=this.currentTool).onPinchEnd)==null?void 0:o.call(n,e,t)});d(this,"onPinch",(e,t)=>{var n,o;return(o=(n=this.currentTool).onPinch)==null?void 0:o.call(n,e,t)});d(this,"onPan",(e,t)=>{if(this.appState.status==="pinching")return;let n=he.Vec.div(e.delta,this.camera.zoom),o=this.camera.point,i=he.Vec.sub(o,n);he.Vec.isEqual(i,o)||(this.pan(n),this.isForcePanning||this.onPointerMove(e,t))});d(this,"onZoom",(e,t)=>{if(this.state.appState.status!=="idle")return;let n=e.delta[2]/50;this.zoomBy(n,e.point),this.onPointerMove(e,t)});d(this,"updateInputs",e=>{this.currentPoint=this.getPagePoint(e.point).concat(e.pressure),this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.ctrlKey=e.ctrlKey,this.metaKey=e.metaKey});d(this,"onPointerMove",(e,t)=>{var n,o,i,a,l;if(this.previousPoint=this.currentPoint,this.updateInputs(e,t),this.isForcePanning&&this.isPointing){(n=this.onPan)==null||n.call(this,C(f({},e),{delta:he.Vec.neg(e.delta)}),t);return}if((i=(o=this.currentTool).onPointerMove)==null||i.call(o,e,t),this.state.room){let{users:r,userId:c}=this.state.room;(l=(a=this.callbacks).onChangePresence)==null||l.call(a,this,C(f({},r[c]),{point:this.getPagePoint(e.point),session:!!this.session}))}});d(this,"onPointerDown",(e,t)=>{var n,o;if(t.buttons===4)this.isForcePanning=!0;else if(this.isPointing)return;this.isPointing=!0,this.originPoint=this.getPagePoint(e.point).concat(e.pressure),this.updateInputs(e,t),!this.isForcePanning&&((o=(n=this.currentTool).onPointerDown)==null||o.call(n,e,t))});d(this,"onPointerUp",(e,t)=>{var n,o;this.isPointing=!1,this.shiftKey||(this.isForcePanning=!1),this.updateInputs(e,t),(o=(n=this.currentTool).onPointerUp)==null||o.call(n,e,t)});d(this,"onPointCanvas",(e,t)=>{var n,o;this.updateInputs(e,t),(o=(n=this.currentTool).onPointCanvas)==null||o.call(n,e,t)});d(this,"onDoubleClickCanvas",(e,t)=>{var n,o;this.updateInputs(e,t),(o=(n=this.currentTool).onDoubleClickCanvas)==null||o.call(n,e,t)});d(this,"onRightPointCanvas",(e,t)=>{var n,o;this.updateInputs(e,t),(o=(n=this.currentTool).onRightPointCanvas)==null||o.call(n,e,t)});d(this,"onDragCanvas",(e,t)=>{var n,o;this.updateInputs(e,t),(o=(n=this.currentTool).onDragCanvas)==null||o.call(n,e,t)});d(this,"onReleaseCanvas",(e,t)=>{var n,o;this.updateInputs(e,t),(o=(n=this.currentTool).onReleaseCanvas)==null||o.call(n,e,t)});d(this,"onPointShape",(e,t)=>{var n,o;this.originPoint=this.getPagePoint(e.point).concat(e.pressure),this.updateInputs(e,t),(o=(n=this.currentTool).onPointShape)==null||o.call(n,e,t)});d(this,"onReleaseShape",(e,t)=>{var n,o;this.updateInputs(e,t),(o=(n=this.currentTool).onReleaseShape)==null||o.call(n,e,t)});d(this,"onDoubleClickShape",(e,t)=>{var n,o;this.originPoint=this.getPagePoint(e.point).concat(e.pressure),this.updateInputs(e,t),(o=(n=this.currentTool).onDoubleClickShape)==null||o.call(n,e,t)});d(this,"onRightPointShape",(e,t)=>{var n,o;this.originPoint=this.getPagePoint(e.point).concat(e.pressure),this.updateInputs(e,t),(o=(n=this.currentTool).onRightPointShape)==null||o.call(n,e,t)});d(this,"onDragShape",(e,t)=>{var n,o;this.updateInputs(e,t),(o=(n=this.currentTool).onDragShape)==null||o.call(n,e,t)});d(this,"onHoverShape",(e,t)=>{var n,o;this.updateInputs(e,t),(o=(n=this.currentTool).onHoverShape)==null||o.call(n,e,t)});d(this,"onUnhoverShape",(e,t)=>{var n,o;this.updateInputs(e,t),(o=(n=this.currentTool).onUnhoverShape)==null||o.call(n,e,t)});d(this,"onPointBounds",(e,t)=>{var n,o;this.originPoint=this.getPagePoint(e.point).concat(e.pressure),this.updateInputs(e,t),(o=(n=this.currentTool).onPointBounds)==null||o.call(n,e,t)});d(this,"onDoubleClickBounds",(e,t)=>{var n,o;this.originPoint=this.getPagePoint(e.point).concat(e.pressure),this.updateInputs(e,t),(o=(n=this.currentTool).onDoubleClickBounds)==null||o.call(n,e,t)});d(this,"onRightPointBounds",(e,t)=>{var n,o;this.originPoint=this.getPagePoint(e.point).concat(e.pressure),this.updateInputs(e,t),(o=(n=this.currentTool).onRightPointBounds)==null||o.call(n,e,t)});d(this,"onDragBounds",(e,t)=>{var n,o;this.updateInputs(e,t),(o=(n=this.currentTool).onDragBounds)==null||o.call(n,e,t)});d(this,"onHoverBounds",(e,t)=>{var n,o;this.updateInputs(e,t),(o=(n=this.currentTool).onHoverBounds)==null||o.call(n,e,t)});d(this,"onUnhoverBounds",(e,t)=>{var n,o;this.updateInputs(e,t),(o=(n=this.currentTool).onUnhoverBounds)==null||o.call(n,e,t)});d(this,"onReleaseBounds",(e,t)=>{var n,o;this.updateInputs(e,t),(o=(n=this.currentTool).onReleaseBounds)==null||o.call(n,e,t)});d(this,"onPointBoundsHandle",(e,t)=>{var n,o;this.originPoint=this.getPagePoint(e.point).concat(e.pressure),this.updateInputs(e,t),(o=(n=this.currentTool).onPointBoundsHandle)==null||o.call(n,e,t)});d(this,"onDoubleClickBoundsHandle",(e,t)=>{var o,i;if(this.originPoint=this.getPagePoint(e.point).concat(e.pressure),this.updateInputs(e,t),(i=(o=this.currentTool).onDoubleClickBoundsHandle)==null||i.call(o,e,t),this.selectedIds.length!==1)return;let n=this.getShape(this.selectedIds[0]);if(n.type==="image"||n.type==="video"){let a=this.document.assets[n.assetId],l=I.getShapeUtil(n),r=l.getCenter(n),c=l.getCenter(C(f({},n),{size:a.size})),p=he.Vec.sub(c,r);this.updateShapes({id:n.id,point:he.Vec.sub(n.point,p),size:a.size})}});d(this,"onRightPointBoundsHandle",(e,t)=>{var n,o;this.originPoint=this.getPagePoint(e.point).concat(e.pressure),this.updateInputs(e,t),(o=(n=this.currentTool).onRightPointBoundsHandle)==null||o.call(n,e,t)});d(this,"onDragBoundsHandle",(e,t)=>{var n,o;this.updateInputs(e,t),(o=(n=this.currentTool).onDragBoundsHandle)==null||o.call(n,e,t)});d(this,"onHoverBoundsHandle",(e,t)=>{var n,o;this.updateInputs(e,t),(o=(n=this.currentTool).onHoverBoundsHandle)==null||o.call(n,e,t)});d(this,"onUnhoverBoundsHandle",(e,t)=>{var n,o;this.updateInputs(e,t),(o=(n=this.currentTool).onUnhoverBoundsHandle)==null||o.call(n,e,t)});d(this,"onReleaseBoundsHandle",(e,t)=>{var n,o;this.updateInputs(e,t),(o=(n=this.currentTool).onReleaseBoundsHandle)==null||o.call(n,e,t)});d(this,"onPointHandle",(e,t)=>{var n,o;this.originPoint=this.getPagePoint(e.point).concat(e.pressure),this.updateInputs(e,t),(o=(n=this.currentTool).onPointHandle)==null||o.call(n,e,t)});d(this,"onDoubleClickHandle",(e,t)=>{var n,o;this.originPoint=this.getPagePoint(e.point).concat(e.pressure),this.updateInputs(e,t),(o=(n=this.currentTool).onDoubleClickHandle)==null||o.call(n,e,t)});d(this,"onRightPointHandle",(e,t)=>{var n,o;this.originPoint=this.getPagePoint(e.point).concat(e.pressure),this.updateInputs(e,t),(o=(n=this.currentTool).onRightPointHandle)==null||o.call(n,e,t)});d(this,"onDragHandle",(e,t)=>{var n,o;this.updateInputs(e,t),(o=(n=this.currentTool).onDragHandle)==null||o.call(n,e,t)});d(this,"onHoverHandle",(e,t)=>{var n,o;this.updateInputs(e,t),(o=(n=this.currentTool).onHoverHandle)==null||o.call(n,e,t)});d(this,"onUnhoverHandle",(e,t)=>{var n,o;this.updateInputs(e,t),(o=(n=this.currentTool).onUnhoverHandle)==null||o.call(n,e,t)});d(this,"onReleaseHandle",(e,t)=>{var n,o;this.updateInputs(e,t),(o=(n=this.currentTool).onReleaseHandle)==null||o.call(n,e,t)});d(this,"onShapeChange",e=>{let t=this.document.pages[this.currentPageId].shapes,n=f(f({},t[e.id]),e),o=Tr(this,[n],this.currentPageId).after;return this.patchState(o,"patched_shapes")});d(this,"onShapeBlur",()=>{var n,o;if(performance.now()-this.editingStartTime<50)return;let{editingId:e}=this.pageState,{isToolLocked:t}=this.getAppState();if(e){let i=this.getShape(e);this.setEditingId(),i.type==="text"&&(i.text.trim().length<=0?this.patchState(pr(this,[e]).after,"delete_empty_text"):t||this.select(e))}(o=(n=this.currentTool).onShapeBlur)==null||o.call(n)});d(this,"onShapeClone",(e,t)=>{var n,o;this.originPoint=this.getPagePoint(e.point).concat(e.pressure),this.updateInputs(e,t),(o=(n=this.currentTool).onShapeClone)==null||o.call(n,e,t)});d(this,"onRenderCountChange",e=>{let t=this.getAppState();t.isEmptyCanvas&&e.length>0?this.patchState({appState:{isEmptyCanvas:!1}},"empty_canvas:false"):!t.isEmptyCanvas&&e.length<=0&&this.patchState({appState:{isEmptyCanvas:!0}},"empty_canvas:true")});d(this,"onError",()=>{});d(this,"getShapeUtil",I.getShapeUtil);this.callbacks=t}setStatus(e){return this.patchState({appState:{status:e}},`set_status:${e}`)}get isMenuOpen(){return this.appState.isMenuOpen}get isLoading(){return this.appState.isLoading}get disableAssets(){return this.appState.disableAssets}get history(){return this.stack.slice(0,this.pointer+1)}set history(e){this.replaceHistory(e)}get document(){return this.state.document}get settings(){return this.state.settings}get appState(){return this.state.appState}get currentPageId(){return this.state.appState.currentPageId}get page(){return this.state.document.pages[this.currentPageId]}get shapes(){return Object.values(this.page.shapes)}get bindings(){return Object.values(this.page.bindings)}get assets(){return Object.values(this.document.assets)}get pageState(){return this.state.document.pageStates[this.currentPageId]}get camera(){return this.pageState.camera}get zoom(){return this.pageState.camera.zoom}get selectedIds(){return this.pageState.selectedIds}createTextShapeAtPoint(e,t,n){let{shapes:o,appState:{currentPageId:i,currentStyle:a}}=this,l=o.length===0?1:o.filter(u=>u.parentId===i).sort((u,h)=>h.childIndex-u.childIndex)[0].childIndex+1,r=ln["text"],c=r.create({id:t||Tt.Utils.uniqueId(),parentId:i,childIndex:l,point:e,style:f({},a)}),p=r.getBounds(c);return c.point=he.Vec.sub(c.point,[p.width/2,p.height/2]),n?this.patchCreate([I.getShapeUtil(c.type).create(c)]):this.createShapes(c),this.setEditingId(c.id,!0),this}createImageOrVideoShapeAtPoint(e,t,n,o,i){let{shapes:a,appState:{currentPageId:l,currentStyle:r}}=this,c=a.length===0?1:a.filter(m=>m.parentId===l).sort((m,g)=>g.childIndex-m.childIndex)[0].childIndex+1,p=ln[t];if(o[0]>this.viewport.width){let m=o[1]/o[0];o[0]=this.viewport.width-128/this.camera.zoom*2,o[1]=o[0]*m,(o[1]<32||o[1]<32)&&(o[1]=32,o[0]=o[1]/m)}else if(o[1]>this.viewport.height){let m=o[0]/o[1];o[1]=this.viewport.height-128/this.camera.zoom*2,o[0]=o[1]*m,(o[1]<32||o[1]<32)&&(o[0]=32,o[1]=o[0]/m)}let u=p.create({id:e,parentId:l,childIndex:c,point:n,size:o,style:f({},r),assetId:i}),h=p.getBounds(u);return u.point=he.Vec.sub(u.point,[h.width/2,h.height/2]),this.createShapes(u),this}isSelected(e){return this.selectedIds.includes(e)}serializeVideo(e){let t=document.getElementById(e+"_video");if(t){let n=document.createElement("canvas");return n.width=t.videoWidth,n.height=t.videoHeight,n.getContext("2d").drawImage(t,0,0),n.toDataURL("image/png")}else throw new Error("Video with id "+e+" not found")}serializeImage(e){let t=document.getElementById(e+"_image");if(t){let n=document.createElement("canvas");return n.width=t.width,n.height=t.height,n.getContext("2d").drawImage(t,0,0),n.toDataURL("image/png")}else throw new Error("Image with id "+e+" not found")}patchAssets(e){this.document.assets=f(f({},this.document.assets),e)}get room(){return this.state.room}get isLocal(){return this.state.room===void 0||this.state.room.id==="local"}get status(){return this.appState.status}get currentUser(){if(!!this.state.room)return this.state.room.users[this.state.room.userId]}get centerPoint(){let{width:e,height:t}=this.rendererBounds;return he.Vec.toFixed([e/2,t/2])}get currentGrid(){let{zoom:e}=this.camera;return e<.15?8*16:e<1?8*4:8*1}},un=Ze;d(un,"version",15.4),d(un,"defaultDocument",{id:"doc",name:"New Document",version:Ze.version,pages:{page:{id:"page",name:"Page 1",childIndex:1,shapes:{},bindings:{}}},pageStates:{page:{id:"page",selectedIds:[],camera:{point:[0,0],zoom:1}}},assets:{}}),d(un,"defaultState",{settings:{isCadSelectMode:!1,isPenMode:!1,isDarkMode:!1,isZoomSnap:!1,isFocusMode:!1,isSnapping:!1,isDebugMode:!1,isReadonlyMode:!1,keepStyleMenuOpen:!1,nudgeDistanceLarge:16,nudgeDistanceSmall:1,showRotateHandles:!0,showBindingHandles:!0,showCloneHandles:!1,showGrid:!1,language:"en",dockPosition:"bottom"},appState:{status:"idle",activeTool:"select",hoveredId:void 0,currentPageId:"page",currentStyle:Qe,isToolLocked:!1,isMenuOpen:!1,isEmptyCanvas:!1,eraseLine:[],snapLines:[],isLoading:!1,disableAssets:!1},document:Ze.defaultDocument}),d(un,"assetSrc","tldraw-assets.json");var lq={select:ss,erase:is,["text"]:rs,["draw"]:as,["ellipse"]:ds,["rectangle"]:ls,["triangle"]:cs,["line"]:ps,["arrow"]:us,["sticky"]:hs};var li=M(require("react")),ae=require("react-hotkeys-hook");function Ol(s){let e=le(),t=li.useCallback((r=!1)=>{let c=s.current;return r&&(e.isMenuOpen||e.settings.keepStyleMenuOpen)?!0:c&&(document.activeElement===c||c.contains(document.activeElement))},[s]);li.useEffect(()=>{if(!e)return;let r=u=>{if(!!t(!0)){if(e.readOnly){e.copy(void 0,u);return}e.cut(void 0,u)}},c=u=>{!t(!0)||e.copy(void 0,u)},p=u=>{!t(!0)||e.readOnly||e.paste(void 0,u)};return document.addEventListener("cut",r),document.addEventListener("copy",c),document.addEventListener("paste",p),()=>{document.removeEventListener("cut",r),document.removeEventListener("copy",c),document.removeEventListener("paste",p)}},[e]),(0,ae.useHotkeys)("v,1",()=>{!t(!0)||e.selectTool("select")},[e,s.current]),(0,ae.useHotkeys)("d,p,2",()=>{!t(!0)||e.selectTool("draw")},void 0,[e]),(0,ae.useHotkeys)("e,3",()=>{!t(!0)||e.selectTool("erase")},void 0,[e]),(0,ae.useHotkeys)("r,4",()=>{!t(!0)||e.selectTool("rectangle")},void 0,[e]),(0,ae.useHotkeys)("o,5",()=>{!t(!0)||e.selectTool("ellipse")},void 0,[e]),(0,ae.useHotkeys)("g,6",()=>{!t()||e.selectTool("triangle")},void 0,[e]),(0,ae.useHotkeys)("l,7",()=>{!t(!0)||e.selectTool("line")},void 0,[e]),(0,ae.useHotkeys)("a,8",()=>{!t(!0)||e.selectTool("arrow")},void 0,[e]),(0,ae.useHotkeys)("t,9",()=>{!t(!0)||e.selectTool("text")},void 0,[e]),(0,ae.useHotkeys)("s,0",()=>{!t(!0)||e.selectTool("sticky")},void 0,[e]),(0,ae.useHotkeys)("ctrl+shift+d,\u2318+shift+d",r=>{!t(!0)||(e.toggleDarkMode(),r.preventDefault())},void 0,[e]),(0,ae.useHotkeys)("ctrl+.,\u2318+.",()=>{!t(!0)||e.toggleFocusMode()},void 0,[e]),(0,ae.useHotkeys)("ctrl+shift+g,\u2318+shift+g",()=>{!t(!0)||e.toggleGrid()},void 0,[e]);let{onNewProject:n,onOpenProject:o,onSaveProject:i,onSaveProjectAs:a,onOpenMedia:l}=ci();(0,ae.useHotkeys)("ctrl+n,\u2318+n",r=>{!t()||n(r)},void 0,[e]),(0,ae.useHotkeys)("ctrl+s,\u2318+s",r=>{!t()||i(r)},void 0,[e]),(0,ae.useHotkeys)("ctrl+shift+s,\u2318+shift+s",r=>{!t()||a(r)},void 0,[e]),(0,ae.useHotkeys)("ctrl+o,\u2318+o",r=>{!t()||o(r)},void 0,[e]),(0,ae.useHotkeys)("ctrl+u,\u2318+u",r=>{!t()||l(r)},void 0,[e]),(0,ae.useHotkeys)("\u2318+z,ctrl+z",r=>{r.preventDefault(),!!t(!0)&&(e.session?e.cancelSession():e.undo())},void 0,[e]),(0,ae.useHotkeys)("ctrl+shift+z,\u2318+shift+z",()=>{!t(!0)||(e.session?e.cancelSession():e.redo())},void 0,[e]),(0,ae.useHotkeys)("\u2318+u,ctrl+u",()=>{!t()||e.undoSelect()},void 0,[e]),(0,ae.useHotkeys)("ctrl+shift-u,\u2318+shift+u",()=>{!t()||e.redoSelect()},void 0,[e]),(0,ae.useHotkeys)("ctrl+=,\u2318+=,ctrl+num_subtract,\u2318+num_subtract",r=>{!t(!0)||(e.zoomIn(),r.preventDefault())},void 0,[e]),(0,ae.useHotkeys)("ctrl+-,\u2318+-,ctrl+num_add,\u2318+num_add",r=>{!t(!0)||(e.zoomOut(),r.preventDefault())},void 0,[e]),(0,ae.useHotkeys)("shift+0,ctrl+numpad_0,\u2318+numpad_0",()=>{!t(!0)||e.resetZoom()},void 0,[e]),(0,ae.useHotkeys)("shift+1",()=>{!t(!0)||e.zoomToFit()},void 0,[e]),(0,ae.useHotkeys)("shift+2",()=>{!t(!0)||e.zoomToSelection()},void 0,[e]),(0,ae.useHotkeys)("ctrl+d,\u2318+d",r=>{!t()||(e.duplicate(),r.preventDefault())},void 0,[e]),(0,ae.useHotkeys)("shift+h",()=>{!t(!0)||e.flipHorizontal()},void 0,[e]),(0,ae.useHotkeys)("shift+v",()=>{!t(!0)||e.flipVertical()},void 0,[e]),(0,ae.useHotkeys)("escape",()=>{!t(!0)||e.cancel()},void 0,[e]),(0,ae.useHotkeys)("backspace,del",()=>{!t()||e.delete()},void 0,[e]),(0,ae.useHotkeys)("\u2318+a,ctrl+a",()=>{!t(!0)||e.selectAll()},void 0,[e]),(0,ae.useHotkeys)("up",()=>{!t()||e.nudge([0,-1],!1)},void 0,[e]),(0,ae.useHotkeys)("right",()=>{!t()||e.nudge([1,0],!1)},void 0,[e]),(0,ae.useHotkeys)("down",()=>{!t()||e.nudge([0,1],!1)},void 0,[e]),(0,ae.useHotkeys)("left",()=>{!t()||e.nudge([-1,0],!1)},void 0,[e]),(0,ae.useHotkeys)("shift+up",()=>{!t()||e.nudge([0,-1],!0)},void 0,[e]),(0,ae.useHotkeys)("shift+right",()=>{!t()||e.nudge([1,0],!0)},void 0,[e]),(0,ae.useHotkeys)("shift+down",()=>{!t()||e.nudge([0,1],!0)},void 0,[e]),(0,ae.useHotkeys)("shift+left",()=>{!t()||e.nudge([-1,0],!0)},void 0,[e]),(0,ae.useHotkeys)("\u2318+shift+l,ctrl+shift+l",()=>{!t()||e.toggleLocked()},void 0,[e]),(0,ae.useHotkeys)("\u2318+shift+c,ctrl+shift+c",r=>{!t()||(e.copySvg(),r.preventDefault())},void 0,[e]),(0,ae.useHotkeys)("\u2318+g,ctrl+g",r=>{!t()||(e.group(),r.preventDefault())},void 0,[e]),(0,ae.useHotkeys)("\u2318+shift+g,ctrl+shift+g",r=>{!t()||(e.ungroup(),r.preventDefault())},void 0,[e]),(0,ae.useHotkeys)("[",()=>{!t(!0)||e.moveBackward()},void 0,[e]),(0,ae.useHotkeys)("]",()=>{!t(!0)||e.moveForward()},void 0,[e]),(0,ae.useHotkeys)("shift+[",()=>{!t(!0)||e.moveToBack()},void 0,[e]),(0,ae.useHotkeys)("shift+]",()=>{!t(!0)||e.moveToFront()},void 0,[e]),(0,ae.useHotkeys)("ctrl+shift+backspace,\u2318+shift+backspace",r=>{!t()||(e.settings.isDebugMode&&e.resetDocument(),r.preventDefault())},void 0,[e]),(0,ae.useHotkeys)("alt+command+l,alt+ctrl+l",r=>{!t(!0)||(e.style({textAlign:"start"}),r.preventDefault())},void 0,[e]),(0,ae.useHotkeys)("alt+command+t,alt+ctrl+t",r=>{!t(!0)||(e.style({textAlign:"middle"}),r.preventDefault())},void 0,[e]),(0,ae.useHotkeys)("alt+command+r,alt+ctrl+r",r=>{!t(!0)||(e.style({textAlign:"end"}),r.preventDefault())},void 0,[e])}var pi=M(require("react")),Or=pi.createContext({});function le(){return pi.useContext(Or)}var jl=M(require("react")),jr=new Map,ui="tldraw-fonts",Iu=`
@import url('https://fonts.googleapis.com/css2?family=Caveat+Brush&family=Source+Code+Pro&family=Source+Sans+Pro&family=Crimson+Pro&display=block');

@font-face {
  font-family: 'Recursive';
  font-style: normal;
  font-weight: 500;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/recursive/v23/8vI-7wMr0mhh-RQChyHEH06TlXhq_gukbYrFMk1QuAIcyEwG_X-dpEfaE5YaERmK-CImKsvxvU-MXGX2fSqasNfUlTGZnI14ZeY.woff2)
    format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC,
    U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Recursive';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/recursive/v23/8vI-7wMr0mhh-RQChyHEH06TlXhq_gukbYrFMk1QuAIcyEwG_X-dpEfaE5YaERmK-CImKsvxvU-MXGX2fSqasNfUlTGZnI14ZeY.woff2)
    format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC,
    U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Recursive Mono';
  font-style: normal;
  font-weight: 420;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/recursive/v23/8vI-7wMr0mhh-RQChyHEH06TlXhq_gukbYrFMk1QuAIcyEwG_X-dpEfaE5YaERmK-CImqvTxvU-MXGX2fSqasNfUlTGZnI14ZeY.woff2)
    format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC,
    U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
`;function Ul(){jl.useLayoutEffect(()=>{if(jr.get(ui))return;let s=document.createElement("style");return s.innerHTML=Iu,s.setAttribute("id",ui),document.head.appendChild(s),jr.set(ui,s),()=>{s&&document.head.contains(s)&&(document.head.removeChild(s),jr.delete(ui))}},[])}var Po=M(require("react"));function ci(){let s=le(),e=Po.useCallback(a=>te(this,null,function*(){var l,r;a&&s.callbacks.onOpenProject&&a.preventDefault(),(r=(l=s.callbacks).onNewProject)==null||r.call(l,s)}),[s]),t=Po.useCallback(a=>{var l,r;a&&s.callbacks.onOpenProject&&a.preventDefault(),(r=(l=s.callbacks).onSaveProject)==null||r.call(l,s)},[s]),n=Po.useCallback(a=>{var l,r;a&&s.callbacks.onOpenProject&&a.preventDefault(),(r=(l=s.callbacks).onSaveProjectAs)==null||r.call(l,s)},[s]),o=Po.useCallback(a=>te(this,null,function*(){var l,r;a&&s.callbacks.onOpenProject&&a.preventDefault(),(r=(l=s.callbacks).onOpenProject)==null||r.call(l,s)}),[s]),i=Po.useCallback(a=>te(this,null,function*(){var l,r;a&&s.callbacks.onOpenMedia&&a.preventDefault(),(r=(l=s.callbacks).onOpenMedia)==null||r.call(l,s)}),[s]);return{onNewProject:e,onSaveProject:t,onSaveProjectAs:n,onOpenProject:o,onOpenMedia:i}}var so=M(require("react"));function Gl(){let s=so.useCallback(a=>te(this,null,function*(){a.isDirty&&(a.fileSystemHandle?window.confirm("Do you want to save changes to your current project?")&&(yield a.saveProject()):window.confirm("Do you want to save your current project?")&&(yield a.saveProject()))}),[]),e=so.useCallback(a=>te(this,null,function*(){window.confirm("Do you want to create a new project?")&&(yield s(a),a.newProject())}),[s]),t=so.useCallback(a=>{a.saveProject()},[]),n=so.useCallback(a=>{a.saveProjectAs()},[]),o=so.useCallback(a=>te(this,null,function*(){yield s(a),a.openProject()}),[s]),i=so.useCallback(a=>te(this,null,function*(){var l;(l=a.openAsset)==null||l.call(a)}),[]);return{onNewProject:e,onSaveProject:t,onSaveProjectAs:n,onOpenProject:o,onOpenMedia:i}}var cc=M(require("react"));var Cu="\u0627\u0644\u0644\u0648\u0646",vu="\u064A\u0645\u0644\u0623",ku="\u0645\u062A\u0642\u0637\u0639",Du="\u062D\u062C\u0645",Pu="\u062A\u0628\u0642\u0649 \u0645\u0641\u062A\u0648\u062D\u0629",Bu="\u0627\u0644\u062E\u0637",Eu="\u0645\u062D\u0627\u0630\u0627\u0629",Mu="\u0627\u0644\u0623\u0646\u0645\u0627\u0637",Ru="\u062A\u0643\u0628\u064A\u0631",Lu="\u062A\u0635\u063A\u064A\u0631",Au="\u0625\u0644\u0649",Hu="\u0644\u0644\u0627\u062E\u062A\u064A\u0627\u0631",zu="\u062A\u0646\u0627\u0633\u0628",Fu="\u0645\u0644\u0641",Ou="\u062A\u062D\u0631\u064A\u0631",ju="\u0645\u0639\u0627\u064A\u0646\u0629",Uu="\u0627\u0644\u062A\u0641\u0636\u064A\u0644\u0627\u062A",Gu="\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644",Vu="\u062E\u0631\u0648\u062C",$u="\u0628\u0631\u0639\u0627\u064A\u0629",Nu="\u0643\u0646 \u0631\u0627\u0639\u064A\u0627\u064B",Ku="\u0627\u0644\u0639\u0648\u062F\u0629 \u0625\u0644\u0649 \u0627\u0644\u0645\u062D\u062A\u0648\u0649",Wu="\u062A\u0643\u0628\u064A\u0631 \u0644\u0644\u062A\u062D\u062F\u064A\u062F",_u="\u062A\u0643\u0628\u064A\u0631 \u0644\u062A\u0646\u0627\u0633\u0628",Yu="\u062A\u0643\u0628\u064A\u0631 \u0625\u0644\u0649",Zu="\u0627\u0644\u0648\u0636\u0639 \u0627\u0644\u062F\u0627\u0643\u0646",Xu="\u0648\u0636\u0639 \u0627\u0644\u062A\u0631\u0643\u064A\u0632",qu="\u0648\u0636\u0639 \u0627\u0644\u062A\u0635\u062D\u064A\u062D",Ju="\u0627\u0638\u0647\u0631 \u0627\u0644\u0634\u0628\u0643\u0629",Qu="\u0627\u0633\u062A\u062E\u062F\u0627\u0645 \u0627\u0644\u062A\u062D\u062F\u064A\u062F CAD",eh="\u0627\u0644\u0627\u062D\u062A\u0641\u0627\u0638 \u0628\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0646\u0645\u0637 \u0645\u0641\u062A\u0648\u062D\u0629",th="\u0625\u0638\u0647\u0627\u0631 \u0627\u0644\u0644\u0642\u0637\u0627\u062A \u062F\u0627\u0626\u0645\u064B\u0627",nh="\u062A\u062F\u0648\u064A\u0631 \u0627\u0644\u0645\u0642\u0627\u0628\u0636",oh="\u0645\u0642\u0627\u0628\u0636 \u0645\u0644\u0632\u0645\u0629",sh="\u0645\u0642\u0627\u0628\u0636 \u0627\u0633\u062A\u0646\u0633\u0627\u062E",ih="\u0627\u0644\u063A\u0627\u0621",rh="\u0625\u0639\u0627\u062F\u0629",ah="\u0642\u0637\u0639",dh="\u0646\u0633\u062D",lh="\u0644\u0635\u0642",ch="\u0646\u0633\u062E \u0627\u0644\u0649",ph="\u0635\u062F\u0631 \u0627\u0644\u0649",uh="\u0627\u062E\u062A\u0631 \u0627\u0644\u0643\u0644",hh="\u0644\u0627 \u062A\u062E\u062A\u0631 \u0634\u064A\u0621",mh="\u062D\u0630\u0641",gh="\u0645\u0634\u0631\u0648\u0639 \u062C\u062F\u064A\u062F",fh="\u0641\u062A\u062D",Sh="\u062D\u0641\u0638",Th="\u062D\u0641\u0638 \u0628\u0627\u0633\u0645",bh="\u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0648\u0633\u0627\u0626\u0637",yh="\u0625\u0646\u0634\u0627\u0621 \u0635\u0641\u062D\u0629",wh="\u0635\u0641\u062D\u0629 \u062C\u062F\u064A\u062F\u0629",xh="\u0627\u0633\u0645 \u0627\u0644\u0635\u0641\u062D\u0629",Ih="\u0646\u0633\u062E",Ch="\u0627\u0644\u063A\u0627\u0621",vh="\u0646\u0633\u062E \u0631\u0627\u0628\u0637 \u0627\u0644\u062F\u0639\u0648\u0629",kh="\u0646\u0633\u062E \u0631\u0627\u0628\u0637 \u062F\u0639\u0648\u0629 \u0627\u0644\u0642\u0631\u0627\u0621\u0629 \u0641\u0642\u0637",Dh="\u0642\u0645 \u0628\u0625\u0646\u0634\u0627\u0621 \u0645\u0634\u0631\u0648\u0639 \u0645\u062A\u0639\u062F\u062F \u0627\u0644\u0644\u0627\u0639\u0628\u064A\u0646",Ph="\u0646\u0633\u062E \u0625\u0644\u0649 \u0645\u0634\u0631\u0648\u0639 \u0645\u062A\u0639\u062F\u062F \u0627\u0644\u0644\u0627\u0639\u0628\u064A\u0646",Bh="\u0627\u062E\u062A\u0631",Eh="\u0645\u0645\u062D\u0627\u0629",Mh="\u0631\u0633\u0645",Rh="\u0633\u0647\u0645",Lh="\u0646\u0635",Ah="\u0644\u0627\u0635\u0642",Hh="\u0645\u0631\u0628\u0639",zh="\u0628\u064A\u0636\u0627\u0648\u064A",Fh="\u0645\u062B\u0644\u062B",Oh="\u062E\u0637",jh="\u062F\u0648\u0651\u0631",Uh="\u0642\u0641\u0644 \u0646\u0633\u0628\u0629 \u0627\u0644\u0627\u0628\u0639\u0627\u062F",Gh="\u0641\u062A\u062D \u0642\u0641\u0644 \u0646\u0633\u0628\u0629 \u0627\u0644\u0627\u0628\u0639\u0627\u062F",Vh="\u062C\u0645\u0651\u0639",$h="\u0641\u0643 \u0627\u0644\u062A\u062C\u0645\u0639",Nh="\u0627\u0646\u062A\u0642\u0644 \u0625\u0644\u0649 \u0627\u0644\u062E\u0644\u0641",Kh="\u062A\u062D\u0631\u064A\u0643 \u0644\u0644\u062E\u0644\u0641",Wh="\u062A\u062D\u0631\u064A\u0643 \u0644\u0644\u0623\u0645\u0627\u0645",_h="\u062A\u062D\u0631\u0643 \u0644\u0644\u0623\u0645\u0627\u0645",Yh="\u0625\u0639\u0627\u062F\u0629 \u0636\u0628\u0637 \u0627\u0644\u0632\u0627\u0648\u064A\u0629",Zh="\u0642\u0641\u0644",Xh="\u0627\u0644\u063A\u0627\u0621 \u0627\u0644\u0642\u0641\u0644",qh="\u0627\u0646\u0642\u0644 \u0625\u0644\u0649 \u0627\u0644\u0635\u0641\u062D\u0629",Jh="\u0627\u0646\u0639\u0643\u0627\u0633 \u0623\u0641\u0642\u064A",Qh="\u0627\u0646\u0639\u0643\u0627\u0633 \u0639\u0645\u0648\u062F\u064A",em="\u062D\u0631\u0651\u0643",tm="\u0644\u0644\u0627\u0645\u0627\u0645",nm="\u0644\u0644\u062E\u0644\u0641",om="\u0644\u0644\u0648\u0631\u0627\u0621",sm="\u062E\u0644\u0641",im="\u0644\u063A\u0629",rm="\u0644\u0644\u0645\u0632\u064A\u062F",am="\u0645\u0648\u0642\u0639 \u0627\u0644\u0627\u062F\u0648\u0627\u062A",dm="\u0627\u0633\u0641\u0644",lm="\u064A\u0633\u0627\u0631",cm="\u064A\u0645\u064A\u0646",pm="\u0623\u0639\u0644\u0649",um="\u0635\u0641\u062D\u0629",Vl={"style.menu.color":Cu,"style.menu.fill":vu,"style.menu.dash":ku,"style.menu.size":Du,"style.menu.keep.open":Pu,"style.menu.font":Bu,"style.menu.align":Eu,styles:Mu,"zoom.in":Ru,"zoom.out":Lu,to:Au,"to.selection":Hu,"to.fit":zu,"menu.file":Fu,"menu.edit":Ou,"menu.view":ju,"menu.preferences":Uu,"menu.sign.in":Gu,"menu.sign.out":Vu,sponsored:$u,"become.a.sponsor":Nu,"zoom.to.content":Ku,"zoom.to.selection":Wu,"zoom.to.fit":_u,"zoom.to":Yu,"preferences.dark.mode":Zu,"preferences.focus.mode":Xu,"preferences.debug.mode":qu,"preferences.show.grid":Ju,"preferences.use.cad.selection":Qu,"preferences.keep.stylemenu.open":eh,"preferences.always.show.snaps":th,"preferences.rotate.handles":nh,"preferences.binding.handles":oh,"preferences.clone.handles":sh,undo:ih,redo:rh,cut:ah,copy:dh,paste:lh,"copy.as":ch,"export.as":ph,"select.all":uh,"select.none":hh,delete:mh,"new.project":gh,open:fh,save:Sh,"save.as":Th,"upload.media":bh,"create.page":yh,"new.page":wh,"page.name":xh,duplicate:Ih,cancel:Ch,"copy.invite.link":vh,"copy.readonly.link":kh,"create.multiplayer.project":Dh,"copy.multiplayer.project":Ph,select:Bh,eraser:Eh,draw:Mh,arrow:Rh,text:Lh,sticky:Ah,Rectangle:Hh,Ellipse:zh,Triangle:Fh,Line:Oh,rotate:jh,"lock.aspect.ratio":Uh,"unlock.aspect.ratio":Gh,group:Vh,ungroup:$h,"move.to.back":Nh,"move.backward":Kh,"move.forward":Wh,"move.to.front":_h,"reset.angle":Yh,lock:Zh,unlock:Xh,"move.to.page":qh,"flip.horizontal":Jh,"flip.vertical":Qh,move:em,"to.front":tm,forward:nm,backward:om,back:sm,language:im,"translation.link":rm,"dock.position":am,bottom:dm,left:lm,right:cm,top:pm,page:um};var hm="Farve",mm="Fyld",gm="Streg",fm="St\xF8rrelse",Sm="Hold \xE5ben",Tm="Skrifttype",bm="Juster",ym="Format",wm="Zoom ind",xm="Zoom ud",Im="til",Cm="Til valgte",vm="Til l\xE6rred",km="Fil",Dm="Rediger",Pm="Vis",Bm="Indstillinger",Em="Log ind",Mm="Log ud",Rm="Sponsoreret",Lm="Bliv sponsor",Am="Zoom til valgte",Hm="Zoom til l\xE6rred",zm="Zoom til",Fm="M\xF8rkt udseende",Om="Fokus tilstand",jm="Debug tilstand",Um="Vis net",Gm="Brug CAD udv\xE6lgelse",Vm="Hold formatmenuen \xE5ben",$m="Vis altid snaps",Nm="Roteringsh\xE5ndtag",Km="Bindingsh\xE5ndtag",Wm="Kloningsh\xE5ndtag",_m="Fortryd",Ym="Gentag",Zm="Klip",Xm="Kopier",qm="Inds\xE6t",Jm="Kopier som",Qm="Eksporter som",eg="V\xE6lg alt",tg="Frav\xE6lg alt",ng="Slet",og="Nyt projekt",sg="\xC5ben",ig="Gem",rg="Gem som",ag="Upload medie",dg="Opret side",lg="Ny side",cg="Sidenavn",pg="Dupliker",ug="Fortryd",hg="Kopier invitationslink",mg="Opret multiplayer projekt",gg="Kopier til multiplayer projekt",fg="V\xE6lg",Sg="Viskel\xE6der",Tg="Tegn",bg="Pil",yg="Tekst",wg="Note",xg="Rektangel",Ig="Ellipse",Cg="Trekant",vg="Linje",kg="Roter",Dg="L\xE5s billedformat",Pg="Frig\xF8r billedformat",Bg="Grupper",Eg="Opdel gruppe",Mg="Placer bagerst",Rg="Flyt tilbage",Lg="Flyt frem",Ag="L\xE6g forrest",Hg="Nulstil vinkel",zg="L\xE5s",Fg="L\xE5s op",Og="Flyt til side",jg="Vend vandret",Ug="Vend lodret",Gg="Flyt",Vg="Forrest",$g="Frem",Ng="Tilbage",Kg="Bagerst",Wg="Sprog",$l={"style.menu.color":hm,"style.menu.fill":mm,"style.menu.dash":gm,"style.menu.size":fm,"style.menu.keep.open":Sm,"style.menu.font":Tm,"style.menu.align":bm,styles:ym,"zoom.in":wm,"zoom.out":xm,to:Im,"to.selection":Cm,"to.fit":vm,"menu.file":km,"menu.edit":Dm,"menu.view":Pm,"menu.preferences":Bm,"menu.sign.in":Em,"menu.sign.out":Mm,sponsored:Rm,"become.a.sponsor":Lm,"zoom.to.selection":Am,"zoom.to.fit":Hm,"zoom.to":zm,"preferences.dark.mode":Fm,"preferences.focus.mode":Om,"preferences.debug.mode":jm,"preferences.show.grid":Um,"preferences.use.cad.selection":Gm,"preferences.keep.stylemenu.open":Vm,"preferences.always.show.snaps":$m,"preferences.rotate.handles":Nm,"preferences.binding.handles":Km,"preferences.clone.handles":Wm,undo:_m,redo:Ym,cut:Zm,copy:Xm,paste:qm,"copy.as":Jm,"export.as":Qm,"select.all":eg,"select.none":tg,delete:ng,"new.project":og,open:sg,save:ig,"save.as":rg,"upload.media":ag,"create.page":dg,"new.page":lg,"page.name":cg,duplicate:pg,cancel:ug,"copy.invite.link":hg,"create.multiplayer.project":mg,"copy.multiplayer.project":gg,select:fg,eraser:Sg,draw:Tg,arrow:bg,text:yg,sticky:wg,Rectangle:xg,Ellipse:Ig,Triangle:Cg,Line:vg,rotate:kg,"lock.aspect.ratio":Dg,"unlock.aspect.ratio":Pg,group:Bg,ungroup:Eg,"move.to.back":Mg,"move.backward":Rg,"move.forward":Lg,"move.to.front":Ag,"reset.angle":Hg,lock:zg,unlock:Fg,"move.to.page":Og,"flip.horizontal":jg,"flip.vertical":Ug,move:Gg,"to.front":Vg,forward:$g,backward:Ng,back:Kg,language:Wg};var _g="Farbe",Yg="F\xFCllen",Zg="Strich",Xg="Gr\xF6\xDFe",qg="Offen halten",Jg="Schriftart",Qg="Ausrichten",ef="Stile",tf="Heranzoomen",nf="Herauszoomen",of="zu",sf="Zur Auswahl",rf="Anpassen",af="Datei",df="Bearbeiten",lf="Ansicht",cf="Pr\xE4ferenzen",pf="Einloggen",uf="Ausloggen",hf="Gesponsert",mf="Sponsor werden",gf="Zur Auswahl zoomen",ff="Zoom anpassen",Sf="Zoomen nach",Tf="Dunkler Modus",bf="Fokus Modus",yf="Debug Modus",wf="Gitter anzeigen",xf="CAD Auswahl verwenden",If="Stilmen\xFC offen halten",Cf="Hilfslinien immer anzeigen",vf="Rotiergriffe",kf="Bindegriffe",Df="Klongriffe",Pf="R\xFCckg\xE4ngig machen",Bf="Wiederherstellen",Ef="Ausschneiden",Mf="Kopieren",Rf="Einf\xFCgen",Lf="Kopieren als",Af="Exportieren als",Hf="Alles ausw\xE4hlen",zf="Nichts ausw\xE4hlen",Ff="L\xF6schen",Of="Neues Projekt",jf="\xD6ffnen",Uf="Speichern",Gf="Speichern als",Vf="Medien hochladen",$f="Seite erstellen",Nf="Neue Seite",Kf="Seitenname",Wf="Duplizieren",_f="Abbrechen",Yf="Einladungslink kopieren",Zf="Mehrspielerprojekt kreieren",Xf="In Mehrspielerprojekt kopieren",qf="Ausw\xE4hlen",Jf="Radierer",Qf="Malen",eS="Pfeil",tS="Text",nS="Notiz",oS="Rechteck",sS="Ellipse",iS="Dreieck",rS="Linie",aS="Drehen",dS="Seitenverh\xE4ltnis sperren",lS="Seitenverh\xE4ltnis entsperren",cS="Gruppieren",pS="Gruppierung aufheben",uS="Nach Hinten verschieben",hS="R\xFCckw\xE4rts schieben",mS="Vorw\xE4rts schieben",gS="Nach Vorne verschieben",fS="Winkel zur\xFCcksetzen",SS="Sperren",TS="Entsperren",bS="Zu Seite verschieben",yS="Horizontal spiegeln",wS="Vertikal spiegeln",xS="Verschieben",IS="Nach Vorne",CS="Vorw\xE4rts",vS="R\xFCckw\xE4rts",kS="Hinten",DS="Sprache",Nl={"style.menu.color":_g,"style.menu.fill":Yg,"style.menu.dash":Zg,"style.menu.size":Xg,"style.menu.keep.open":qg,"style.menu.font":Jg,"style.menu.align":Qg,styles:ef,"zoom.in":tf,"zoom.out":nf,to:of,"to.selection":sf,"to.fit":rf,"menu.file":af,"menu.edit":df,"menu.view":lf,"menu.preferences":cf,"menu.sign.in":pf,"menu.sign.out":uf,sponsored:hf,"become.a.sponsor":mf,"zoom.to.selection":gf,"zoom.to.fit":ff,"zoom.to":Sf,"preferences.dark.mode":Tf,"preferences.focus.mode":bf,"preferences.debug.mode":yf,"preferences.show.grid":wf,"preferences.use.cad.selection":xf,"preferences.keep.stylemenu.open":If,"preferences.always.show.snaps":Cf,"preferences.rotate.handles":vf,"preferences.binding.handles":kf,"preferences.clone.handles":Df,undo:Pf,redo:Bf,cut:Ef,copy:Mf,paste:Rf,"copy.as":Lf,"export.as":Af,"select.all":Hf,"select.none":zf,delete:Ff,"new.project":Of,open:jf,save:Uf,"save.as":Gf,"upload.media":Vf,"create.page":$f,"new.page":Nf,"page.name":Kf,duplicate:Wf,cancel:_f,"copy.invite.link":Yf,"create.multiplayer.project":Zf,"copy.multiplayer.project":Xf,select:qf,eraser:Jf,draw:Qf,arrow:eS,text:tS,sticky:nS,Rectangle:oS,Ellipse:sS,Triangle:iS,Line:rS,rotate:aS,"lock.aspect.ratio":dS,"unlock.aspect.ratio":lS,group:cS,ungroup:pS,"move.to.back":uS,"move.backward":hS,"move.forward":mS,"move.to.front":gS,"reset.angle":fS,lock:SS,unlock:TS,"move.to.page":bS,"flip.horizontal":yS,"flip.vertical":wS,move:xS,"to.front":IS,forward:CS,backward:vS,back:kS,language:DS};var Kl={};var BS="Color",ES="Relleno",MS="L\xEDnea",RS="Tama\xF1o",LS="Mantener abierto",AS="Fuente",HS="Alineaci\xF3n",zS="Estilos",FS="Acercar",OS="Alejar",jS="A",US="A la selecci\xF3n",GS="Ajustar",VS="Archivo",$S="Editar",NS="Ver",KS="Preferencias",WS="Iniciar sesi\xF3n",_S="Cerrar sesi\xF3n",YS="Patrocinado",ZS="Convi\xE9rtete en patrocinador",XS="Acercar a la selecci\xF3n",qS="Ajustar a la ventana",JS="Acercar a",QS="Modo oscuro",eT="Modo concentraci\xF3n",tT="Modo depuraci\xF3n",nT="Mostrar cuadr\xEDcula",oT="Usar selecci\xF3n CAD",sT="Mantener men\xFA de estilos abierto",iT="Mostrar puntos de ajuste",rT="Control de rotaci\xF3n",aT="Control de vinculaci\xF3n",dT="Control de clonaci\xF3n",lT="Deshacer",cT="Rehacer",pT="Cortar",uT="Copiar",hT="Pegar",mT="Copiar como",gT="Exportar como",fT="Selecionar todo",ST="Selecionar nada",TT="Borrar",bT="Nuevo Proyecto",yT="Abrir",wT="Guardar",xT="Guardar como",IT="Subir medios",CT="Crear p\xE1gina",vT="Nueva p\xE1gina",kT="Nombre de p\xE1gina",DT="P\xE1gina",PT="Duplicar",BT="Cancelar",ET="Copiar invitaci\xF3n",MT="Crear proyecto multijugador",RT="Copiar proyecto multijugador",LT="Seleccionar",AT="Borrador",HT="Dibujar",zT="Flecha",FT="Texto",OT="Pegatina",jT="Rect\xE1ngulo",UT="Elipse",GT="Tri\xE1ngulo",VT="L\xEDnea",$T="Rotar",NT="Bloquear relaci\xF3n de aspecto",KT="Desbloquear relaci\xF3n de aspecto",WT="Agrupar",_T="Desagrupar",YT="Mover al fondo",ZT="Mover atr\xE1s",XT="Mover adelante",qT="Mover al frente",JT="Restablecer \xE1ngulo",QT="Bloquear",eb="Desbloquear",tb="Mover a p\xE1gina",nb="Voltear horizontalmente",ob="Voltear verticalmente",sb="Mover",ib="Al frente",rb="Adelante",ab="Atr\xE1s",db="Fondo",lb="Idioma",Wl={"style.menu.color":BS,"style.menu.fill":ES,"style.menu.dash":MS,"style.menu.size":RS,"style.menu.keep.open":LS,"style.menu.font":AS,"style.menu.align":HS,styles:zS,"zoom.in":FS,"zoom.out":OS,to:jS,"to.selection":US,"to.fit":GS,"menu.file":VS,"menu.edit":$S,"menu.view":NS,"menu.preferences":KS,"menu.sign.in":WS,"menu.sign.out":_S,sponsored:YS,"become.a.sponsor":ZS,"zoom.to.selection":XS,"zoom.to.fit":qS,"zoom.to":JS,"preferences.dark.mode":QS,"preferences.focus.mode":eT,"preferences.debug.mode":tT,"preferences.show.grid":nT,"preferences.use.cad.selection":oT,"preferences.keep.stylemenu.open":sT,"preferences.always.show.snaps":iT,"preferences.rotate.handles":rT,"preferences.binding.handles":aT,"preferences.clone.handles":dT,undo:lT,redo:cT,cut:pT,copy:uT,paste:hT,"copy.as":mT,"export.as":gT,"select.all":fT,"select.none":ST,delete:TT,"new.project":bT,open:yT,save:wT,"save.as":xT,"upload.media":IT,"create.page":CT,"new.page":vT,"page.name":kT,page:DT,duplicate:PT,cancel:BT,"copy.invite.link":ET,"create.multiplayer.project":MT,"copy.multiplayer.project":RT,select:LT,eraser:AT,draw:HT,arrow:zT,text:FT,sticky:OT,Rectangle:jT,Ellipse:UT,Triangle:GT,Line:VT,rotate:$T,"lock.aspect.ratio":NT,"unlock.aspect.ratio":KT,group:WT,ungroup:_T,"move.to.back":YT,"move.backward":ZT,"move.forward":XT,"move.to.front":qT,"reset.angle":JT,lock:QT,unlock:eb,"move.to.page":tb,"flip.horizontal":nb,"flip.vertical":ob,move:sb,"to.front":ib,forward:rb,backward:ab,back:db,language:lb};var cb="\u0631\u0646\u06AF",pb="\u062A\u0648\u067E\u064F\u0631",ub="\u062E\u0637\u200C \u0686\u06CC\u0646",hb="\u0627\u0646\u062F\u0627\u0632\u0647",mb="\u0628\u0627\u0632 \u0628\u0627\u0634",gb="\u0641\u0648\u0646\u062A",fb="\u062A\u0631\u0627\u0632",Sb="\u0627\u0633\u062A\u0627\u06CC\u0644\u200C\u0647\u0627",Tb="\u0632\u0648\u0645 \u062C\u0644\u0648",bb="\u0632\u0648\u0645 \u0639\u0642\u0628",yb="\u0628\u0647",wb="\u0628\u0647 \u0627\u0646\u062A\u062E\u0627\u0628\u200C\u0634\u062F\u0647\u200C\u0647\u0627",xb="\u0628\u0647 \u06A9\u0644 \u0635\u0641\u062D\u0647",Ib="\u0641\u0627\u06CC\u0644",Cb="\u0648\u06CC\u0631\u0627\u06CC\u0634",vb="\u0646\u0645\u0627\u06CC\u0634",kb="\u062A\u0646\u0638\u06CC\u0645\u200C\u0647\u0627",Db="\u0648\u0631\u0648\u062F",Pb="\u062E\u0631\u0648\u062C",Bb="\u062D\u0627\u0645\u06CC\u0627\u0646",Eb=" \u062D\u0627\u0645\u06CC \u0634\u0648",Mb="\u0646\u0645\u0627\u06CC\u0634 \u0627\u0646\u062A\u062E\u0627\u0628\u200C\u0634\u062F\u0647\u200C\u0647\u0627",Rb="\u0646\u0645\u0627\u06CC\u0634 \u06A9\u0644 \u0635\u0641\u062D\u0647",Lb="\u0632\u0648\u0645 \u0628\u0647 ",Ab="\u062D\u0627\u0644\u062A \u0634\u0628",Hb="\u062D\u0627\u0644\u062A \u062A\u0645\u0631\u06A9\u0632",zb="\u062D\u0627\u0644\u062A \u0639\u06CC\u0628\u200C\u06CC\u0627\u06CC\u06CC",Fb="\u0646\u0645\u0627\u06CC\u0634 \u062E\u0637\u0648\u0637 \u0631\u0627\u0647\u0646\u0645\u0627",Ob="\u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u0627\u0632 \u062D\u0627\u0644\u062A \u0627\u0646\u062A\u062E\u0627\u0628\u06CC CAD",jb="\u0645\u0646\u0648\u06CC \u0627\u0633\u062A\u0627\u06CC\u0644 \u0628\u0627\u0632 \u0628\u0627\u0634\u0647",Ub="\u0631\u0627\u0647\u0646\u0645\u0627\u06CC \u0644\u0628\u0647\u200C\u0647\u0627 \u0631\u0648 \u0646\u0634\u0648\u0646 \u0628\u062F\u0647",Gb="\u062F\u0633\u062A\u06AF\u06CC\u0631\u0647\u200C\u0647\u0627\u06CC \u0686\u0631\u062E\u0634 \u0631\u0648 \u0646\u0634\u0648\u0646 \u0628\u062F\u0647",Vb="\u062F\u0633\u062A\u0647\u0654 \u0644\u0628\u0647\u200C\u0647\u0627 \u0631\u0648 \u0646\u0634\u0648\u0646 \u0628\u062F\u0647",$b="\u062F\u0633\u062A\u06AF\u06CC\u0631\u0647\u200C\u0647\u0627\u06CC \u06A9\u067E\u06CC \u0631\u0648 \u0646\u0634\u0648\u0646 \u0628\u062F\u0647",Nb="\u06CC\u0647 \u0642\u062F\u0645 \u0639\u0642\u0628",Kb="\u06CC\u0647 \u0642\u062F\u0645 \u062C\u0644\u0648",Wb="\u0628\u0631\u06CC\u062F\u0646",_b="\u06A9\u067E\u06CC",Yb="\u062C\u0627\u06CC\u200C\u06AF\u0630\u0627\u0631\u06CC",Zb="\u06A9\u067E\u06CC \u0628\u0647\u200C\u200C\u0639\u0646\u0648\u0627\u0646",Xb="\u062E\u0631\u0648\u062C\u06CC \u0628\u0627 \u0641\u0631\u0645\u062A",qb="\u0627\u0646\u062A\u062E\u0627\u0628 \u0647\u0645\u0647",Jb="\u0627\u0646\u062A\u062E\u0627\u0628 \u0647\u06CC\u0686",Qb=" \u067E\u0627\u06A9\u200C\u06A9\u0631\u062F\u0646",ey="\u067E\u0631\u0648\u0698\u0647\u0654 \u062A\u0627\u0632\u0647",ty="\u0628\u0627\u0632 \u06A9\u0646",ny="\u0630\u062E\u06CC\u0631\u0647",oy="\u0630\u062E\u06CC\u0631\u0647 \u0628\u0627 \u0627\u0633\u0645",sy="\u0622\u067E\u0644\u0648\u062F \u0639\u06A9\u0633",iy="\u0633\u0627\u062E\u062A \u0635\u0641\u062D\u0647",ry="\u0635\u0641\u062D\u0647\u0654 \u062A\u0627\u0632\u0647",ay="\u0627\u0633\u0645 \u0635\u0641\u062D\u0647",dy="\u06A9\u067E\u06CC \u062F\u0631\u062C\u0627",ly="\u0628\u06CC\u200C\u062E\u06CC\u0627\u0644",cy="\u06A9\u067E\u06CC \u0644\u06CC\u0646\u06A9 \u062F\u0639\u0648\u062A",py="\u0633\u0627\u062E\u062A \u067E\u0631\u0648\u0698\u0647\u0654 \u0686\u0646\u062F\u0646\u0641\u0631\u0647",uy="\u06A9\u067E\u06CC \u062F\u0631 \u067E\u0631\u0648\u0698\u0647\u0654 \u0686\u0646\u062F\u0646\u0641\u0631\u0647",hy="\u0627\u0646\u062A\u062E\u0627\u0628",my="\u067E\u0627\u06A9\u200C\u06A9\u0646",gy="\u0631\u0633\u0645",fy="\u0641\u0644\u0650\u0634",Sy="\u0645\u062A\u0646",Ty="\u06CC\u0627\u062F\u062F\u0627\u0634\u062A",by="\u0686\u0627\u0631\u06AF\u0648\u0634",yy="\u06AF\u0631\u062F\u06CC",wy="\u0633\u0647\u200C\u06AF\u0648\u0634",xy="\u062E\u0637",Iy="\u0686\u0631\u062E\u0634",Cy="\u062A\u062B\u0628\u06CC\u062A \u0646\u0633\u0628\u062A \u0627\u0628\u0639\u0627\u062F",vy="\u0646\u0633\u0628\u062A \u0627\u0628\u0639\u0627\u062F \u0645\u062A\u063A\u06CC\u0631",ky="\u062C\u0645\u0639 \u06A9\u0646",Dy="\u062C\u062F\u0627 \u06A9\u0646",Py="\u0628\u0628\u0631 \u0622\u062E\u0631",By="\u0628\u0628\u0631 \u0639\u0642\u0628",Ey="\u0628\u0628\u0631 \u0627\u0648\u0644",My="\u0628\u0628\u0631 \u062C\u0644\u0648",Ry="\u062D\u0630\u0641 \u0686\u0631\u062E\u0634",Ly="\u0642\u0641\u0644\u200C \u06A9\u0646",Ay="\u0628\u0627\u0632 \u06A9\u0646",Hy="\u0628\u0628\u0631 \u0628\u0647 \u0635\u0641\u062D\u0647",zy="\u0628\u0631\u06AF\u0631\u062F\u0648\u0646 \u0627\u0641\u0642\u06CC",Fy="\u0628\u0631\u06AF\u0631\u062F\u0648\u0646 \u0639\u0645\u0648\u062F\u06CC",Oy="\u062C\u0627\u0628\u0647\u200C\u062C\u0627\u0634 \u06A9\u0646",jy="\u0628\u0647 \u0627\u0648\u0644",Uy="\u0628\u0647 \u062C\u0644\u0648",Gy="\u0628\u0647 \u0639\u0642\u0628",Vy="\u0628\u0647 \u0622\u062E\u0631",$y="\u0632\u0628\u0627\u0646",_l={"style.menu.color":cb,"style.menu.fill":pb,"style.menu.dash":ub,"style.menu.size":hb,"style.menu.keep.open":mb,"style.menu.font":gb,"style.menu.align":fb,styles:Sb,"zoom.in":Tb,"zoom.out":bb,to:yb,"to.selection":wb,"to.fit":xb,"menu.file":Ib,"menu.edit":Cb,"menu.view":vb,"menu.preferences":kb,"menu.sign.in":Db,"menu.sign.out":Pb,sponsored:Bb,"become.a.sponsor":Eb,"zoom.to.selection":Mb,"zoom.to.fit":Rb,"zoom.to":Lb,"preferences.dark.mode":Ab,"preferences.focus.mode":Hb,"preferences.debug.mode":zb,"preferences.show.grid":Fb,"preferences.use.cad.selection":Ob,"preferences.keep.stylemenu.open":jb,"preferences.always.show.snaps":Ub,"preferences.rotate.handles":Gb,"preferences.binding.handles":Vb,"preferences.clone.handles":$b,undo:Nb,redo:Kb,cut:Wb,copy:_b,paste:Yb,"copy.as":Zb,"export.as":Xb,"select.all":qb,"select.none":Jb,delete:Qb,"new.project":ey,open:ty,save:ny,"save.as":oy,"upload.media":sy,"create.page":iy,"new.page":ry,"page.name":ay,duplicate:dy,cancel:ly,"copy.invite.link":cy,"create.multiplayer.project":py,"copy.multiplayer.project":uy,select:hy,eraser:my,draw:gy,arrow:fy,text:Sy,sticky:Ty,Rectangle:by,Ellipse:yy,Triangle:wy,Line:xy,rotate:Iy,"lock.aspect.ratio":Cy,"unlock.aspect.ratio":vy,group:ky,ungroup:Dy,"move.to.back":Py,"move.backward":By,"move.forward":Ey,"move.to.front":My,"reset.angle":Ry,lock:Ly,unlock:Ay,"move.to.page":Hy,"flip.horizontal":zy,"flip.vertical":Fy,move:Oy,"to.front":jy,forward:Uy,backward:Gy,back:Vy,language:$y};var Ny="Couleur",Ky="Remplir",Wy="Bordure",_y="Taille",Yy="Garder ouvert",Zy="Font",Xy="Alignement",qy="Styles",Jy="Zoomer",Qy="D\xE9zoomer",e0="\xC0",t0="S\xE9lection",n0="Adapter",o0="Fichier",s0="Modifier",i0="Vue",r0="Pr\xE9f\xE9rences",a0="S'authentifier",d0="Se d\xE9connecter",l0="Sponsoris\xE9",c0="Devenir un sponsor",p0="Retour au contenu",u0="Zoomer sur la s\xE9lection",h0="Zoomer pour adapter",m0="R\xE9initialiser le zoom \xE0",g0="Mode Sombre",f0="Mode Focus",S0="D\xE9bogage Mode",T0="Montrer La Grille",b0="Utiliser La S\xE9lection CAD",y0="Garder Le Menu Style Ouvert",w0="Garder Les Snaps Visible",x0="Manipuler La Rotation",I0="Manipuler La Liaison",C0="Manipuler Le Clonage",v0="Annuler",k0="Refaire",D0="Couper",P0="Copier",B0="Coller",E0="Copier en tant que",M0="Exporter en tant que",R0="S\xE9lectionner tout",L0="S\xE9lectionner aucun",A0="Supprimer",H0="Nouveau Project",z0="Ouvrir",F0="Enregistrer",O0="Enregistrer en tant que",j0="Uploader Un M\xE9dia",U0="Cr\xE9er une Page",G0="Nouvelle Page",V0="Nom de la Page",$0="Dupliquer",N0="Annuler",K0="Copier le lien d'invitation",W0="Copier le lien en lecture seule d'invitation",_0="Cr\xE9er un Project Multi-joueurs",Y0="Copier dans un Projet Multi-joueurs",Z0="Selection",X0="Gomme",q0="Crayon",J0="Fl\xE8che",Q0="Text",e1="Papier collant",t1="Rectangle",n1="Cercle",o1="Triangle",s1="Ligne",i1="Retourner",r1="Verouiller l'Aspect Ratio",a1="D\xE9verouiller l'Aspect Ratio",d1="Grouper",l1="D\xE9grouper",c1="Envoyer vers l'arri\xE8re",p1="Mettre en arri\xE8re-plan",u1="Mettre au premier plan",h1="Envoyer vers l'avant",m1="R\xE9initialiser l'Angle",g1="Verouiller",f1="D\xE9verouiller",S1="D\xE9placer vers la page",T1="Retourner Horizontalement",b1="Retourner Verticalement",y1="Mettre",w1="\xC0 l'avant",x1="Au premier plan",I1="En arri\xE8re plan",C1="\xC0 l'arri\xE8re",v1="Langage",k1="Position du dock",D1="En bas",P1="\xC0 Gauche",B1="\xC0 Droite",E1="En Haut",M1="Page",Yl={"style.menu.color":Ny,"style.menu.fill":Ky,"style.menu.dash":Wy,"style.menu.size":_y,"style.menu.keep.open":Yy,"style.menu.font":Zy,"style.menu.align":Xy,styles:qy,"zoom.in":Jy,"zoom.out":Qy,to:e0,"to.selection":t0,"to.fit":n0,"menu.file":o0,"menu.edit":s0,"menu.view":i0,"menu.preferences":r0,"menu.sign.in":a0,"menu.sign.out":d0,sponsored:l0,"become.a.sponsor":c0,"zoom.to.content":p0,"zoom.to.selection":u0,"zoom.to.fit":h0,"zoom.to":m0,"preferences.dark.mode":g0,"preferences.focus.mode":f0,"preferences.debug.mode":S0,"preferences.show.grid":T0,"preferences.use.cad.selection":b0,"preferences.keep.stylemenu.open":y0,"preferences.always.show.snaps":w0,"preferences.rotate.handles":x0,"preferences.binding.handles":I0,"preferences.clone.handles":C0,undo:v0,redo:k0,cut:D0,copy:P0,paste:B0,"copy.as":E0,"export.as":M0,"select.all":R0,"select.none":L0,delete:A0,"new.project":H0,open:z0,save:F0,"save.as":O0,"upload.media":j0,"create.page":U0,"new.page":G0,"page.name":V0,duplicate:$0,cancel:N0,"copy.invite.link":K0,"copy.readonly.link":W0,"create.multiplayer.project":_0,"copy.multiplayer.project":Y0,select:Z0,eraser:X0,draw:q0,arrow:J0,text:Q0,sticky:e1,Rectangle:t1,Ellipse:n1,Triangle:o1,Line:s1,rotate:i1,"lock.aspect.ratio":r1,"unlock.aspect.ratio":a1,group:d1,ungroup:l1,"move.to.back":c1,"move.backward":p1,"move.forward":u1,"move.to.front":h1,"reset.angle":m1,lock:g1,unlock:f1,"move.to.page":S1,"flip.horizontal":T1,"flip.vertical":b1,move:y1,"to.front":w1,forward:x1,backward:I1,back:C1,language:v1,"dock.position":k1,bottom:D1,left:P1,right:B1,top:E1,page:M1};var R1="\u05E6\u05D1\u05E2",L1="\u05DE\u05DC\u05D0",A1="\u05D2\u05D1\u05D5\u05DC",H1="\u05D2\u05D5\u05D3\u05DC",z1="\u05D4\u05E9\u05D0\u05E8 \u05E4\u05EA\u05D5\u05D7",F1="\u05D2\u05D5\u05E4\u05DF",O1="\u05D9\u05D9\u05E9\u05D5\u05E8",j1="\u05E2\u05D9\u05E6\u05D5\u05D1",U1="\u05D4\u05D2\u05D3\u05DC \u05EA\u05E6\u05D5\u05D2\u05D4",G1="\u05D4\u05E7\u05D8\u05DF \u05EA\u05E6\u05D5\u05D2\u05D4",V1="\u05DC",$1="\u05DC\u05E1\u05D9\u05DE\u05D5\u05DF",N1="\u05DC\u05D4\u05EA\u05D0\u05DE\u05D4",K1="\u05E7\u05D5\u05D1\u05E5",W1="\u05E2\u05E8\u05D9\u05DB\u05D4",_1="\u05EA\u05E6\u05D5\u05D2\u05D4",Y1="\u05DE\u05D0\u05E4\u05D9\u05D9\u05E0\u05D9\u05DD",Z1="\u05D4\u05D9\u05E8\u05E9\u05DD",X1="\u05D4\u05EA\u05E0\u05EA\u05E7",q1="\u05D7\u05E1\u05D5\u05EA",J1="\u05DE\u05EA\u05DF \u05D7\u05E1\u05D5\u05EA",Q1="\u05D6\u05D5\u05DD \u05DC\u05D1\u05D7\u05D9\u05E8\u05D4",ew="\u05D6\u05D5\u05DD \u05DC\u05D4\u05EA\u05D0\u05DE\u05D4",tw="\u05D6\u05D5\u05DD \u05DC",nw="\u05DE\u05E6\u05D1 \u05D7\u05E9\u05D5\u05DA",ow="\u05DE\u05E6\u05D1 \u05E4\u05D5\u05E7\u05D5\u05E1",sw="\u05DE\u05E6\u05D1 \u05D3\u05D9\u05D1\u05D0\u05D2",iw="(\u05D2\u05E8\u05D9\u05D3)\u05D4\u05E8\u05D0\u05D4 \u05E8\u05E9\u05EA \u05E2\u05D9\u05DE\u05D5\u05D3",rw="\u05E1\u05D9\u05DE\u05D5\u05DF CAD",aw="\u05D4\u05E9\u05D0\u05E8 \u05EA\u05E4\u05E8\u05D9\u05D8 \u05E2\u05D9\u05E6\u05D5\u05D1 \u05E4\u05EA\u05D5\u05D7",dw="\u05D4\u05E8\u05D0\u05D4 \u05E7\u05D5\u05D5\u05D9 \u05DE\u05EA\u05D0\u05E8",lw="\u05D4\u05E8\u05D0\u05D4 \u05D9\u05D3\u05D9\u05D5\u05EA \u05E1\u05D9\u05D1\u05D5\u05D1",cw="\u05D4\u05E8\u05D0\u05D4 \u05D9\u05D3\u05D9\u05D5\u05EA \u05E7\u05E9\u05D9\u05E8\u05D4",pw="\u05D4\u05E8\u05D0\u05D4 \u05D9\u05D3\u05D9\u05D5\u05EA \u05E9\u05D9\u05DB\u05E4\u05D5\u05DC",uw="\u05D1\u05D8\u05DC",hw="\u05E2\u05E9\u05D4 \u05DE\u05D7\u05D3\u05E9",mw="\u05D2\u05D6\u05D5\u05E8",gw="\u05D4\u05E2\u05EA\u05E7",fw="\u05D4\u05D3\u05D1\u05E7",Sw="\u05D4\u05E2\u05EA\u05E7 \u05DB",Tw="\u05D9\u05D9\u05E6\u05D0 \u05DB",bw="\u05D1\u05D7\u05E8 \u05D4\u05DB\u05DC",yw="\u05D1\u05D8\u05DC \u05D1\u05D7\u05D9\u05E8\u05D4",ww="\u05DE\u05D7\u05E7",xw="\u05E4\u05E8\u05D5\u05D9\u05E7\u05D8 \u05D7\u05D3\u05E9",Iw="\u05E4\u05EA\u05D7",Cw="\u05E9\u05DE\u05D5\u05E8",vw="\u05E9\u05DE\u05D5\u05E8 \u05DB",kw="\u05D4\u05E2\u05DC\u05D0\u05EA \u05DE\u05D3\u05D9\u05D4",Dw="\u05E6\u05D5\u05E8 \u05D3\u05E3",Pw="\u05D3\u05E3 \u05D7\u05D3\u05E9",Bw="\u05E9\u05DD \u05D4\u05D3\u05E3",Ew="\u05E9\u05DB\u05E4\u05DC",Mw="\u05D1\u05D8\u05DC",Rw="\u05D4\u05E2\u05EA\u05E7 \u05E7\u05D9\u05E9\u05D5\u05E8 \u05D4\u05D6\u05DE\u05E0\u05D4",Lw="\u05E6\u05D5\u05E8 \u05E4\u05E8\u05D5\u05D9\u05E7\u05D8 \u05E8\u05D1 \u05DE\u05E9\u05EA\u05EA\u05E4\u05D9\u05DD",Aw="\u05D4\u05E2\u05EA\u05E7 \u05DC\u05E4\u05E8\u05D5\u05D9\u05E7\u05D8 \u05E8\u05D1 \u05DE\u05E9\u05EA\u05EA\u05E4\u05D9\u05DD",Hw="\u05E1\u05DE\u05DF",zw="\u05DE\u05D7\u05E7",Fw="\u05E6\u05D9\u05D9\u05E8",Ow="\u05D7\u05E5",jw="\u05D8\u05E7\u05E1\u05D8",Uw="\u05D3\u05D1\u05D9\u05E7\u05D9",Gw="\u05DE\u05E8\u05D5\u05D1\u05E2",Vw="\u05D0\u05DC\u05D9\u05E4\u05E1\u05D4",$w="\u05DE\u05E9\u05D5\u05DC\u05E9",Nw="\u05E7\u05D5",Kw="\u05E1\u05D5\u05D1\u05D1",Ww="\u05E0\u05E2\u05DC \u05D9\u05D7\u05E1 \u05E8\u05D5\u05D7\u05D1-\u05D2\u05D5\u05D1\u05D4",_w="\u05E9\u05D7\u05E8\u05E8 \u05E0\u05E2\u05D9\u05DC\u05EA \u05D9\u05D7\u05E1 \u05E8\u05D5\u05D7\u05D1-\u05D2\u05D5\u05D1\u05D4",Yw="\u05E7\u05D1\u05E5",Zw="\u05D1\u05D8\u05DC \u05E7\u05D9\u05D1\u05D5\u05E5",Xw="\u05D4\u05D1\u05D0 \u05DC\u05EA\u05D7\u05EA\u05D9\u05EA",qw="\u05D4\u05D6\u05D6 \u05D0\u05D7\u05D5\u05E8\u05D4",Jw="\u05D4\u05D6\u05D6 \u05E7\u05D3\u05D9\u05DE\u05D4",Qw="\u05D4\u05D1\u05D0 \u05DC\u05D7\u05D6\u05D9\u05EA",ex="\u05D0\u05E4\u05E1 \u05D6\u05D5\u05D5\u05D9\u05EA",tx="\u05E0\u05E2\u05DC",nx="\u05E9\u05D7\u05E8\u05E8 \u05E0\u05E2\u05D9\u05DC\u05D4",ox="\u05D4\u05D6\u05D6 \u05DC\u05D3\u05E3",sx="\u05D4\u05E4\u05D5\u05DA \u05D0\u05D5\u05E4\u05E7\u05D9\u05EA",ix="\u05D4\u05E4\u05D5\u05DA \u05D0\u05E0\u05DB\u05D9\u05EA",rx="\u05D4\u05D6\u05D6",ax="\u05D4\u05D1\u05D0 \u05DC\u05E7\u05D3\u05D9\u05DE\u05D4",dx="\u05E7\u05D3\u05D9\u05DE\u05D4",lx="\u05D0\u05D7\u05D5\u05E8\u05D4",cx="\u05D1\u05D7\u05D6\u05E8\u05D4",px="\u05E9\u05E4\u05D4",Zl={"style.menu.color":R1,"style.menu.fill":L1,"style.menu.dash":A1,"style.menu.size":H1,"style.menu.keep.open":z1,"style.menu.font":F1,"style.menu.align":O1,styles:j1,"zoom.in":U1,"zoom.out":G1,to:V1,"to.selection":$1,"to.fit":N1,"menu.file":K1,"menu.edit":W1,"menu.view":_1,"menu.preferences":Y1,"menu.sign.in":Z1,"menu.sign.out":X1,sponsored:q1,"become.a.sponsor":J1,"zoom.to.selection":Q1,"zoom.to.fit":ew,"zoom.to":tw,"preferences.dark.mode":nw,"preferences.focus.mode":ow,"preferences.debug.mode":sw,"preferences.show.grid":iw,"preferences.use.cad.selection":rw,"preferences.keep.stylemenu.open":aw,"preferences.always.show.snaps":dw,"preferences.rotate.handles":lw,"preferences.binding.handles":cw,"preferences.clone.handles":pw,undo:uw,redo:hw,cut:mw,copy:gw,paste:fw,"copy.as":Sw,"export.as":Tw,"select.all":bw,"select.none":yw,delete:ww,"new.project":xw,open:Iw,save:Cw,"save.as":vw,"upload.media":kw,"create.page":Dw,"new.page":Pw,"page.name":Bw,duplicate:Ew,cancel:Mw,"copy.invite.link":Rw,"create.multiplayer.project":Lw,"copy.multiplayer.project":Aw,select:Hw,eraser:zw,draw:Fw,arrow:Ow,text:jw,sticky:Uw,Rectangle:Gw,Ellipse:Vw,Triangle:$w,Line:Nw,rotate:Kw,"lock.aspect.ratio":Ww,"unlock.aspect.ratio":_w,group:Yw,ungroup:Zw,"move.to.back":Xw,"move.backward":qw,"move.forward":Jw,"move.to.front":Qw,"reset.angle":ex,lock:tx,unlock:nx,"move.to.page":ox,"flip.horizontal":sx,"flip.vertical":ix,move:rx,"to.front":ax,forward:dx,backward:lx,back:cx,language:px};var ux="Colore",hx="Riempi",mx="Tratteggo",gx="Dimensione",fx="Mantieni aperto",Sx="Font",Tx="Allineamento",bx="Stile",yx="Ingrandisci",wx="Rimpicciolisci",xx="Imposta",Ix="Adatta alla selezione",Cx="Adatta",vx="File",kx="Modifica",Dx="Visualizzazione",Px="Preferenze",Bx="Accedi",Ex="Esci",Mx="Sponsorizza",Rx="Sponsorizza",Lx="Adatta alla selezione",Ax="Adatta",Hx="Ingrandisci",zx="Modalit\xE0 scura",Fx="Modalit\xE0 zen",Ox="Modalit\xE0 sviluppatore",jx="Mostra griglia",Ux="Selezione CAD",Gx="Mantieni menu stile aperto",Vx="Mostra sempre le guide",$x="Controlli d'inclinazione",Nx="Controlli d'associazione",Kx="Controlli di clonazione",Wx="Annulla",_x="Ripristina",Yx="Taglia",Zx="Copia",Xx="Incolla",qx="Copia come",Jx="Esporta come",Qx="Seleziona tutto",eI="Deseleziona tutto",tI="Elimina",nI="Nuovo progetto",oI="Apri",sI="Salva",iI="Salva come",rI="Carica contenuti multimediali",aI="Crea nuova pagina",dI="Nuova pagina",lI="Nome pagina",cI="Pagina",pI="Duplica",uI="Chiudi",hI="Copia link invito",mI="Crea progetto multiplayer",gI="Trasforma in progetto multiplayer",fI="Seleziona",SI="Gomma",TI="Matita",bI="Freccia",yI="Casella di testo",wI="Post-it",xI="Rettangolo",II="Ellisse",CI="Triangolo",vI="Linea",kI="Ruota",DI="Blocca rapporto lati",PI="Sblocca rapporto lati",BI="Raggruppa",EI="Separa",MI="Muovi in fondo",RI="Sposta indietro",LI="Sposta avanti",AI="Muovi in fronte",HI="Reimposta angolo",zI="Blocca",FI="Sblocca",OI="Trasferisci a pagina",jI="Ribalta orizzontalmente",UI="Ribalta verticalmente",GI="Sposta",VI="In primo piano",$I="Sposta avanti",NI="Sposta indietro",KI="In fondo",WI="Lingua",_I="Posizione dock",YI="In basso",ZI="Sinistra",XI="Destra",qI="In Alto",Xl={"style.menu.color":ux,"style.menu.fill":hx,"style.menu.dash":mx,"style.menu.size":gx,"style.menu.keep.open":fx,"style.menu.font":Sx,"style.menu.align":Tx,styles:bx,"zoom.in":yx,"zoom.out":wx,to:xx,"to.selection":Ix,"to.fit":Cx,"menu.file":vx,"menu.edit":kx,"menu.view":Dx,"menu.preferences":Px,"menu.sign.in":Bx,"menu.sign.out":Ex,sponsored:Mx,"become.a.sponsor":Rx,"zoom.to.selection":Lx,"zoom.to.fit":Ax,"zoom.to":Hx,"preferences.dark.mode":zx,"preferences.focus.mode":Fx,"preferences.debug.mode":Ox,"preferences.show.grid":jx,"preferences.use.cad.selection":Ux,"preferences.keep.stylemenu.open":Gx,"preferences.always.show.snaps":Vx,"preferences.rotate.handles":$x,"preferences.binding.handles":Nx,"preferences.clone.handles":Kx,undo:Wx,redo:_x,cut:Yx,copy:Zx,paste:Xx,"copy.as":qx,"export.as":Jx,"select.all":Qx,"select.none":eI,delete:tI,"new.project":nI,open:oI,save:sI,"save.as":iI,"upload.media":rI,"create.page":aI,"new.page":dI,"page.name":lI,page:cI,duplicate:pI,cancel:uI,"copy.invite.link":hI,"create.multiplayer.project":mI,"copy.multiplayer.project":gI,select:fI,eraser:SI,draw:TI,arrow:bI,text:yI,sticky:wI,Rectangle:xI,Ellipse:II,Triangle:CI,Line:vI,rotate:kI,"lock.aspect.ratio":DI,"unlock.aspect.ratio":PI,group:BI,ungroup:EI,"move.to.back":MI,"move.backward":RI,"move.forward":LI,"move.to.front":AI,"reset.angle":HI,lock:zI,unlock:FI,"move.to.page":OI,"flip.horizontal":jI,"flip.vertical":UI,move:GI,"to.front":VI,forward:$I,backward:NI,back:KI,language:WI,"dock.position":_I,bottom:YI,left:ZI,right:XI,top:qI};var JI="\u8272",QI="\u5857\u308A\u3064\u3076\u3057",eC="\u7DDA",tC="\u5927\u304D\u3055",nC="\u5E38\u306B\u8868\u793A",oC="\u30D5\u30A9\u30F3\u30C8",sC="\u914D\u7F6E",iC="\u30B9\u30BF\u30A4\u30EB",rC="\u62E1\u5927",aC="\u7E2E\u5C0F",dC=" ",lC="\u9078\u629E\u3057\u305F\u30A2\u30A4\u30C6\u30E0\u306B\u5408\u308F\u305B\u308B",cC="\u3059\u3079\u3066\u8868\u793A",pC="\u30D5\u30A1\u30A4\u30EB",uC="\u7DE8\u96C6",hC="\u8868\u793A",mC="\u8A2D\u5B9A",gC="\u30B5\u30A4\u30F3\u30A4\u30F3",fC="\u30B5\u30A4\u30F3\u30A2\u30A6\u30C8",SC="\u652F\u63F4",TC="\u652F\u63F4\u3059\u308B",bC="\u9078\u629E\u3057\u305F\u30A2\u30A4\u30C6\u30E0\u306B\u5408\u308F\u305B\u3066\u62E1\u5927",yC="\u62E1\u5927\u3057\u3066\u3059\u3079\u3066\u3092\u8868\u793A",wC=" ",xC="\u30C0\u30FC\u30AF\u30E2\u30FC\u30C9",IC="\u30D5\u30A9\u30FC\u30AB\u30B9\u30E2\u30FC\u30C9",CC="\u30C7\u30D0\u30C3\u30B0\u30E2\u30FC\u30C9",vC="\u30B0\u30EA\u30C3\u30C9\u3092\u8868\u793A",kC="CAD\u306E\u9078\u629E\u6CD5\u3092\u4F7F\u7528",DC="\u30B9\u30BF\u30A4\u30EB\u30E1\u30CB\u30E5\u30FC\u3092\u5E38\u306B\u8868\u793A",PC="\u30B9\u30CA\u30C3\u30D7\u3092\u5E38\u306B\u8868\u793A",BC="\u56DE\u8EE2\u30CF\u30F3\u30C9\u30EB\u3092\u8868\u793A",EC="\u7D50\u5408\u30CF\u30F3\u30C9\u30EB\u3092\u8868\u793A",MC="\u30AF\u30ED\u30FC\u30F3\u30CF\u30F3\u30C9\u30EB\u3092\u8868\u793A",RC="\u5143\u306B\u623B\u3059",LC="\u3084\u308A\u76F4\u3057",AC="\u5207\u308A\u53D6\u308A",HC="\u30B3\u30D4\u30FC",zC="\u8CBC\u308A\u4ED8\u3051",FC="\u5F62\u5F0F\u3092\u9078\u629E\u3057\u3066\u30B3\u30D4\u30FC",OC="\u5F62\u5F0F\u3092\u9078\u629E\u3057\u3066\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",jC="\u3059\u3079\u3066\u9078\u629E",UC="\u9078\u629E\u3092\u89E3\u9664",GC="\u524A\u9664",VC="\u65B0\u3057\u3044\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8",$C="\u958B\u304F",NC="\u4FDD\u5B58",KC="\u540D\u524D\u3092\u3064\u3051\u3066\u4FDD\u5B58",WC="\u30E1\u30C7\u30A3\u30A2\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9",_C="\u30DA\u30FC\u30B8\u3092\u4F5C\u6210",YC="\u65B0\u898F\u30DA\u30FC\u30B8",ZC="\u30DA\u30FC\u30B8\u540D",XC="\u8907\u88FD",qC="\u30AD\u30E3\u30F3\u30BB\u30EB",JC="\u5171\u6709\u30EA\u30F3\u30AF\u3092\u30AF\u30EA\u30C3\u30D7\u30DC\u30FC\u30C9\u306B\u30B3\u30D4\u30FC",QC="\u30DE\u30EB\u30C1\u30D7\u30EC\u30A4\u30E4\u30FC\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u3092\u4F5C\u6210",ev="\u30DE\u30EB\u30C1\u30D7\u30EC\u30A4\u30E4\u30FC\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u306B\u30B3\u30D4\u30FC",tv="\u9078\u629E",nv="\u6D88\u3057\u30B4\u30E0",ov="\u63CF\u753B",sv="\u77E2\u5370",iv="\u30C6\u30AD\u30B9\u30C8",rv="\u3075\u305B\u3093",av="\u9577\u65B9\u5F62",dv="\u6955\u5186\u5F62",lv="\u4E09\u89D2\u5F62",cv="\u7DDA",pv="\u56DE\u8EE2",uv="\u7E26\u6A2A\u6BD4\u3092\u56FA\u5B9A",hv="\u7E26\u6A2A\u6BD4\u306E\u56FA\u5B9A\u3092\u89E3\u9664",mv="\u30B0\u30EB\u30FC\u30D4\u30F3\u30B0",gv="\u30B0\u30EB\u30FC\u30D7\u89E3\u9664",fv="\u6700\u5F8C\u9762\u306B\u79FB\u52D5",Sv="\u3072\u3068\u3064\u5F8C\u308D\u306B\u79FB\u52D5",Tv="\u3072\u3068\u3064\u524D\u306B\u79FB\u52D5",bv="\u6700\u80CC\u9762\u306B\u79FB\u52D5",yv="\u89D2\u5EA6\u3092\u521D\u671F\u5316",wv="\u30ED\u30C3\u30AF",xv="\u30A2\u30F3\u30ED\u30C3\u30AF",Iv="\u30DA\u30FC\u30B8\u3078\u79FB\u52D5",Cv="\u6C34\u5E73\u65B9\u5411\u306B\u53CD\u8EE2",vv="\u5782\u76F4\u65B9\u5411\u306B\u53CD\u8EE2",kv="\u79FB\u52D5",Dv="\u6700\u524D\u9762\u3078",Pv="\u3072\u3068\u3064\u524D\u3078",Bv="\u3072\u3068\u3064\u5F8C\u308D\u3078",Ev="\u6700\u80CC\u9762\u3078",Mv="\u8A00\u8A9E",ql={"style.menu.color":JI,"style.menu.fill":QI,"style.menu.dash":eC,"style.menu.size":tC,"style.menu.keep.open":nC,"style.menu.font":oC,"style.menu.align":sC,styles:iC,"zoom.in":rC,"zoom.out":aC,to:dC,"to.selection":lC,"to.fit":cC,"menu.file":pC,"menu.edit":uC,"menu.view":hC,"menu.preferences":mC,"menu.sign.in":gC,"menu.sign.out":fC,sponsored:SC,"become.a.sponsor":TC,"zoom.to.selection":bC,"zoom.to.fit":yC,"zoom.to":wC,"preferences.dark.mode":xC,"preferences.focus.mode":IC,"preferences.debug.mode":CC,"preferences.show.grid":vC,"preferences.use.cad.selection":kC,"preferences.keep.stylemenu.open":DC,"preferences.always.show.snaps":PC,"preferences.rotate.handles":BC,"preferences.binding.handles":EC,"preferences.clone.handles":MC,undo:RC,redo:LC,cut:AC,copy:HC,paste:zC,"copy.as":FC,"export.as":OC,"select.all":jC,"select.none":UC,delete:GC,"new.project":VC,open:$C,save:NC,"save.as":KC,"upload.media":WC,"create.page":_C,"new.page":YC,"page.name":ZC,duplicate:XC,cancel:qC,"copy.invite.link":JC,"create.multiplayer.project":QC,"copy.multiplayer.project":ev,select:tv,eraser:nv,draw:ov,arrow:sv,text:iv,sticky:rv,Rectangle:av,Ellipse:dv,Triangle:lv,Line:cv,rotate:pv,"lock.aspect.ratio":uv,"unlock.aspect.ratio":hv,group:mv,ungroup:gv,"move.to.back":fv,"move.backward":Sv,"move.forward":Tv,"move.to.front":bv,"reset.angle":yv,lock:wv,unlock:xv,"move.to.page":Iv,"flip.horizontal":Cv,"flip.vertical":vv,move:kv,"to.front":Dv,forward:Pv,backward:Bv,back:Ev,language:Mv};var Rv="\uC0C9\uAE54",Lv="\uCC44\uC6B0\uAE30",Av="\uD14C\uB450\uB9AC",Hv="\uD06C\uAE30",zv="\uD56D\uC0C1 \uC5F4\uAE30",Fv="\uAE00\uAF34",Ov="\uC815\uB82C",jv="\uC2A4\uD0C0\uC77C",Uv="\uD655\uB300",Gv="\uCD95\uC18C",Vv="to",$v="\uC120\uD0DD \uC694\uC18C \uB9DE\uCDA4",Nv="\uC804\uCCB4 \uB9DE\uCDA4",Kv="\uD30C\uC77C",Wv="\uD3B8\uC9D1",_v="\uBCF4\uAE30",Yv="\uC124\uC815",Zv="\uB85C\uADF8\uC778",Xv="\uB85C\uADF8\uC544\uC6C3",qv="\uD6C4\uC6D0",Jv="\uD6C4\uC6D0\uC790 \uB418\uAE30",Qv="\uC120\uD0DD \uC694\uC18C \uB9DE\uCD94\uAE30",ek="\uC804\uCCB4 \uB9DE\uCD94\uAE30",tk="\uB9DE\uCD94\uAE30",nk="\uB2E4\uD06C \uBAA8\uB4DC",ok="\uC9D1\uC911 \uBAA8\uB4DC",sk="\uB514\uBC84\uADF8 \uBAA8\uB4DC",ik="\uACA9\uC790 \uBCF4\uAE30",rk="CAD \uC120\uD0DD \uC0AC\uC6A9",ak="\uC2A4\uD0C0\uC77C \uBA54\uB274 \uD56D\uC0C1 \uC5F4\uAE30",dk="Snap \uD56D\uC0C1 \uC5F4\uAE30",lk="\uD68C\uC804 \uBCF4\uC774\uAE30",ck="Binding Handles",pk="\uBCF5\uC81C \uBCF4\uC774\uAE30",uk="\uC2E4\uD589 \uCDE8\uC18C",hk="\uB2E4\uC2DC \uC2E4\uD589",mk="\uC790\uB974\uAE30",gk="\uBCF5\uC0AC",fk="\uBD99\uC5EC\uB123\uAE30",Sk="\uB2E4\uB978 \uD615\uC2DD\uC73C\uB85C \uBCF5\uC0AC\uD558\uAE30",Tk="\uB0B4\uBCF4\uB0B4\uAE30",bk="\uC804\uCCB4 \uC120\uD0DD",yk="\uC120\uD0DD \uC548\uD568",wk="\uC0AD\uC81C\uD558\uAE30",xk="\uC0C8 \uD504\uB85C\uC81D\uD2B8",Ik="\uC5F4\uAE30",Ck="\uC800\uC7A5",vk="\uB2E4\uB978 \uC774\uB984\uC73C\uB85C \uC800\uC7A5",kk="\uBBF8\uB514\uC5B4 \uC5C5\uB85C\uB4DC",Dk="\uC0C8 \uD398\uC774\uC9C0 \uB9CC\uB4E4\uAE30",Pk="\uC0C8 \uD398\uC774\uC9C0",Bk="\uD398\uC774\uC9C0 \uC774\uB984",Ek="\uBCF5\uC81C",Mk="\uCDE8\uC18C",Rk="\uCD08\uB300 \uB9C1\uD06C \uBCF5\uC0AC\uD558\uAE30",Lk="\uACF5\uB3D9 \uD504\uB85C\uC81D\uD2B8 \uB9CC\uB4E4\uAE30",Ak="\uACF5\uB3D9 \uD504\uB85C\uC81D\uD2B8\uB85C \uBCF5\uC0AC\uD558\uAE30",Hk="\uC120\uD0DD",zk="\uC9C0\uC6B0\uAC1C",Fk="\uADF8\uB9AC\uAE30",Ok="\uD654\uC0B4\uD45C",jk="\uD14D\uC2A4\uD2B8",Uk="\uBA54\uBAA8",Gk="\uC0AC\uAC01\uD615",Vk="\uC6D0",$k="\uC0BC\uAC01\uD615",Nk="\uC120",Kk="\uD68C\uC804",Wk="\uBE44\uC728 \uC7A0\uAE08",_k="\uBE44\uC728 \uC7A0\uAE08 \uD574\uC81C",Yk="\uADF8\uB8F9\uD654",Zk="\uADF8\uB8F9\uD654 \uD574\uC81C",Xk="\uB9E8 \uB4A4\uB85C \uBCF4\uB0B4\uAE30",qk="\uB4A4\uB85C \uBCF4\uB0B4\uAE30",Jk="\uC55E\uC73C\uB85C \uAC00\uC838\uC624\uAE30",Qk="\uB9E8 \uC55E\uC73C\uB85C \uAC00\uC838\uC624\uAE30",eD="\uD68C\uC804 \uCD08\uAE30\uD654",tD="\uC7A0\uAD6C\uAE30",nD="\uC7A0\uAE08 \uD574\uC81C\uD558\uAE30",oD="\uD398\uC774\uC9C0\uB85C \uC774\uB3D9",sD="\uC218\uD3C9\uC73C\uB85C \uB4A4\uC9D1\uAE30",iD="\uC218\uC9C1\uC73C\uB85C \uB4A4\uC9D1\uAE30",rD="\uC21C\uC11C",aD="\uB9E8 \uC55E\uC73C\uB85C",dD="\uC55E\uC73C\uB85C",lD="\uB4A4\uB85C",cD="\uB9E8 \uB4A4\uB85C",pD="\uC5B8\uC5B4",Jl={"style.menu.color":Rv,"style.menu.fill":Lv,"style.menu.dash":Av,"style.menu.size":Hv,"style.menu.keep.open":zv,"style.menu.font":Fv,"style.menu.align":Ov,styles:jv,"zoom.in":Uv,"zoom.out":Gv,to:Vv,"to.selection":$v,"to.fit":Nv,"menu.file":Kv,"menu.edit":Wv,"menu.view":_v,"menu.preferences":Yv,"menu.sign.in":Zv,"menu.sign.out":Xv,sponsored:qv,"become.a.sponsor":Jv,"zoom.to.selection":Qv,"zoom.to.fit":ek,"zoom.to":tk,"preferences.dark.mode":nk,"preferences.focus.mode":ok,"preferences.debug.mode":sk,"preferences.show.grid":ik,"preferences.use.cad.selection":rk,"preferences.keep.stylemenu.open":ak,"preferences.always.show.snaps":dk,"preferences.rotate.handles":lk,"preferences.binding.handles":ck,"preferences.clone.handles":pk,undo:uk,redo:hk,cut:mk,copy:gk,paste:fk,"copy.as":Sk,"export.as":Tk,"select.all":bk,"select.none":yk,delete:wk,"new.project":xk,open:Ik,save:Ck,"save.as":vk,"upload.media":kk,"create.page":Dk,"new.page":Pk,"page.name":Bk,duplicate:Ek,cancel:Mk,"copy.invite.link":Rk,"create.multiplayer.project":Lk,"copy.multiplayer.project":Ak,select:Hk,eraser:zk,draw:Fk,arrow:Ok,text:jk,sticky:Uk,Rectangle:Gk,Ellipse:Vk,Triangle:$k,Line:Nk,rotate:Kk,"lock.aspect.ratio":Wk,"unlock.aspect.ratio":_k,group:Yk,ungroup:Zk,"move.to.back":Xk,"move.backward":qk,"move.forward":Jk,"move.to.front":Qk,"reset.angle":eD,lock:tD,unlock:nD,"move.to.page":oD,"flip.horizontal":sD,"flip.vertical":iD,move:rD,"to.front":aD,forward:dD,backward:lD,back:cD,language:pD};var uD="Color",hD="Fill",mD="Dash",gD="Size",fD="Keep Open",SD="Font",TD="Align",bD="Styles",yD="Zoom In",wD="Zoom Out",xD="To",ID="To Selection",CD="To Fit",vD="File",kD="Edit",DD="View",PD="Preferences",BD="Sign In",ED="Sign Out",MD="Sponsored",RD="Become a Sponsor",LD="Back to content",AD="Zoom to Selection",HD="Zoom to Fit",zD="Zoom to",FD="Dark Mode",OD="Focus Mode",jD="Debug Mode",UD="Show Grid",GD="Use CAD Selection",VD="Keep Style Menu Open",$D="Always Show Snaps",ND="Rotate Handles",KD="Binding Handles",WD="Clone Handles",_D="Undo",YD="Redo",ZD="Cut",XD="Copy",qD="Paste",JD="Copy As",QD="Export As",eP="Select All",tP="Select None",nP="Delete",oP="New Project",sP="Open",iP="Save",rP="Save As",aP="Upload Media",dP="Create Page",lP="New Page",cP="Page Name",pP="Duplicate",uP="Cancel",hP="Copy Invite Link",mP="Copy ReadOnly Link",gP="Create a Multiplayer Project",fP="Copy to Multiplayer Project",SP="Select",TP="Eraser",bP="Draw",yP="Arrow",wP="Text",xP="Sticky",IP="Rectangle",CP="Ellipse",vP="Triangle",kP="Line",DP="Rotate",PP="Lock Aspect Ratio",BP="Unlock Aspect Ratio",EP="Group",MP="Ungroup",RP="Move to Back",LP="Move Backward",AP="Move Forward",HP="Move to Front",zP="Reset Angle",FP="Lock",OP="Unlock",jP="Move to Page",UP="Flip Horizontal",GP="Flip Vertical",VP="Move",$P="To Front",NP="Forward",KP="Backward",WP="To Back",_P="Language",YP="Learn More",ZP="Dock Position",XP="Bottom",qP="Left",JP="Right",QP="Top",e2="Page",Ql={"style.menu.color":uD,"style.menu.fill":hD,"style.menu.dash":mD,"style.menu.size":gD,"style.menu.keep.open":fD,"style.menu.font":SD,"style.menu.align":TD,styles:bD,"zoom.in":yD,"zoom.out":wD,to:xD,"to.selection":ID,"to.fit":CD,"menu.file":vD,"menu.edit":kD,"menu.view":DD,"menu.preferences":PD,"menu.sign.in":BD,"menu.sign.out":ED,sponsored:MD,"become.a.sponsor":RD,"zoom.to.content":LD,"zoom.to.selection":AD,"zoom.to.fit":HD,"zoom.to":zD,"preferences.dark.mode":FD,"preferences.focus.mode":OD,"preferences.debug.mode":jD,"preferences.show.grid":UD,"preferences.use.cad.selection":GD,"preferences.keep.stylemenu.open":VD,"preferences.always.show.snaps":$D,"preferences.rotate.handles":ND,"preferences.binding.handles":KD,"preferences.clone.handles":WD,undo:_D,redo:YD,cut:ZD,copy:XD,paste:qD,"copy.as":JD,"export.as":QD,"select.all":eP,"select.none":tP,delete:nP,"new.project":oP,open:sP,save:iP,"save.as":rP,"upload.media":aP,"create.page":dP,"new.page":lP,"page.name":cP,duplicate:pP,cancel:uP,"copy.invite.link":hP,"copy.readonly.link":mP,"create.multiplayer.project":gP,"copy.multiplayer.project":fP,select:SP,eraser:TP,draw:bP,arrow:yP,text:wP,sticky:xP,Rectangle:IP,Ellipse:CP,Triangle:vP,Line:kP,rotate:DP,"lock.aspect.ratio":PP,"unlock.aspect.ratio":BP,group:EP,ungroup:MP,"move.to.back":RP,"move.backward":LP,"move.forward":AP,"move.to.front":HP,"reset.angle":zP,lock:FP,unlock:OP,"move.to.page":jP,"flip.horizontal":UP,"flip.vertical":GP,move:VP,"to.front":$P,forward:NP,backward:KP,back:WP,language:_P,"translation.link":YP,"dock.position":ZP,bottom:XP,left:qP,right:JP,top:QP,page:e2};var t2="\u0930\u0902\u0917",n2="\u092D\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",o2="\u0927\u0930\u094D\u0915\u093E",s2="\u0906\u0915\u093E\u0930",i2="\u0916\u0941\u0932\u093E \u0930\u093E\u0916\u094D\u0928\u0941\u0939\u094B\u0938\u094D",r2="\u092B\u0928\u094D\u091F",a2="\u092A\u0919\u094D\u0915\u094D\u0924\u093F\u092C\u0926\u094D\u0927",d2="\u0936\u0948\u0932\u0940\u0939\u0930\u0942",l2="\u091C\u0941\u092E \u0907\u0928",c2="\u091C\u0941\u092E \u0906\u0909\u091F",p2="\u091F\u0941",u2="\u091F\u0941 \u0938\u0947\u0932\u0947\u0915\u094D\u0938\u0928",h2="\u091F\u0941 \u092B\u093F\u091F",m2="\u092B\u093E\u0907\u0932",g2="\u0938\u092E\u094D\u092A\u093E\u0926\u0928 \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",f2="\u092D\u094D\u092F\u0942",S2="\u092A\u094D\u0930\u093E\u0925\u092E\u093F\u0915\u0924\u093E\u0939\u0930\u0942",T2="\u0938\u093E\u0907\u0928 \u0907\u0928 \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",b2="\u0938\u093E\u0907\u0928 \u0906\u0909\u091F \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",y2="\u092A\u094D\u0930\u093E\u092F\u094B\u091C\u093F\u0924",w2="\u092A\u094D\u0930\u093E\u092F\u094B\u091C\u0915 \u092C\u0928\u094D\u0928\u0941\u0939\u094B\u0938\u094D",x2="\u091C\u0941\u092E \u091F\u0941 \u0938\u0947\u0932\u0947\u0915\u094D\u0938\u0928",I2="\u091C\u0941\u092E \u091F\u0941 \u092B\u093F\u091F",C2="\u091C\u0941\u092E \u091F\u0941",v2="\u0905\u0901\u0927\u094D\u092F\u093E\u0930\u094B \u092E\u094B\u0921",k2="\u092B\u094B\u0915\u0938 \u092E\u094B\u0921",D2="\u0921\u093F\u092C\u0917 \u092E\u094B\u0921",P2="\u0917\u094D\u0930\u093F\u0921 \u0926\u0947\u0916\u093E\u0909\u0928\u0941\u0939\u094B\u0938\u094D",B2="CAD \u0938\u0947\u0932\u0947\u0915\u094D\u0938\u0928 \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",E2="\u0938\u094D\u091F\u093E\u0907\u0932 \u092E\u0947\u0928\u0941 \u0916\u0941\u0932\u093E \u0930\u093E\u0916\u094D\u0928\u0941\u0939\u094B\u0938\u094D",M2="\u0938\u0927\u0948\u0901 \u0938\u094D\u0928\u094D\u092F\u093E\u092A\u0939\u0930\u0942 \u0926\u0947\u0916\u093E\u0909\u0928\u0941\u0939\u094B\u0938\u094D",R2="\u0939\u094D\u092F\u093E\u0928\u094D\u0921\u0932\u0939\u0930\u0942 \u0918\u0941\u092E\u093E\u0909\u0928\u0941\u0939\u094B\u0938\u094D",L2="\u092C\u093E\u0907\u0928\u094D\u0921\u093F\u0919 \u0939\u094D\u092F\u093E\u0928\u094D\u0921\u0932\u0939\u0930\u0942",A2="\u0915\u094D\u0932\u094B\u0928 \u0939\u094D\u092F\u093E\u0928\u094D\u0921\u0932\u0939\u0930\u0942",H2="\u092A\u0942\u0930\u094D\u0935\u0935\u0924 \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",z2="\u092A\u0941\u0928\u0903 \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",F2="\u0915\u091F \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",O2="\u0915\u092A\u093F \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",j2="\u092A\u0947\u0938\u094D\u091F \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",U2="\u0915\u092A\u093F \u090F\u091C",G2="\u090F\u0915\u094D\u0938\u092A\u094B\u0930\u094D\u091F \u090F\u091C",V2="\u0938\u092C\u0948 \u091B\u093E\u0928\u094D\u0928\u0941\u0939\u094B\u0938\u094D",$2="\u0915\u0947\u0939\u093F \u092A\u0928\u093F \u0938\u0947\u0932\u0947\u0915\u094D\u091F \u0928\u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",N2="\u092E\u0947\u091F\u093E\u0909\u0928\u0941\u0939\u094B\u0938\u094D",K2="\u0928\u092F\u093E\u0901 \u092A\u0930\u093F\u092F\u094B\u091C\u0928\u093E",W2="\u0916\u094B\u0932\u094D\u0928\u0941\u0939\u094B\u0938\u094D",_2="\u0938\u0941\u0930\u0915\u094D\u0937\u093F\u0924 \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",Y2="\u0938\u0947\u092D \u090F\u091C",Z2="\u092E\u093F\u0921\u093F\u092F\u093E \u0905\u092A\u0932\u094B\u0921 \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",X2="\u092A\u0943\u0937\u094D\u0920 \u0938\u093F\u0930\u094D\u091C\u0928\u093E \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",q2="\u0928\u092F\u093E\u0901 \u092A\u0943\u0937\u094D\u0920 \u0938\u093F\u0930\u094D\u091C\u0928\u093E \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",J2="\u092A\u0943\u0937\u094D\u0920\u0915\u094B \u0928\u093E\u092E",Q2="\u0905\u0928\u0941\u0932\u093F\u092A\u093F \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",eB="\u0930\u0926\u094D\u0926 \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",tB="\u0928\u093F\u092E\u0928\u094D\u0924\u094D\u0930\u0923\u093E \u0932\u093F\u0919\u094D\u0915 \u0915\u092A\u093F \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",nB="\u092E\u0932\u094D\u091F\u093F\u092A\u094D\u0932\u0947\u092F\u0930 \u092A\u0930\u093F\u092F\u094B\u091C\u0928\u093E \u0938\u093F\u0930\u094D\u091C\u0928\u093E \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",oB="\u092E\u0932\u094D\u091F\u093F\u092A\u094D\u0932\u0947\u092F\u0930 \u092A\u094D\u0930\u094B\u091C\u0947\u0915\u094D\u091F\u092E\u093E \u0915\u092A\u093F \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",sB="\u0938\u0947\u0932\u0947\u0915\u094D\u091F",iB="\u0907\u0930\u0947\u091C\u0930",rB="\u091A\u093F\u0924\u094D\u0930 \u092C\u0928\u093E\u0909\u0928\u0941",aB="\u0924\u0940\u0930",dB="\u0936\u092C\u094D\u0926",lB="\u091F\u093E\u0901\u0938\u093F\u0928\u0947",cB="\u0906\u092F\u0924",pB="\u0926\u0940\u0930\u094D\u0918\u0935\u0943\u0924\u094D\u0924",uB="\u0924\u094D\u0930\u093F\u092D\u0941\u091C",hB="\u0930\u0947\u0916\u093E",mB="\u0918\u0941\u092E\u093E\u0909\u0928\u0941\u0939\u094B\u0938\u094D",gB="\u0906\u0915\u093E\u0930 \u0905\u0928\u0941\u092A\u093E\u0924 \u0932\u0915 \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",fB="\u0906\u0915\u093E\u0930 \u0905\u0928\u0941\u092A\u093E\u0924 \u0905\u0928\u0932\u0915 \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",SB="\u0938\u092E\u0942\u0939",TB="\u0938\u092E\u0942\u0939 \u0930\u0926\u094D\u0926 \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",bB="\u092A\u091B\u093E\u0921\u093F \u0938\u093E\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",yB="\u0925\u092A \u092A\u091B\u093E\u0921\u093F \u0938\u093E\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",wB="\u0905\u0917\u093E\u0921\u093F \u0938\u093E\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",xB="\u0925\u092A \u0905\u0917\u093E\u0921\u093F \u0938\u093E\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",IB="\u0915\u094B\u0923 \u0930\u093F\u0938\u0947\u091F \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",CB="\u0932\u0915 \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",vB="\u0905\u0928\u0932\u0915 \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",kB="\u092A\u0943\u0937\u094D\u0920\u092E\u093E \u0938\u093E\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",DB="\u0924\u0947\u0930\u094D\u0938\u094B \u092B\u094D\u0932\u093F\u092A \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",PB="\u0920\u093E\u0921\u094B \u092B\u094D\u0932\u093F\u092A \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",BB="\u0938\u093E\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",EB="\u0925\u092A \u0905\u0917\u093E\u0921\u093F",MB="\u0905\u0917\u093E\u0921\u093F",RB="\u092A\u091B\u093E\u0921\u093F",LB="\u0925\u092A \u092A\u091B\u093E\u0921\u093F",AB="\u092D\u093E\u0937\u093E",ec={"style.menu.color":t2,"style.menu.fill":n2,"style.menu.dash":o2,"style.menu.size":s2,"style.menu.keep.open":i2,"style.menu.font":r2,"style.menu.align":a2,styles:d2,"zoom.in":l2,"zoom.out":c2,to:p2,"to.selection":u2,"to.fit":h2,"menu.file":m2,"menu.edit":g2,"menu.view":f2,"menu.preferences":S2,"menu.sign.in":T2,"menu.sign.out":b2,sponsored:y2,"become.a.sponsor":w2,"zoom.to.selection":x2,"zoom.to.fit":I2,"zoom.to":C2,"preferences.dark.mode":v2,"preferences.focus.mode":k2,"preferences.debug.mode":D2,"preferences.show.grid":P2,"preferences.use.cad.selection":B2,"preferences.keep.stylemenu.open":E2,"preferences.always.show.snaps":M2,"preferences.rotate.handles":R2,"preferences.binding.handles":L2,"preferences.clone.handles":A2,undo:H2,redo:z2,cut:F2,copy:O2,paste:j2,"copy.as":U2,"export.as":G2,"select.all":V2,"select.none":$2,delete:N2,"new.project":K2,open:W2,save:_2,"save.as":Y2,"upload.media":Z2,"create.page":X2,"new.page":q2,"page.name":J2,duplicate:Q2,cancel:eB,"copy.invite.link":tB,"create.multiplayer.project":nB,"copy.multiplayer.project":oB,select:sB,eraser:iB,draw:rB,arrow:aB,text:dB,sticky:lB,Rectangle:cB,Ellipse:pB,Triangle:uB,Line:hB,rotate:mB,"lock.aspect.ratio":gB,"unlock.aspect.ratio":fB,group:SB,ungroup:TB,"move.to.back":bB,"move.backward":yB,"move.forward":wB,"move.to.front":xB,"reset.angle":IB,lock:CB,unlock:vB,"move.to.page":kB,"flip.horizontal":DB,"flip.vertical":PB,move:BB,"to.front":EB,forward:MB,backward:RB,back:LB,language:AB};var HB="Farge",zB="Fyll",FB="Linje",OB="St\xF8rrelse",jB="Hold \xE5pen",UB="Teksttype",GB="Juster",VB="Stiler",$B="Zoom inn",NB="Zoom ut",KB="til",WB="Til valg",_B="For \xE5 passe",YB="Fil",ZB="Rediger",XB="Vis",qB="Preferanser",JB="Logg inn",QB="Logg ut",eE="Sponset",tE="Bli en sponsor",nE="Zoom til valg",oE="Zoom for \xE5 passe",sE="Zoom til",iE="M\xF8rk modus",rE="Fokus modus",aE="Debug modus",dE="Vis rutenett",lE="Bruk CAD seleksjon",cE="Hold stilmeny \xE5pen",pE="Vis alltid snaps",uE="Vis roteringsh\xE5ndtak",hE="Vis bindingsh\xE5ndtak",mE="Vis kloningsh\xE5ndtak",gE="Angre",fE="Gj\xF8r om",SE="Klipp ut",TE="Kopier",bE="Lim inn",yE="Kopier som",wE="Eksporter som",xE="Velg alle",IE="Velg ingen",CE="Slett",vE="Nytt prosjekt",kE="\xC5pne",DE="Lagre",PE="Lagre som",BE="Last opp media",EE="Opprett side",ME="Ny side",RE="Sidenavn",LE="Dupliser",AE="Avbryt",HE="Kopier invitasjonslink",zE="Opprett et flerspiller prosjekt",FE="Kopier til flerspiller prosjekt",OE="Velg",jE="Viskel\xE6r",UE="Tegn",GE="Pil",VE="Tekst",$E="Lapp",NE="Rektangel",KE="Ellipse",WE="Trekant",_E="Linje",YE="Roter",ZE="L\xE5s st\xF8rrelsesforhold",XE="L\xE5s opp st\xF8rrelsesforhold",qE="Grupper",JE="Avgrupper",QE="Flytt bakerst",eM="Flytt bakover",tM="Flytt forover",nM="Flytt til front",oM="Tilbakestill vinkel",sM="L\xE5s",iM="L\xE5s opp",rM="Flytt til side",aM="Snu horisontalt",dM="Snu vertikalt",lM="Flytt",cM="Foran",pM="Framover",uM="Bakover",hM="Bakerst",mM="Spr\xE5k",tc={"style.menu.color":HB,"style.menu.fill":zB,"style.menu.dash":FB,"style.menu.size":OB,"style.menu.keep.open":jB,"style.menu.font":UB,"style.menu.align":GB,styles:VB,"zoom.in":$B,"zoom.out":NB,to:KB,"to.selection":WB,"to.fit":_B,"menu.file":YB,"menu.edit":ZB,"menu.view":XB,"menu.preferences":qB,"menu.sign.in":JB,"menu.sign.out":QB,sponsored:eE,"become.a.sponsor":tE,"zoom.to.selection":nE,"zoom.to.fit":oE,"zoom.to":sE,"preferences.dark.mode":iE,"preferences.focus.mode":rE,"preferences.debug.mode":aE,"preferences.show.grid":dE,"preferences.use.cad.selection":lE,"preferences.keep.stylemenu.open":cE,"preferences.always.show.snaps":pE,"preferences.rotate.handles":uE,"preferences.binding.handles":hE,"preferences.clone.handles":mE,undo:gE,redo:fE,cut:SE,copy:TE,paste:bE,"copy.as":yE,"export.as":wE,"select.all":xE,"select.none":IE,delete:CE,"new.project":vE,open:kE,save:DE,"save.as":PE,"upload.media":BE,"create.page":EE,"new.page":ME,"page.name":RE,duplicate:LE,cancel:AE,"copy.invite.link":HE,"create.multiplayer.project":zE,"copy.multiplayer.project":FE,select:OE,eraser:jE,draw:UE,arrow:GE,text:VE,sticky:$E,Rectangle:NE,Ellipse:KE,Triangle:WE,Line:_E,rotate:YE,"lock.aspect.ratio":ZE,"unlock.aspect.ratio":XE,group:qE,ungroup:JE,"move.to.back":QE,"move.backward":eM,"move.forward":tM,"move.to.front":nM,"reset.angle":oM,lock:sM,unlock:iM,"move.to.page":rM,"flip.horizontal":aM,"flip.vertical":dM,move:lM,"to.front":cM,forward:pM,backward:uM,back:hM,language:mM};var gM="Kolor",fM="Wype\u0142nienie",SM="Linia",TM="Rozmiar",bM="Zachowaj otwarte",yM="Czcionka",wM="Wyr\xF3wnanie",xM="Style",IM="Przybli\u017C",CM="Oddal",vM="do",kM="Do zaznaczenia",DM="Do wype\u0142nienia",PM="Plik",BM="Edycja",EM="Widok",MM="Preferencje",RM="Zaloguj",LM="Wyloguj",AM="Sponsorzy",HM="Zosta\u0144 sponsorem",zM="Przybli\u017C do zaznaczenia",FM="Wype\u0142nij ekran",OM="Przybli\u017C do",jM="Tryb ciemny",UM="Tryb skupienia",GM="Tryb debugowania",VM="Poka\u017C siatk\u0119",$M="U\u017Cyj zaznaczania CAD",NM="Zachowaj menu styli otwarte",KM="Przyci\u0105gaj obiekty",WM="Uchwyty obrotu",_M="Uchwyty powi\u0105zania",YM="Uchwyty klonuj\u0105ce",ZM="Cofnij",XM="Powt\xF3rz",qM="Wytnij",JM="Kopiuj",QM="Wklej",eR="Kopiuj jako",tR="Eksportuj jako",nR="Zaznacz wszystko",oR="Odznacz wszystko",sR="Usu\u0144",iR="Nowy projekt",rR="Otw\xF3rz",aR="Zapisz",dR="Zapisz jako",lR="Za\u0142aduj multimedia",cR="Utw\xF3rz stron\u0119",pR="Nowa strona",uR="Nazwa strony",hR="Powiel",mR="Anuluj",gR="Kopiuj link zaproszenia",fR="Stw\xF3rz projekt wieloosobowy",SR="Kopiuj do projektu wieloosobowego",TR="Zaznacz",bR="Gumka",yR="Rysuj",wR="Strza\u0142ka",xR="Tekst",IR="Naklejka",CR="Prostok\u0105t",vR="Elipsa",kR="Tr\xF3jk\u0105t",DR="Linia",PR="Obr\xF3\u0107",BR="Zablokuj proporcje",ER="Odblokuj proporcje",MR="Grupuj",RR="Rozgrupuj",LR="Przenie\u015B na ty\u0142",AR="Przesu\u0144 do ty\u0142u",HR="Przesu\u0144 do przodu",zR="Przenie\u015B na prz\xF3d",FR="Resetuj k\u0105t",OR="Zablokuj",jR="Odblokuj",UR="Przenie\u015B na stron\u0119",GR="Odwr\xF3\u0107 w poziomie",VR="Odwr\xF3\u0107 w pionie",$R="Przenie\u015B",NR="Na wierzch",KR="Do przodu",WR="Do ty\u0142u",_R="Na sp\xF3d",YR="J\u0119zyk",nc={"style.menu.color":gM,"style.menu.fill":fM,"style.menu.dash":SM,"style.menu.size":TM,"style.menu.keep.open":bM,"style.menu.font":yM,"style.menu.align":wM,styles:xM,"zoom.in":IM,"zoom.out":CM,to:vM,"to.selection":kM,"to.fit":DM,"menu.file":PM,"menu.edit":BM,"menu.view":EM,"menu.preferences":MM,"menu.sign.in":RM,"menu.sign.out":LM,sponsored:AM,"become.a.sponsor":HM,"zoom.to.selection":zM,"zoom.to.fit":FM,"zoom.to":OM,"preferences.dark.mode":jM,"preferences.focus.mode":UM,"preferences.debug.mode":GM,"preferences.show.grid":VM,"preferences.use.cad.selection":$M,"preferences.keep.stylemenu.open":NM,"preferences.always.show.snaps":KM,"preferences.rotate.handles":WM,"preferences.binding.handles":_M,"preferences.clone.handles":YM,undo:ZM,redo:XM,cut:qM,copy:JM,paste:QM,"copy.as":eR,"export.as":tR,"select.all":nR,"select.none":oR,delete:sR,"new.project":iR,open:rR,save:aR,"save.as":dR,"upload.media":lR,"create.page":cR,"new.page":pR,"page.name":uR,duplicate:hR,cancel:mR,"copy.invite.link":gR,"create.multiplayer.project":fR,"copy.multiplayer.project":SR,select:TR,eraser:bR,draw:yR,arrow:wR,text:xR,sticky:IR,Rectangle:CR,Ellipse:vR,Triangle:kR,Line:DR,rotate:PR,"lock.aspect.ratio":BR,"unlock.aspect.ratio":ER,group:MR,ungroup:RR,"move.to.back":LR,"move.backward":AR,"move.forward":HR,"move.to.front":zR,"reset.angle":FR,lock:OR,unlock:jR,"move.to.page":UR,"flip.horizontal":GR,"flip.vertical":VR,move:$R,"to.front":NR,forward:KR,backward:WR,back:_R,language:YR};var ZR="Cor",XR="Preencher",qR="Tra\xE7o",JR="Tamanho",QR="Manter aberto",e5="Fonte",t5="Alinhamento",n5="Estilos",o5="Aumentar zoom",s5="Diminuir zoom",i5="para",r5="Para sele\xE7\xE3o",a5="Para encaixar",d5="Arquivo",l5="Editar",c5="Visualizar",p5="Prefer\xEAncias",u5="Entrar",h5="Sair",m5="Patrocinado",g5="Torne-se um patrocinador",f5="Zoom para a sele\xE7\xE3o",S5="Zoom para ajuste",T5="Zoom para",b5="Modo Escuro",y5="Modo Foco",w5="Modo Debug",x5="Mostrar Grade",I5="Usar sele\xE7\xE3o CAD",C5="Manter Menu de Estilos Aberto",v5="Mostrar Pontos de Ajuste",k5="Controle de Rota\xE7\xE3o",D5="Controle de V\xEDnculos",P5="Controle de Clone",B5="Desfazer",E5="Refazer",M5="Cortar",R5="Copiar",L5="Colar",A5="Copiar como",H5="Exportar como",z5="Selecionar todos",F5="Selecionar nenhum",O5="Deletar",j5="Novo Projeto",U5="Abrir",G5="Salvar",V5="Salvar Como",$5="Carregar M\xEDdia",N5="Criar P\xE1gina",K5="Nova P\xE1gina",W5="Nome da P\xE1gina",_5="Duplicar",Y5="Cancelar",Z5="Copiar Link de Convite",X5="Criar um Projeto Multijogador",q5="Copiar para Projeto Multijogador",J5="Selecionar",Q5="Borracha",e3="Desenhar",t3="Seta",n3="Texto",o3="Adesivo",s3="Ret\xE2ngulo",i3="Elipse",r3="Tri\xE2ngulo",a3="Linha",d3="Rotacionar",l3="Travar Propor\xE7\xE3o da Tela",c3="Destravar Propor\xE7\xE3o da Tela",p3="Agrupar",u3="Desagrupar",h3="Recuar",m3="Enviar para Tr\xE1s",g3="Avan\xE7ar",f3="Trazer para Frente",S3="Reiniciar \xC2ngulo",T3="Travar",b3="Destravar",y3="Mover para P\xE1gina",w3="Virar Horizontalmente",x3="Virar Verticalmente",I3="Mover",C3="Para Frente",v3="Avan\xE7ar",k3="Recuar",D3="Voltar",P3="Idioma",oc={"style.menu.color":ZR,"style.menu.fill":XR,"style.menu.dash":qR,"style.menu.size":JR,"style.menu.keep.open":QR,"style.menu.font":e5,"style.menu.align":t5,styles:n5,"zoom.in":o5,"zoom.out":s5,to:i5,"to.selection":r5,"to.fit":a5,"menu.file":d5,"menu.edit":l5,"menu.view":c5,"menu.preferences":p5,"menu.sign.in":u5,"menu.sign.out":h5,sponsored:m5,"become.a.sponsor":g5,"zoom.to.selection":f5,"zoom.to.fit":S5,"zoom.to":T5,"preferences.dark.mode":b5,"preferences.focus.mode":y5,"preferences.debug.mode":w5,"preferences.show.grid":x5,"preferences.use.cad.selection":I5,"preferences.keep.stylemenu.open":C5,"preferences.always.show.snaps":v5,"preferences.rotate.handles":k5,"preferences.binding.handles":D5,"preferences.clone.handles":P5,undo:B5,redo:E5,cut:M5,copy:R5,paste:L5,"copy.as":A5,"export.as":H5,"select.all":z5,"select.none":F5,delete:O5,"new.project":j5,open:U5,save:G5,"save.as":V5,"upload.media":$5,"create.page":N5,"new.page":K5,"page.name":W5,duplicate:_5,cancel:Y5,"copy.invite.link":Z5,"create.multiplayer.project":X5,"copy.multiplayer.project":q5,select:J5,eraser:Q5,draw:e3,arrow:t3,text:n3,sticky:o3,Rectangle:s3,Ellipse:i3,Triangle:r3,Line:a3,rotate:d3,"lock.aspect.ratio":l3,"unlock.aspect.ratio":c3,group:p3,ungroup:u3,"move.to.back":h3,"move.backward":m3,"move.forward":g3,"move.to.front":f3,"reset.angle":S3,lock:T3,unlock:b3,"move.to.page":y3,"flip.horizontal":w3,"flip.vertical":x3,move:I3,"to.front":C3,forward:v3,backward:k3,back:D3,language:P3};var B3="\u0426\u0432\u0435\u0442",E3="\u0417\u0430\u043F\u043E\u043B\u043D\u044F\u0442\u044C",M3="\u0428\u0442\u0440\u0438\u0445",R3="\u0420\u0430\u0437\u043C\u0435\u0440",L3="\u0414\u0435\u0440\u0436\u0430\u0442\u044C \u043E\u0442\u043A\u0440\u044B\u0442\u044B\u043C",A3="\u0428\u0440\u0438\u0444\u0442",H3="\u0412\u044B\u0440\u043E\u0432\u043D\u044F\u0442\u044C",z3="\u0421\u0442\u0438\u043B\u044C",F3="\u0423\u0432\u0435\u043B\u0438\u0447\u0438\u0442\u044C",O3="\u0423\u043C\u0435\u043D\u044C\u0448\u0438\u0442\u044C",j3="\u043A",U3="\u041A \u0432\u044B\u0434\u0435\u043B\u0435\u043D\u0438\u044E",G3="\u041F\u043E \u0440\u0430\u0437\u043C\u0435\u0440\u0443 \u044D\u043A\u0440\u0430\u043D\u0430",V3="\u0424\u0430\u0439\u043B",$3="\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435",N3="\u0412\u0438\u0434",K3="\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438",W3="\u0412\u043E\u0439\u0442\u0438",_3="\u0412\u044B\u0439\u0442\u0438",Y3="\u0421\u043F\u043E\u043D\u0441\u0438\u0440\u043E\u0432\u0430\u043D\u043E",Z3="\u0421\u0442\u0430\u0442\u044C \u0441\u043F\u043E\u043D\u0441\u043E\u0440\u043E\u043C",X3="\u041F\u0440\u0438\u0431\u043B\u0438\u0437\u0438\u0442\u044C \u043A \u0432\u044B\u0434\u0435\u043B\u0435\u043D\u0438\u044E",q3="\u0423\u0432\u0435\u043B\u0438\u0447\u0438\u0442\u044C \u043F\u043E \u0440\u0430\u0437\u043C\u0435\u0440\u0443 \u044D\u043A\u0440\u0430\u043D\u0430",J3="\u041F\u0440\u0438\u0431\u043B\u0438\u0437\u0438\u0442\u044C \u043A",Q3="\u0422\u0451\u043C\u043D\u0430\u044F \u0442\u0435\u043C\u0430",eL="\u041C\u0438\u043D\u0438\u043C\u0430\u043B\u0438\u0441\u0442\u0438\u0447\u043D\u044B\u0439 \u0440\u0435\u0436\u0438\u043C",tL="\u0420\u0435\u0436\u0438\u043C \u043E\u0442\u043B\u0430\u0434\u043A\u0438",nL="\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0441\u0435\u0442\u043A\u0443",oL="\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C CAD \u0412\u044B\u0434\u0435\u043B\u0435\u043D\u0438\u0435",sL="\u0414\u0435\u0440\u0436\u0430\u0442\u044C \u043C\u0435\u043D\u044E \u0441\u0442\u0438\u043B\u0435\u0439 \u043E\u0442\u043A\u0440\u044B\u0442\u044B\u043C",iL="\u0412\u0441\u0435\u0433\u0434\u0430 \u043F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C \u043F\u0440\u0438\u0432\u044F\u0437\u043A\u0438",rL="\u0420\u0443\u0447\u043A\u0438 \u0432\u0440\u0430\u0449\u0435\u043D\u0438\u044F",aL="\u0420\u0443\u0447\u043A\u0438 \u043F\u0440\u0438\u0432\u044F\u0437\u043A\u0438",dL="\u0420\u0443\u0447\u043A\u0438 \u043A\u043B\u043E\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F",lL="\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C",cL="\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u044C",pL="\u0412\u044B\u0440\u0435\u0437\u0430\u0442\u044C",uL="\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C",hL="\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044C",mL="\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043A\u0430\u043A",gL="\u042D\u043A\u0441\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043A\u0430\u043A",fL="\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0432\u0441\u0451",SL="\u0421\u043D\u044F\u0442\u044C \u0432\u044B\u0434\u0435\u043B\u0435\u043D\u0438\u0435",TL="\u0423\u0434\u0430\u043B\u0438\u0442\u044C",bL="\u041D\u043E\u0432\u044B\u0439 \u043F\u0440\u043E\u0435\u043A\u0442",yL="\u041E\u0442\u043A\u0440\u044B\u0442\u044C",wL="\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",xL="\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u043A\u0430\u043A",IL="\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0444\u043E\u0442\u043E",CL="\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0443",vL="\u041D\u043E\u0432\u0430\u044F \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0430",kL="\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u044B",DL="\u0414\u0443\u0431\u043B\u0438\u0440\u043E\u0432\u0430\u0442\u044C",PL="\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C",BL="\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u0441\u044B\u043B\u043A\u0443 \u043F\u0440\u0438\u0433\u043B\u0430\u0448\u0435\u043D\u0438\u0435",EL="\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043C\u043D\u043E\u0433\u043E\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u0441\u043A\u0438\u0439 \u043F\u0440\u043E\u0435\u043A\u0442",ML="\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0432 \u043C\u043D\u043E\u0433\u043E\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u0441\u043A\u0438\u0439 \u043F\u0440\u043E\u0435\u043A\u0442",RL="\u0412\u044B\u0431\u0438\u0440\u0430\u0442\u044C",LL="\u041B\u0430\u0441\u0442\u0438\u043A",AL="\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C",HL="\u0421\u0442\u0440\u0435\u043B\u043A\u0430",zL="\u0422\u0435\u043A\u0441\u0442",FL="\u0417\u0430\u043C\u0435\u0442\u043A\u0430",OL="\u041F\u0440\u044F\u043C\u043E\u0443\u0433\u043E\u043B\u044C\u043D\u0438\u043A",jL="\u042D\u043B\u043B\u0438\u043F\u0441",UL="\u0422\u0440\u0435\u0443\u0433\u043E\u043B\u044C\u043D\u0438\u043A",GL="\u041B\u0438\u043D\u0438\u044F",VL="\u041F\u043E\u0432\u0435\u0440\u043D\u0443\u0442\u044C",$L="\u0417\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u043E\u043E\u0442\u043D\u043E\u0448\u0435\u043D\u0438\u0435 \u0441\u0442\u043E\u0440\u043E\u043D",NL="\u0420\u0430\u0437\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u043E\u043E\u0442\u043D\u043E\u0448\u0435\u043D\u0438\u0435 \u0441\u0442\u043E\u0440\u043E\u043D",KL="\u0421\u0433\u0440\u0443\u043F\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C",WL="\u0420\u0430\u0437\u0433\u0440\u0443\u043F\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C",_L="\u041F\u0435\u0440\u0435\u043C\u0435\u0441\u0442\u0438\u0442\u044C \u043D\u0430\u0437\u0430\u0434",YL="\u041F\u0435\u0440\u0435\u043C\u0435\u0441\u0442\u0438\u0442\u044C \u043D\u0430 \u0437\u0430\u0434\u043D\u0438\u0439 \u043F\u043B\u0430\u043D",ZL="\u041F\u0435\u0440\u0435\u043C\u0435\u0441\u0442\u0438\u0442\u044C \u0432\u043F\u0435\u0440\u0451\u0434",XL="\u041F\u0435\u0440\u0435\u043C\u0435\u0441\u0442\u0438\u0442\u044C \u043D\u0430 \u043F\u0435\u0440\u0435\u0434\u043D\u0438\u0439 \u043F\u043B\u0430\u043D",qL="\u0421\u0431\u0440\u043E\u0441 \u0443\u0433\u043B\u0430",JL="\u0411\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u043A\u0430",QL="\u0420\u0430\u0437\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u043A\u0430",e8="\u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u043D\u0430 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0443",t8="\u041F\u0435\u0440\u0435\u0432\u0435\u0440\u043D\u0443\u0442\u044C \u0433\u043E\u0440\u0438\u0437\u043E\u043D\u0442\u0430\u043B\u044C\u043D\u043E",n8="\u041F\u0435\u0440\u0435\u0432\u0435\u0440\u043D\u0443\u0442\u044C \u0432\u0435\u0440\u0442\u0438\u043A\u0430\u043B\u044C\u043D\u043E",o8="\u041F\u0435\u0440\u0435\u043C\u0435\u0441\u0442\u0438\u0442\u044C",s8="\u041D\u0430 \u043F\u0435\u0440\u0435\u0434\u043D\u0438\u0439 \u043F\u043B\u0430\u043D",i8="\u0412\u043F\u0435\u0440\u0435\u0434",r8="\u041D\u0430 \u0437\u0430\u0434\u043D\u0438\u0439 \u043F\u043B\u0430\u043D",a8="\u041D\u0430\u0437\u0430\u0434",d8="\u042F\u0437\u044B\u043A",sc={"style.menu.color":B3,"style.menu.fill":E3,"style.menu.dash":M3,"style.menu.size":R3,"style.menu.keep.open":L3,"style.menu.font":A3,"style.menu.align":H3,styles:z3,"zoom.in":F3,"zoom.out":O3,to:j3,"to.selection":U3,"to.fit":G3,"menu.file":V3,"menu.edit":$3,"menu.view":N3,"menu.preferences":K3,"menu.sign.in":W3,"menu.sign.out":_3,sponsored:Y3,"become.a.sponsor":Z3,"zoom.to.selection":X3,"zoom.to.fit":q3,"zoom.to":J3,"preferences.dark.mode":Q3,"preferences.focus.mode":eL,"preferences.debug.mode":tL,"preferences.show.grid":nL,"preferences.use.cad.selection":oL,"preferences.keep.stylemenu.open":sL,"preferences.always.show.snaps":iL,"preferences.rotate.handles":rL,"preferences.binding.handles":aL,"preferences.clone.handles":dL,undo:lL,redo:cL,cut:pL,copy:uL,paste:hL,"copy.as":mL,"export.as":gL,"select.all":fL,"select.none":SL,delete:TL,"new.project":bL,open:yL,save:wL,"save.as":xL,"upload.media":IL,"create.page":CL,"new.page":vL,"page.name":kL,duplicate:DL,cancel:PL,"copy.invite.link":BL,"create.multiplayer.project":EL,"copy.multiplayer.project":ML,select:RL,eraser:LL,draw:AL,arrow:HL,text:zL,sticky:FL,Rectangle:OL,Ellipse:jL,Triangle:UL,Line:GL,rotate:VL,"lock.aspect.ratio":$L,"unlock.aspect.ratio":NL,group:KL,ungroup:WL,"move.to.back":_L,"move.backward":YL,"move.forward":ZL,"move.to.front":XL,"reset.angle":qL,lock:JL,unlock:QL,"move.to.page":e8,"flip.horizontal":t8,"flip.vertical":n8,move:o8,"to.front":s8,forward:i8,backward:r8,back:a8,language:d8};var l8="Renk",c8="Doldur",p8="\xC7izgi",u8="Boyut",h8="A\xE7\u0131k Tut",m8="Yaz\u0131 Tipi",g8="Hizala",f8="Stiller",S8="Yak\u0131nla\u015Ft\u0131r",T8="Uzakla\u015Ft\u0131r",b8="",y8="Se\xE7ime G\xF6re",w8="S\u0131\u011Fd\u0131rmaya G\xF6re",x8="Dosya",I8="D\xFCzenle",C8="G\xF6r\xFCnt\xFC",v8="Tercihler",k8="Giri\u015F Yap",D8="Oturumu Kapat",P8="Sponsorlu",B8="Sponsor Ol",E8="Se\xE7ime Yak\u0131nla\u015Ft\u0131r",M8="S\u0131\u011Fd\u0131rmak i\xE7in Yak\u0131nla\u015Ft\u0131r",R8="Yak\u0131nla\u015Ft\u0131r",L8="Karanl\u0131k Mod",A8="Odak Modu",H8="Debug Modu",z8="Izgaray\u0131 G\xF6ster",F8="CAD Se\xE7imi Kullan",O8="Stil Men\xFCs\xFCn\xFC A\xE7\u0131k Tut",j8="Hiza \xC7izgilerini Hep G\xF6ster",U8="Rotasyon Kontrolc\xFCleri",G8="Ba\u011Flama Kontrolc\xFCleri",V8="Klon Kontrolc\xFCleri",$8="Geri Al",N8="Yinele",K8="Kes",W8="Kopyala",_8="Yap\u0131\u015Ft\u0131r",Y8="Olarak Kopyala",Z8="Olarak D\u0131\u015Far\u0131 Aktar",X8="Hepsini Se\xE7",q8="Hi\xE7birini Se\xE7me",J8="Sil",Q8="Yeni Proje",e4="A\xE7",t4="Kaydet",n4="Farkl\u0131 Kaydet",o4="Medya Y\xFCkle",s4="Sayfa Olu\u015Ftur",i4="Yeni Sayfa",r4="Sayfa \u0130smi",a4="Kopya Olu\u015Ftur",d4="\u0130ptal",l4="Davet Linkini Kopyala",c4="\xC7ok Oyunculu Proje Olu\u015Ftur",p4="\xC7ok Oyunculu Projeye Kopyala",u4="Se\xE7",h4="Silgi",m4="\xC7izim",g4="Ok",f4="Yaz\u0131",S4="Yap\u0131\u015Fkan",T4="Dikd\xF6rtgen",b4="Elips",y4="\xDC\xE7gen",w4="\xC7izgi",x4="D\xF6nd\xFCr",I4="En Boy Oran\u0131n\u0131 Kilitle",C4="En Boy Oran\u0131 Kilidini A\xE7",v4="Grupla",k4="Gruplamay\u0131 Kald\u0131r",D4="Arkaya Ta\u015F\u0131",P4="En Arkaya Ta\u015F\u0131",B4="En \xD6ne Ta\u015F\u0131",E4="\xD6ne Ta\u015F\u0131",M4="A\xE7\u0131y\u0131 S\u0131f\u0131rla",R4="Kilitle",L4="Kilidini A\xE7",A4="Sayfaya Ta\u015F\u0131",H4="Yatay \xC7evir",z4="Dikey \xC7evir",F4="Ta\u015F\u0131",O4="\xD6ne",j4="En \xD6ne",U4="En Arkaya",G4="Arkaya",V4="Dil",ic={"style.menu.color":l8,"style.menu.fill":c8,"style.menu.dash":p8,"style.menu.size":u8,"style.menu.keep.open":h8,"style.menu.font":m8,"style.menu.align":g8,styles:f8,"zoom.in":S8,"zoom.out":T8,to:b8,"to.selection":y8,"to.fit":w8,"menu.file":x8,"menu.edit":I8,"menu.view":C8,"menu.preferences":v8,"menu.sign.in":k8,"menu.sign.out":D8,sponsored:P8,"become.a.sponsor":B8,"zoom.to.selection":E8,"zoom.to.fit":M8,"zoom.to":R8,"preferences.dark.mode":L8,"preferences.focus.mode":A8,"preferences.debug.mode":H8,"preferences.show.grid":z8,"preferences.use.cad.selection":F8,"preferences.keep.stylemenu.open":O8,"preferences.always.show.snaps":j8,"preferences.rotate.handles":U8,"preferences.binding.handles":G8,"preferences.clone.handles":V8,undo:$8,redo:N8,cut:K8,copy:W8,paste:_8,"copy.as":Y8,"export.as":Z8,"select.all":X8,"select.none":q8,delete:J8,"new.project":Q8,open:e4,save:t4,"save.as":n4,"upload.media":o4,"create.page":s4,"new.page":i4,"page.name":r4,duplicate:a4,cancel:d4,"copy.invite.link":l4,"create.multiplayer.project":c4,"copy.multiplayer.project":p4,select:u4,eraser:h4,draw:m4,arrow:g4,text:f4,sticky:S4,Rectangle:T4,Ellipse:b4,Triangle:y4,Line:w4,rotate:x4,"lock.aspect.ratio":I4,"unlock.aspect.ratio":C4,group:v4,ungroup:k4,"move.to.back":D4,"move.backward":P4,"move.forward":B4,"move.to.front":E4,"reset.angle":M4,lock:R4,unlock:L4,"move.to.page":A4,"flip.horizontal":H4,"flip.vertical":z4,move:F4,"to.front":O4,forward:j4,backward:U4,back:G4,language:V4};var $4="\u041A\u043E\u043B\u0456\u0440",N4="\u0417\u0430\u043F\u043E\u0432\u043D\u044E\u0432\u0430\u0442\u0438",K4="\u0428\u0442\u0440\u0438\u0445",W4="\u0420\u043E\u0437\u043C\u0456\u0440",_4="\u0422\u0440\u0438\u043C\u0430\u0442\u0438 \u0432\u0456\u0434\u043A\u0440\u0438\u0442\u0438\u043C",Y4="\u0428\u0440\u0438\u0444\u0442",Z4="\u0412\u0438\u0440\u0456\u0432\u043D\u044F\u0442\u0438",X4="\u0421\u0442\u0438\u043B\u044C",q4="\u0417\u0431\u0456\u043B\u044C\u0448\u0438\u0442\u0438",J4="\u0417\u043C\u0435\u043D\u0448\u0438\u0442\u0438",Q4="\u0434\u043E",eA="\u0414\u043E \u0432\u0438\u0434\u0456\u043B\u0435\u043D\u043D\u044F",tA="\u0417\u0430 \u0440\u043E\u0437\u043C\u0456\u0440\u043E\u043C \u0435\u043A\u0440\u0430\u043D\u0443",nA="\u0424\u0430\u0439\u043B",oA="\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043D\u043D\u044F",sA="\u0412\u0438\u0433\u043B\u044F\u0434",iA="\u041D\u0430\u043B\u0430\u0448\u0442\u0443\u0432\u0430\u043D\u043D\u044F",rA="\u0423\u0432\u0456\u0439\u0442\u0438",aA="\u0412\u0438\u0439\u0442\u0438",dA="\u0421\u043F\u043E\u043D\u0441\u043E\u0432\u0430\u043D\u043E",lA="\u0421\u0442\u0430\u0442\u0438 \u0441\u043F\u043E\u043D\u0441\u043E\u0440\u043E\u043C",cA="\u041D\u0430\u0431\u043B\u0438\u0437\u0438\u0442\u0438 \u0434\u043E \u0432\u0438\u0434\u0456\u043B\u0435\u043D\u043D\u044F",pA="\u0417\u0431\u0456\u043B\u044C\u0448\u0438\u0442\u0438 \u0437\u0430 \u0440\u043E\u0437\u043C\u0456\u0440\u043E\u043C \u0435\u043A\u0440\u0430\u043D\u0443",uA="\u041D\u0430\u0431\u043B\u0438\u0437\u0438\u0442\u0438 \u0434\u043E",hA="\u0422\u0435\u043C\u043D\u0430 \u0442\u0435\u043C\u0430",mA="\u041C\u0456\u043D\u0456\u043C\u0430\u043B\u0456\u0441\u0442\u0438\u0447\u043D\u0438\u0439 \u0440\u0435\u0436\u0438\u043C",gA="\u0420\u0435\u0436\u0438\u043C \u043D\u0430\u043B\u0430\u0433\u043E\u0434\u0436\u0435\u043D\u043D\u044F",fA="\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u0438 \u0441\u0456\u0442\u043A\u0443",SA="\u0412\u0438\u043A\u043E\u0440\u0438\u0441\u0442\u043E\u0432\u0443\u0432\u0430\u0442\u0438 CAD \u0432\u0438\u0434\u0456\u043B\u0435\u043D\u043D\u044F",TA="\u0422\u0440\u0438\u043C\u0430\u0442\u0438 \u043C\u0435\u043D\u044E \u0441\u0442\u0438\u043B\u0456\u0432 \u0432\u0456\u0434\u043A\u0440\u0438\u0442\u0438\u043C",bA="\u0417\u0430\u0432\u0436\u0434\u0438 \u043F\u043E\u043A\u0430\u0437\u0443\u0432\u0430\u0442\u0438 \u043F\u0440\u0438\u0432'\u044F\u0437\u043A\u0438",yA="\u0420\u0443\u0447\u043A\u0438 \u043E\u0431\u0435\u0440\u0442\u0430\u043D\u043D\u044F",wA="\u0420\u0443\u0447\u043A\u0438 \u043F\u0440\u0438\u0432'\u044F\u0437\u043A\u0438",xA="\u0420\u0443\u0447\u043A\u0438 \u043A\u043B\u043E\u043D\u0443\u0432\u0430\u043D\u043D\u044F",IA="\u0421\u043A\u0430\u0441\u0443\u0432\u0430\u0442\u0438",CA="\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u0438",vA="\u0412\u0438\u0440\u0456\u0437\u0430\u0442\u0438",kA="\u0421\u043A\u043E\u043F\u0456\u044E\u0432\u0430\u0442\u0438",DA="\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438",PA="\u0421\u043A\u043E\u043F\u0456\u044E\u0432\u0430\u0442\u0438 \u044F\u043A",BA="\u0415\u043A\u0441\u043F\u043E\u0440\u0442\u0443\u0432\u0430\u0442\u0438 \u044F\u043A",EA="\u041E\u0431\u0440\u0430\u0442\u0438 \u0432\u0441\u0435",MA="\u0417\u043D\u044F\u0442\u0438 \u0432\u0438\u0434\u0456\u043B\u0435\u043D\u043D\u044F",RA="\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438",LA="\u041D\u043E\u0432\u0438\u0439 \u043F\u0440\u043E\u0435\u043A\u0442",AA="\u0412\u0456\u0434\u043A\u0440\u0438\u0442\u0438",HA="\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438",zA="\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u044F\u043A",FA="\u0417\u0430\u0432\u0430\u043D\u0442\u0430\u0436\u0438\u0442\u0438 \u043C\u0435\u0434\u0456\u0430",OA="\u0421\u0442\u0432\u043E\u0440\u0438\u0442\u0438 \u0441\u0442\u043E\u0440\u0456\u043D\u043A\u0443",jA="\u041D\u043E\u0432\u0430 \u0441\u0442\u043E\u0440\u0456\u043D\u043A\u0430",UA="\u041D\u0430\u0437\u0432\u0430 \u0441\u0442\u043E\u0440\u0456\u043D\u043A\u0438",GA="\u0414\u0443\u0431\u043B\u044E\u0432\u0430\u0442\u0438",VA="\u0421\u043A\u0430\u0441\u0443\u0432\u0430\u0442\u0438",$A="\u0421\u043A\u043E\u043F\u0456\u044E\u0432\u0430\u0442\u0438 \u043F\u043E\u0441\u0438\u043B\u0430\u043D\u043D\u044F \u043D\u0430 \u0437\u0430\u043F\u0440\u043E\u0448\u0435\u043D\u043D\u044F",NA="\u0421\u0442\u0432\u043E\u0440\u0438\u0442\u0438 \u0431\u0430\u0433\u0430\u0442\u043E\u043A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0446\u044C\u043A\u0438\u0439 \u043F\u0440\u043E\u0435\u043A\u0442",KA="\u0421\u043A\u043E\u043F\u0456\u044E\u0432\u0430\u0442\u0438 \u0432 \u0431\u0430\u0433\u0430\u0442\u043E\u043A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0446\u044C\u043A\u0438\u0439 \u043F\u0440\u043E\u0435\u043A\u0442",WA="\u0412\u0438\u0431\u0438\u0440\u0430\u0442\u0438",_A="\u041B\u0430\u0441\u0442\u0438\u043A",YA="\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438",ZA="\u0421\u0442\u0440\u0456\u043B\u043A\u0430",XA="\u0422\u0435\u043A\u0441\u0442",qA="\u041D\u043E\u0442\u0430\u0442\u043A\u0430",JA="\u041F\u0440\u044F\u043C\u043E\u043A\u0443\u0442\u043D\u0438\u043A",QA="\u0415\u043B\u0456\u043F\u0441",e6="\u0422\u0440\u0438\u043A\u0443\u0442\u043D\u0438\u043A",t6=" \u041B\u0456\u043D\u0456\u044F",n6="\u041F\u043E\u0432\u0435\u0440\u043D\u0443\u0442\u0438",o6="\u0417\u0430\u0431\u043B\u043E\u043A\u0443\u0432\u0430\u0442\u0438 \u0441\u043F\u0456\u0432\u0432\u0456\u0434\u043D\u043E\u0448\u0435\u043D\u043D\u044F \u0441\u0442\u043E\u0440\u0456\u043D",s6=" \u0420\u043E\u0437\u0431\u043B\u043E\u043A\u0443\u0432\u0430\u0442\u0438 \u0441\u043F\u0456\u0432\u0432\u0456\u0434\u043D\u043E\u0448\u0435\u043D\u043D\u044F \u0441\u0442\u043E\u0440\u0456\u043D",i6="\u0417\u0433\u0440\u0443\u043F\u0443\u0432\u0430\u0442\u0438",r6=" \u0420\u043E\u0437\u0433\u0440\u0443\u043F\u0443\u0432\u0430\u0442\u0438",a6="\u041F\u0435\u0440\u0435\u043C\u0456\u0441\u0442\u0438\u0442\u0438 \u043D\u0430\u0437\u0430\u0434",d6="\u041F\u0435\u0440\u0435\u043C\u0456\u0441\u0442\u0438\u0442\u0438 \u043D\u0430 \u0437\u0430\u0434\u043D\u0456\u0439 \u043F\u043B\u0430\u043D",l6="\u041F\u0435\u0440\u0435\u043C\u0456\u0441\u0442\u0438\u0442\u0438 \u0432\u043F\u0435\u0440\u0435\u0434",c6="\u041F\u0435\u0440\u0435\u043C\u0456\u0441\u0442\u0438\u0442\u0438 \u043D\u0430 \u043F\u0435\u0440\u0435\u0434\u043D\u0456\u0439 \u043F\u043B\u0430\u043D",p6="\u0421\u043A\u0438\u0434\u0430\u043D\u043D\u044F \u043A\u0443\u0442\u0430",u6="\u0411\u043B\u043E\u043A\u0443\u0432\u0430\u043D\u043D\u044F",h6=" \u0420\u043E\u0437\u0431\u043B\u043E\u043A\u0443\u0432\u0430\u043D\u043D\u044F",m6="\u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u043D\u0430 \u0441\u0442\u043E\u0440\u0456\u043D\u043A\u0443",g6="\u041F\u0435\u0440\u0435\u0432\u0435\u0440\u043D\u0443\u0442\u0438 \u0433\u043E\u0440\u0438\u0437\u043E\u043D\u0442\u0430\u043B\u044C\u043D\u043E",f6="\u041F\u0435\u0440\u0435\u0432\u0435\u0440\u043D\u0443\u0442\u0438 \u0432\u0435\u0440\u0442\u0438\u043A\u0430\u043B\u044C\u043D\u043E",S6="\u041F\u0435\u0440\u0435\u043C\u0456\u0441\u0442\u0438\u0442\u0438",T6="\u041D\u0430 \u043F\u0435\u0440\u0435\u0434\u043D\u0456\u0439 \u043F\u043B\u0430\u043D",b6=" \u0412\u043F\u0435\u0440\u0435\u0434",y6="\u041D\u0430 \u0437\u0430\u0434\u043D\u0456\u0439 \u043F\u043B\u0430\u043D",w6="\u041D\u0430\u0437\u0430\u0434",x6="\u041C\u043E\u0432\u0430",rc={"style.menu.color":$4,"style.menu.fill":N4,"style.menu.dash":K4,"style.menu.size":W4,"style.menu.keep.open":_4,"style.menu.font":Y4,"style.menu.align":Z4,styles:X4,"zoom.in":q4,"zoom.out":J4,to:Q4,"to.selection":eA,"to.fit":tA,"menu.file":nA,"menu.edit":oA,"menu.view":sA,"menu.preferences":iA,"menu.sign.in":rA,"menu.sign.out":aA,sponsored:dA,"become.a.sponsor":lA,"zoom.to.selection":cA,"zoom.to.fit":pA,"zoom.to":uA,"preferences.dark.mode":hA,"preferences.focus.mode":mA,"preferences.debug.mode":gA,"preferences.show.grid":fA,"preferences.use.cad.selection":SA,"preferences.keep.stylemenu.open":TA,"preferences.always.show.snaps":bA,"preferences.rotate.handles":yA,"preferences.binding.handles":wA,"preferences.clone.handles":xA,undo:IA,redo:CA,cut:vA,copy:kA,paste:DA,"copy.as":PA,"export.as":BA,"select.all":EA,"select.none":MA,delete:RA,"new.project":LA,open:AA,save:HA,"save.as":zA,"upload.media":FA,"create.page":OA,"new.page":jA,"page.name":UA,duplicate:GA,cancel:VA,"copy.invite.link":$A,"create.multiplayer.project":NA,"copy.multiplayer.project":KA,select:WA,eraser:_A,draw:YA,arrow:ZA,text:XA,sticky:qA,Rectangle:JA,Ellipse:QA,Triangle:e6,Line:t6,rotate:n6,"lock.aspect.ratio":o6,"unlock.aspect.ratio":s6,group:i6,ungroup:r6,"move.to.back":a6,"move.backward":d6,"move.forward":l6,"move.to.front":c6,"reset.angle":p6,lock:u6,unlock:h6,"move.to.page":m6,"flip.horizontal":g6,"flip.vertical":f6,move:S6,"to.front":T6,forward:b6,backward:y6,back:w6,language:x6};var I6="\u989C\u8272",C6="\u586B\u5145",v6="\u8FB9\u6846",k6="\u5C3A\u5BF8",D6="\u4FDD\u6301\u5E38\u5F00",P6="\u5B57\u4F53",B6="\u5BF9\u9F50",E6="\u6837\u5F0F",M6="\u653E\u5927",R6="\u7F29\u5C0F",L6="\u7F29\u653E\u81F3",A6="\u7F29\u653E\u9009\u4E2D",H6="\u81EA\u9002\u5E94\u7F29\u653E",z6="\u6587\u4EF6",F6="\u7F16\u8F91",O6="\u89C6\u56FE",j6="\u504F\u597D",U6="\u767B\u5F55",G6="\u767B\u51FA",V6="\u5DF2\u8D5E\u52A9",$6="\u6210\u4E3A\u8D5E\u52A9\u8005",N6="\u7F29\u653E\u9009\u4E2D",K6="\u81EA\u9002\u5E94\u7F29\u653E",W6="\u7F29\u653E\u81F3",_6="\u6697\u9ED1\u6A21\u5F0F",Y6="\u4E13\u6CE8\u6A21\u5F0F",Z6="\u8C03\u8BD5\u6A21\u5F0F",X6="\u663E\u793A\u7F51\u683C",q6="\u4F7F\u7528 CAD \u9009\u62E9",J6="\u4FDD\u6301\u6837\u5F0F\u83DC\u5355\u5E38\u5F00",Q6="\u603B\u662F\u5C55\u793A\u5BF9\u9F50\u7EBF",e9="\u65CB\u8F6C\u624B\u67C4",t9="\u6346\u7ED1\u624B\u67C4",n9="\u514B\u9686\u624B\u67C4",o9="\u64A4\u9500",s9="\u91CD\u505A",i9="\u526A\u5207",r9="\u590D\u5236",a9="\u7C98\u8D34",d9="\u590D\u5236\u4E3A",l9="\u5BFC\u51FA\u4E3A",c9="\u9009\u4E2D\u5168\u90E8",p9="\u53D6\u6D88\u9009\u4E2D",u9="\u5220\u9664",h9="\u65B0\u5DE5\u7A0B",m9="\u6253\u5F00",g9="\u4FDD\u5B58",f9="\u4FDD\u5B58\u4E3A",S9="\u4E0A\u4F20\u5A92\u4F53\u6587\u4EF6",T9="\u521B\u5EFA\u9875\u9762",b9="\u65B0\u9875\u9762",y9="\u9875\u9762\u540D\u79F0",w9="\u590D\u5236",x9="\u53D6\u6D88",I9="\u590D\u5236\u9080\u8BF7\u94FE\u63A5",C9="\u521B\u5EFA\u591A\u4EBA\u5DE5\u7A0B",v9="\u590D\u5236\u5230\u591A\u4EBA\u5DE5\u7A0B",k9="\u9009\u62E9",D9="\u6A61\u76AE",P9="\u753B\u7B14",B9="\u7BAD\u5934",E9="\u6587\u672C",M9="\u4FBF\u5229\u8D34",R9="\u77E9\u5F62",L9="\u692D\u5706\u5F62",A9="\u4E09\u89D2\u5F62",H9="\u76F4\u7EBF",z9="\u65CB\u8F6C",F9="\u9501\u5B9A\u5BBD\u9AD8\u6BD4",O9="\u89E3\u9501\u5BBD\u9AD8\u6BD4",j9="\u5206\u7EC4",U9="\u53D6\u6D88\u5206\u7EC4",G9="\u7F6E\u5E95",V9="\u4E0B\u79FB\u4E00\u5C42",$9="\u4E0A\u79FB\u4E00\u5C42",N9="\u7F6E\u9876",K9="\u91CD\u7F6E\u65CB\u8F6C\u89D2\u5EA6",W9="\u9501\u5B9A",_9="\u89E3\u9501",Y9="\u79FB\u52A8\u5230\u9875\u9762",Z9="\u6C34\u5E73\u7FFB\u8F6C",X9="\u5782\u76F4\u7FFB\u8F6C",q9="\u79FB\u52A8",J9="\u7F6E\u9876",Q9="\u4E0A\u4E00\u5C42",eH="\u4E0B\u4E00\u5C42",tH="\u7F6E\u5E95",nH="\u8BED\u8A00",ac={"style.menu.color":I6,"style.menu.fill":C6,"style.menu.dash":v6,"style.menu.size":k6,"style.menu.keep.open":D6,"style.menu.font":P6,"style.menu.align":B6,styles:E6,"zoom.in":M6,"zoom.out":R6,to:L6,"to.selection":A6,"to.fit":H6,"menu.file":z6,"menu.edit":F6,"menu.view":O6,"menu.preferences":j6,"menu.sign.in":U6,"menu.sign.out":G6,sponsored:V6,"become.a.sponsor":$6,"zoom.to.selection":N6,"zoom.to.fit":K6,"zoom.to":W6,"preferences.dark.mode":_6,"preferences.focus.mode":Y6,"preferences.debug.mode":Z6,"preferences.show.grid":X6,"preferences.use.cad.selection":q6,"preferences.keep.stylemenu.open":J6,"preferences.always.show.snaps":Q6,"preferences.rotate.handles":e9,"preferences.binding.handles":t9,"preferences.clone.handles":n9,undo:o9,redo:s9,cut:i9,copy:r9,paste:a9,"copy.as":d9,"export.as":l9,"select.all":c9,"select.none":p9,delete:u9,"new.project":h9,open:m9,save:g9,"save.as":f9,"upload.media":S9,"create.page":T9,"new.page":b9,"page.name":y9,duplicate:w9,cancel:x9,"copy.invite.link":I9,"create.multiplayer.project":C9,"copy.multiplayer.project":v9,select:k9,eraser:D9,draw:P9,arrow:B9,text:E9,sticky:M9,Rectangle:R9,Ellipse:L9,Triangle:A9,Line:H9,rotate:z9,"lock.aspect.ratio":F9,"unlock.aspect.ratio":O9,group:j9,ungroup:U9,"move.to.back":G9,"move.backward":V9,"move.forward":$9,"move.to.front":N9,"reset.angle":K9,lock:W9,unlock:_9,"move.to.page":Y9,"flip.horizontal":Z9,"flip.vertical":X9,move:q9,"to.front":J9,forward:Q9,backward:eH,back:tH,language:nH};var oH="\u984F\u8272",sH="\u586B\u5145",iH="\u865B\u7DDA",rH="\u5927\u5C0F",aH="\u4FDD\u6301\u958B\u555F",dH="\u5B57\u578B",lH="\u5C0D\u9F4A",cH="\u6A23\u5F0F",pH="\u653E\u5927",uH="\u7E2E\u5C0F",hH="\u81F3",mH="\u81F3\u9078\u53D6\u7BC4\u570D",gH="\u81F3\u9069\u7576\u5927\u5C0F",fH="\u6A94\u6848",SH="\u7DE8\u8F2F",TH="\u6AA2\u8996",bH="\u9078\u9805",yH="\u767B\u5165",wH="\u767B\u51FA",xH="\u8D0A\u52A9",IH="\u6210\u70BA\u8D0A\u52A9\u8005",CH="\u7E2E\u653E\u81F3\u9078\u53D6\u7BC4\u570D",vH="\u7E2E\u653E\u81F3\u9069\u7576\u5927\u5C0F",kH="\u7E2E\u653E\u81F3",DH="\u6DF1\u8272\u6A21\u5F0F",PH="\u5C08\u6CE8\u6A21\u5F0F",BH="\u9664\u932F\u6A21\u5F0F",EH="\u986F\u793A\u7DB2\u683C",MH="\u4F7F\u7528 CAD \u9078\u53D6",RH="\u6A23\u5F0F\u9078\u55AE\u4FDD\u6301\u958B\u555F",LH="\u6C38\u9060\u986F\u793A\u5C0D\u9F4A\u7DDA",AH="\u65CB\u8F49\u63A7\u9EDE",HH="\u7D81\u5B9A\u63A7\u9EDE",zH="\u8907\u88FD\u63A7\u9EDE",FH="\u5FA9\u539F",OH="\u53D6\u6D88\u5FA9\u539F",jH="\u526A\u4E0B",UH="\u8907\u88FD",GH="\u8CBC\u4E0A",VH="\u8907\u88FD\u6210",$H="\u532F\u51FA\u6210",NH="\u5168\u9078",KH="\u53D6\u6D88\u9078\u53D6",WH="\u522A\u9664",_H="\u65B0\u5C08\u6848",YH="\u958B\u555F",ZH="\u5132\u5B58",XH="\u53E6\u5B58\u70BA",qH="\u4E0A\u50B3\u5A92\u9AD4",JH="\u5EFA\u7ACB\u9801\u9762",QH="\u65B0\u9801\u9762",e7="\u9801\u9762\u540D\u7A31",t7="\u8907\u88FD",n7="\u53D6\u6D88",o7="\u8907\u88FD\u9080\u8ACB\u9023\u7D50",s7="\u8907\u88FD\u552F\u8B80\u9023\u7D50",i7="\u5EFA\u7ACB\u591A\u4EBA\u5C08\u6848",r7="\u8907\u88FD\u81F3\u591A\u4EBA\u5C08\u6848",a7="\u9078\u53D6",d7="\u6A61\u76AE\u64E6",l7="\u624B\u7E6A",c7="\u7BAD\u982D",p7="\u6587\u5B57",u7="\u4FBF\u5229\u8CBC",h7="\u9577\u65B9\u5F62",m7="\u6A62\u5713\u5F62",g7="\u4E09\u89D2\u5F62",f7="\u76F4\u7DDA",S7="\u65CB\u8F49",T7="\u9396\u5B9A\u9577\u5BEC\u6BD4",b7="\u89E3\u9396\u9577\u5BEC\u6BD4",y7="\u7D44\u6210\u7FA4\u7D44",w7="\u53D6\u6D88\u7FA4\u7D44",x7="\u79FB\u5230\u6700\u4E0B\u5C64",I7="\u4E0B\u79FB\u4E00\u5C64",C7="\u4E0A\u79FB\u4E00\u5C64",v7="\u79FB\u5230\u6700\u4E0A\u5C64",k7="\u91CD\u8A2D\u89D2\u5EA6",D7="\u9396\u5B9A",P7="\u89E3\u9396",B7="\u79FB\u81F3\u9801\u9762",E7="\u6C34\u5E73\u7FFB\u8F49",M7="\u5782\u76F4\u7FFB\u8F49",R7="\u79FB\u52D5",L7="\u5230\u6700\u4E0A\u5C64",A7="\u5230\u4E0A\u4E00\u5C64",H7="\u5230\u4E0B\u4E00\u5C64",z7="\u5230\u6700\u4E0B\u5C64",F7="\u8A9E\u8A00",O7="\u4E86\u89E3\u8A73\u60C5",j7="\u5DE5\u5177\u5217\u4F4D\u7F6E",U7="\u4E0B\u65B9",G7="\u5DE6\u5074",V7="\u53F3\u5074",$7="\u4E0A\u65B9",N7="\u9801\u9762",dc={"style.menu.color":oH,"style.menu.fill":sH,"style.menu.dash":iH,"style.menu.size":rH,"style.menu.keep.open":aH,"style.menu.font":dH,"style.menu.align":lH,styles:cH,"zoom.in":pH,"zoom.out":uH,to:hH,"to.selection":mH,"to.fit":gH,"menu.file":fH,"menu.edit":SH,"menu.view":TH,"menu.preferences":bH,"menu.sign.in":yH,"menu.sign.out":wH,sponsored:xH,"become.a.sponsor":IH,"zoom.to.selection":CH,"zoom.to.fit":vH,"zoom.to":kH,"preferences.dark.mode":DH,"preferences.focus.mode":PH,"preferences.debug.mode":BH,"preferences.show.grid":EH,"preferences.use.cad.selection":MH,"preferences.keep.stylemenu.open":RH,"preferences.always.show.snaps":LH,"preferences.rotate.handles":AH,"preferences.binding.handles":HH,"preferences.clone.handles":zH,undo:FH,redo:OH,cut:jH,copy:UH,paste:GH,"copy.as":VH,"export.as":$H,"select.all":NH,"select.none":KH,delete:WH,"new.project":_H,open:YH,save:ZH,"save.as":XH,"upload.media":qH,"create.page":JH,"new.page":QH,"page.name":e7,duplicate:t7,cancel:n7,"copy.invite.link":o7,"copy.readonly.link":s7,"create.multiplayer.project":i7,"copy.multiplayer.project":r7,select:a7,eraser:d7,draw:l7,arrow:c7,text:p7,sticky:u7,Rectangle:h7,Ellipse:m7,Triangle:g7,Line:f7,rotate:S7,"lock.aspect.ratio":T7,"unlock.aspect.ratio":b7,group:y7,ungroup:w7,"move.to.back":x7,"move.backward":I7,"move.forward":C7,"move.to.front":v7,"reset.angle":k7,lock:D7,unlock:P7,"move.to.page":B7,"flip.horizontal":E7,"flip.vertical":M7,move:R7,"to.front":L7,forward:A7,backward:H7,back:z7,language:F7,"translation.link":O7,"dock.position":j7,bottom:U7,left:G7,right:V7,top:$7,page:N7};var hi=[{locale:"ar",label:"\u0639\u0631\u0628\u064A",messages:Vl},{locale:"da",label:"Danish",messages:$l},{locale:"de",label:"Deutsch",messages:Nl},{locale:"en",label:"English",messages:Kl},{locale:"es",label:"Espa\xF1ol",messages:Wl},{locale:"fa",label:"\u0641\u0627\u0631\u0633\u06CC",messages:_l},{locale:"fr",label:"Fran\xE7ais",messages:Yl},{locale:"he",label:"\u05E2\u05D1\u05E8\u05D9\u05EA",messages:Zl},{locale:"it",label:"Italiano",messages:Xl},{locale:"ja",label:"\u65E5\u672C\u8A9E",messages:ql},{locale:"ko-kr",label:"\uD55C\uAD6D\uC5B4",messages:Jl},{locale:"ne",label:"\u0928\u0947\u092A\u093E\u0932\u0940",messages:ec},{locale:"no",label:"Norwegian",messages:tc},{locale:"pl",label:"Polski",messages:nc},{locale:"pt-br",label:"Portugu\xEAs - Brasil",messages:oc},{locale:"ru",label:"Russian",messages:sc},{locale:"tr",label:"T\xFCrk\xE7e",messages:ic},{locale:"uk",label:"Ukrainian",messages:rc},{locale:"zh-ch",label:"Chinese - Simplified",messages:ac},{locale:"zh-tw",label:"\u7E41\u9AD4\u4E2D\u6587 (\u53F0\u7063)",messages:dc}];hi.sort((s,e)=>s.locale<e.locale?-1:1);function lc(s){var t;let e=hi.find(n=>n.locale===s);return{locale:s,label:(t=e==null?void 0:e.label)!=null?t:s,messages:f(f({},Ql),e==null?void 0:e.messages)}}function pc(s){return cc.useMemo(()=>lc(s!=null?s:navigator.language.split(/[-_]/)[0]),[s])}var yt=M(require("react"));var Ur=M(require("react"));var bt={"@initial":"mobile","@micro":"micro","@sm":"small","@md":"medium","@lg":"large"};var K7=s=>s.appState.status,W7=s=>s.appState.activeTool;function uc(){let s=le(),e=s.useStore(K7),t=s.useStore(W7);return Ur.createElement(_7,{bp:bt,id:"TD-StatusBar"},Ur.createElement(Y7,null,t," | ",e))}var _7=R("div",{height:40,userSelect:"none",borderTop:"1px solid $panelContrast",gridArea:"status",display:"flex",color:"$text",justifyContent:"space-between",alignItems:"center",backgroundColor:"$panel",gap:8,fontFamily:"$ui",fontSize:"$0",padding:"0 16px",variants:{bp:{small:{fontSize:"$1"}}}}),Y7=R("div",{whiteSpace:"nowrap",overflow:"hidden"});var Bo=M(require("react")),gc=require("react-intl");var mc=require("@radix-ui/react-dropdown-menu"),fi=require("@radix-ui/react-icons"),Wt=M(require("react"));var Gr=M(require("react"));var hc=require("@tldraw/core"),Z7=()=>hc.Utils.isDarwin()?"\u2318":"Ctrl";function mi({variant:s,children:e}){return Gr.createElement(X7,{variant:s},e.split("").map((t,n)=>Gr.createElement("span",{key:n},t.replace("#",Z7()))))}var X7=R("kbd",{marginLeft:"$3",textShadow:"$2",textAlign:"center",fontSize:"$0",fontFamily:"$ui",color:"$text",background:"none",fontWeight:400,gap:"$1",display:"flex",alignItems:"center","& > span":{padding:"$0",borderRadius:"$0",display:"flex",alignItems:"center",justifyContent:"center"},variants:{variant:{tooltip:{"& > span":{color:"$tooltipContrast",background:"$overlayContrast",boxShadow:"$key",width:"20px",height:"20px"}},menu:{}}}});var Fe=R("div",{height:"100%",borderRadius:"4px",marginRight:"1px",width:"fit-content",display:"grid",alignItems:"center",justifyContent:"center",outline:"none",border:"none",pointerEvents:"all",cursor:"pointer",color:"currentColor","& svg":{height:16,width:16,strokeWidth:1},"& > *":{gridRow:1,gridColumn:1}});var Xe=Wt.forwardRef((u,p)=>{var h=u,{onClick:s,isActive:e=!1,isWarning:t=!1,hasIndicator:n=!1,hasArrow:o=!1,disabled:i=!1,variant:a,kbd:l,children:r}=h,c=Je(h,["onClick","isActive","isWarning","hasIndicator","hasArrow","disabled","variant","kbd","children"]);return Wt.createElement(q7,f({ref:p,bp:bt,isWarning:t,isActive:e,disabled:i,onClick:s,variant:a},c),Wt.createElement(gi,null,r,l?Wt.createElement(mi,{variant:"menu"},l):void 0,n&&Wt.createElement(mc.ItemIndicator,{dir:"ltr"},Wt.createElement(Fe,null,Wt.createElement(fi.CheckIcon,null))),o&&Wt.createElement(Fe,null,Wt.createElement(fi.ChevronRightIcon,null))))}),gi=R("div",{height:"100%",width:"100%",backgroundColor:"$panel",borderRadius:"$2",display:"flex",gap:"$1",flexDirection:"row",alignItems:"center",padding:"0 $3",justifyContent:"space-between",border:"1px solid transparent","& svg":{position:"relative",stroke:"$overlay",strokeWidth:1,zIndex:1},[`& > ${Fe}`]:{paddingLeft:"$3"}}),q7=R("button",{position:"relative",width:"100%",background:"none",border:"none",cursor:"pointer",height:32,minHeight:32,outline:"none",color:"$text",fontFamily:"$ui",fontWeight:400,fontSize:"$1",borderRadius:4,userSelect:"none",margin:0,padding:"0 0","&[data-disabled]":{opacity:.3},"&:disabled":{opacity:.3},[`&:focus:not(:disabled) ${gi}`]:{backgroundColor:"$hover"},"& a":{textDecoration:"none",color:"$text"},variants:{bp:{mobile:{},small:{}},variant:{styleMenu:{margin:"$1 0 $1 0"},wide:{gridColumn:"1 / span 4"}},size:{icon:{padding:"4px ",width:"auto"}},isSponsor:{true:{color:"#eb30a2"},false:{}},isWarning:{true:{color:"$warn"}},isActive:{true:{backgroundColor:"$hover"},false:{}}},compoundVariants:[{isActive:!1,isSponsor:!0,bp:"small",css:{[`&:hover:not(:disabled) ${gi}`]:{backgroundColor:"$sponsorContrast",border:"1px solid $panel",'& *[data-shy="true"]':{opacity:1}}}},{isActive:!1,isSponsor:!1,bp:"small",css:{[`&:hover:not(:disabled) ${gi}`]:{backgroundColor:"$hover",border:"1px solid $panel",'& *[data-shy="true"]':{opacity:1}}}}]});var _t=R("div",{position:"relative",overflow:"hidden",userSelect:"none",display:"flex",flexDirection:"column",zIndex:180,minWidth:180,pointerEvents:"all",backgroundColor:"$panel",boxShadow:"$panel",padding:"$2 $2",borderRadius:"$3",font:"$ui",variants:{size:{small:{minWidth:72}},overflow:{true:{maxHeight:"60vh",overflowY:"auto",overflowX:"hidden"}}},"-ms-overflow-style":"none",scrollbarWidth:"none","&::webkit-scrollbar":{display:"none"}});var J7=s=>s.appState.isEmptyCanvas&&Object.keys(s.document.pages[s.appState.currentPageId].shapes).length>0,Q7=s=>s.settings.isDebugMode,ez=s=>s.settings.dockPosition,fc=Bo.memo(function(){let e=le(),t=e.useStore(J7),n=e.useStore(ez),o=e.useStore(Q7),i={bottom:n==="bottom"&&o?120:n==="bottom"?80:o?60:20,left:"50%",transform:"translate(-50%,0)"};return t?Bo.createElement(tz,{id:"TD-Tools-Back_to_content",style:f({},i)},Bo.createElement(Xe,{onClick:e.zoomToContent},Bo.createElement(gc.FormattedMessage,{id:"zoom.to.content"}))):null}),tz=R(_t,{pointerEvents:"all",width:"fit-content",minWidth:0,position:"fixed",bottom:0});var Le=M(require("react")),Lc=require("react-intl"),hn=require("@radix-ui/react-icons");var Yt=M(require("react"));var Vn=M(require("@radix-ui/react-tooltip")),Gn=M(require("react"));function pt({children:s,label:e,kbd:t,id:n,side:o="top"}){return Gn.createElement("span",{id:n},Gn.createElement(Vn.Root,null,Gn.createElement(Vn.Trigger,{dir:"ltr",asChild:!0},Gn.createElement("span",null,s)),Gn.createElement(nz,{dir:"ltr",side:o,sideOffset:8},e,t?Gn.createElement(mi,{variant:"tooltip"},t):null,Gn.createElement(oz,null))))}var nz=R(Vn.Content,{borderRadius:3,padding:"$3 $3 $3 $3",fontSize:"$1",backgroundColor:"$tooltip",color:"$tooltipContrast",boxShadow:"$3",display:"flex",alignItems:"center",fontFamily:"$ui",userSelect:"none"}),oz=R(Vn.Arrow,{fill:"$tooltip",margin:"0 8px"});var me=Yt.forwardRef((m,h)=>{var g=m,{onSelect:s,onClick:e,onDoubleClick:t,variant:n,children:o,isToolLocked:i=!1,disabled:a=!1,isActive:l=!1,isSponsor:r=!1,onKeyDown:c,id:p}=g,u=Je(g,["onSelect","onClick","onDoubleClick","variant","children","isToolLocked","disabled","isActive","isSponsor","onKeyDown","id"]);return Yt.createElement(sz,f({ref:h,isActive:l,isSponsor:r,variant:n,onClick:e,disabled:a,onPointerDown:s,onDoubleClick:t,onKeyDown:c,bp:bt,id:p},u),Yt.createElement(Ft,null,o),i&&Yt.createElement(iz,null))});function io(o){var i=o,{label:s,kbd:e,isLocked:t}=i,n=Je(i,["label","kbd","isLocked"]);let a=le(),l=Yt.useCallback(()=>{a.toggleToolLock()},[]),r=Yt.useCallback(c=>{c.key===" "&&a.isForcePanning&&c.preventDefault()},[]);return Yt.createElement(pt,{label:s[0].toUpperCase()+s.slice(1),kbd:e},Yt.createElement(me,C(f({},n),{variant:"primary",isToolLocked:t&&n.isActive,onDoubleClick:l,onKeyDown:r})))}var Ft=R("div",{position:"relative",height:"100%",width:"100%",backgroundColor:"$panel",borderRadius:"$2",margin:"0",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"$ui",color:"inherit",userSelect:"none",boxSizing:"border-box",border:"1px solid transparent"}),sz=R("button",{position:"relative",color:"$text",fontSize:"$0",background:"none",margin:"0",padding:"$2",display:"flex",alignItems:"center",justifyContent:"center",outline:"none",cursor:"pointer",pointerEvents:"all",border:"none",height:"40px",width:"40px",[`&:disabled ${Ft}`]:{opacity:.618},variants:{variant:{primary:{marginTop:"0"},icon:{[`& ${Ft}`]:{display:"grid","& > *":{gridRow:1,gridColumn:1}}},text:{width:"auto",[`& ${Ft}`]:{fontSize:"$1",padding:"0 $3",gap:"$3"}},circle:{padding:0,height:32,width:32,[`& ${Ft}`]:{border:"1px solid $panelContrast",borderRadius:"100%",boxShadow:"$panel"},[`& ${Ft} > svg`]:{width:14,height:14}}},isSponsor:{true:{[`${Ft}`]:{backgroundColor:"$sponsorContrast"}}},isActive:{true:{},false:{}},bp:{mobile:{},small:{}}},compoundVariants:[{variant:"primary",bp:"mobile",css:{height:"40px",width:"40px",[`& ${Ft} > svg`]:{width:16,height:16}}},{variant:"primary",bp:"small",css:{height:"44px",width:"44px",[`& ${Ft} > svg`]:{width:20,height:20}}},{isActive:!0,css:{[`${Ft}`]:{backgroundColor:"$selected",color:"$selectedContrast"}}},{isActive:!1,bp:"small",css:{[`&:hover:not(:disabled) ${Ft}`]:{backgroundColor:"$hover",border:"1px solid $panel"},[`&:focus:not(:disabled) ${Ft}`]:{backgroundColor:"$hover"}}}]}),iz=R("div",{position:"absolute",width:10,height:10,backgroundColor:"$selected",borderRadius:"100%",bottom:-2,border:"2px solid $panel",zIndex:100});var ro=R("div",{backgroundColor:"$panel",display:"flex",flexDirection:"row",boxShadow:"$panel",padding:"$2",border:"1px solid $panelContrast",gap:0,variants:{side:{center:{borderRadius:"$4"},left:{padding:0,borderTop:0,borderLeft:0,borderTopRightRadius:"$1",borderBottomRightRadius:"$3",borderBottomLeftRadius:"$1"},right:{padding:0,borderTop:0,borderRight:0,borderTopLeftRadius:"$1",borderBottomLeftRadius:"$3",borderBottomRightRadius:"$1"}}}});var Oe=M(require("react")),$n=M(require("@radix-ui/react-dropdown-menu"));var Eo=require("@radix-ui/react-icons");var rz=M(require("react"));var Vr=M(require("react"));function $r(s){let n=s,{size:e=16}=n,t=Je(n,["size"]);return Vr.createElement("svg",f({width:24,height:24},t),Vr.createElement("circle",{cx:12,cy:12,r:e/2}))}var Nr=M(require("react"));function Sc(){return Nr.createElement("svg",{width:"24",height:"24",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg"},Nr.createElement("circle",{cx:12,cy:12,r:8,fill:"none",strokeWidth:2.5,strokeLinecap:"round",strokeDasharray:50.26548*.1}))}var Kr=M(require("react")),az=`${50.26548*.025} ${50.26548*.1}`;function Tc(){return Kr.createElement("svg",{width:"24",height:"24",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg"},Kr.createElement("circle",{cx:12,cy:12,r:8,fill:"none",strokeWidth:2.5,strokeLinecap:"round",strokeDasharray:az}))}var Wr=M(require("react"));function bc(){return Wr.createElement("svg",{width:"24",height:"24",viewBox:"1 1.5 21 22",fill:"currentColor",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg"},Wr.createElement("path",{d:"M10.0162 19.2768C10.0162 19.2768 9.90679 19.2517 9.6879 19.2017C9.46275 19.1454 9.12816 19.0422 8.68413 18.8921C8.23384 18.7358 7.81482 18.545 7.42707 18.3199C7.03307 18.101 6.62343 17.7883 6.19816 17.3818C5.77289 16.9753 5.33511 16.3718 4.88482 15.5713C4.43453 14.7645 4.1531 13.8545 4.04053 12.8414C3.92795 11.822 4.04991 10.8464 4.40639 9.91451C4.76286 8.98266 5.39452 8.10084 6.30135 7.26906C7.21444 6.44353 8.29325 5.83377 9.5378 5.43976C10.7823 5.05202 11.833 4.92068 12.6898 5.04576C13.5466 5.16459 14.3878 5.43664 15.2133 5.86191C16.0388 6.28718 16.7768 6.8688 17.4272 7.60678C18.0714 8.34475 18.5404 9.21406 18.8344 10.2147C19.1283 11.2153 19.1721 12.2598 18.9657 13.348C18.7593 14.4299 18.2872 15.4337 17.5492 16.3593C16.8112 17.2849 15.9263 18.0072 14.8944 18.5263C13.8624 19.0391 12.9056 19.3174 12.0238 19.3612C11.142 19.405 10.2101 19.2705 9.22823 18.9578C8.24635 18.6451 7.35828 18.151 6.56402 17.4756C5.77601 16.8002 6.08871 16.8658 7.50212 17.6726C8.90927 18.4731 10.1444 18.8484 11.2076 18.7983C12.2645 18.7545 13.2965 18.4825 14.3034 17.9822C15.3102 17.4819 16.1264 16.8221 16.7518 16.0028C17.3772 15.1835 17.7681 14.3111 17.9244 13.3855C18.0808 12.4599 18.0401 11.5781 17.8025 10.74C17.5586 9.902 17.1739 9.15464 16.6486 8.49797C16.1233 7.8413 15.2289 7.27844 13.9656 6.80939C12.7086 6.34034 11.4203 6.20901 10.1007 6.41539C8.78732 6.61552 7.69599 7.06893 6.82669 7.77564C5.96363 8.48859 5.34761 9.26409 4.97863 10.1021C4.60964 10.9402 4.45329 11.8376 4.50958 12.7945C4.56586 13.7513 4.79101 14.6238 5.18501 15.4118C5.57276 16.1998 5.96363 16.8002 6.35764 17.2129C6.75164 17.6257 7.13313 17.9509 7.50212 18.1886C7.87736 18.4325 8.28074 18.642 8.71227 18.8171C9.15005 18.9922 9.47839 19.111 9.69728 19.1736C9.91617 19.2361 10.0256 19.2705 10.0256 19.2768H10.0162Z",strokeWidth:"2"}))}var _r=M(require("react"));function yc(){return _r.createElement("svg",{width:"24",height:"24",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg"},_r.createElement("circle",{cx:12,cy:12,r:8,fill:"none",strokeWidth:2,strokeLinecap:"round"}))}var dz=M(require("react"));var Yr=M(require("react"));function wc(s){return Yr.createElement("svg",f({width:32,height:32,viewBox:"0 0 15 15",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},s),Yr.createElement("path",{d:"M4.32978 8.5081C4.32978 10.1923 5.70009 11.5625 7.38418 11.5625H8.46539C8.64456 11.5625 8.78975 11.4173 8.78975 11.2382V11.13C8.78975 10.9508 8.64457 10.8057 8.46539 10.8057H7.38418C6.11736 10.8057 5.08662 9.77492 5.08662 8.5081C5.08662 7.24128 6.11736 6.21054 7.38418 6.21054H9.37894L8.00515 7.58433C7.8576 7.73183 7.8576 7.97195 8.00515 8.11944C8.14833 8.26251 8.39751 8.2623 8.54036 8.11944L10.56 6.09971C10.6315 6.02824 10.6709 5.93321 10.6709 5.8321C10.6709 5.73106 10.6315 5.63598 10.56 5.56454L8.54025 3.54472C8.3974 3.40176 8.14801 3.40176 8.00513 3.54472C7.85758 3.69218 7.85758 3.93234 8.00513 4.07979L9.37892 5.45368H7.38418C5.70009 5.45368 4.32978 6.82393 4.32978 8.5081Z"}))}var fs=M(require("react"));function xc(s){return fs.createElement("svg",f({width:18,height:18,viewBox:"0 0 15 15",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},s),fs.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 4.656a.5.5 0 01.5-.5h9.7a.5.5 0 010 1H2.5a.5.5 0 01-.5-.5z"}),fs.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.272 3a.578.578 0 00-.578.578v.578h3.311v-.578A.578.578 0 008.428 3H6.272zm3.733 1.156v-.578A1.578 1.578 0 008.428 2H6.272a1.578 1.578 0 00-1.578 1.578v.578H3.578a.5.5 0 00-.5.5V12.2a1.578 1.578 0 001.577 1.578h5.39a1.578 1.578 0 001.577-1.578V4.656a.5.5 0 00-.5-.5h-1.117zm-5.927 1V12.2a.578.578 0 00.577.578h5.39a.578.578 0 00.577-.578V5.156H4.078z"}),fs.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.272 6.85a.5.5 0 01.5.5v3.233a.5.5 0 11-1 0V7.35a.5.5 0 01.5-.5zM8.428 6.85a.5.5 0 01.5.5v3.233a.5.5 0 11-1 0V7.35a.5.5 0 01.5-.5z"}))}var Zr=M(require("react"));function Ic(s){return Zr.createElement("svg",f({width:32,height:32,viewBox:"0 0 15 15",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},s),Zr.createElement("path",{d:"M10.6707 8.5081C10.6707 10.1923 9.3004 11.5625 7.61631 11.5625H6.5351C6.35593 11.5625 6.21074 11.4173 6.21074 11.2382V11.13C6.21074 10.9508 6.35591 10.8057 6.5351 10.8057H7.61631C8.88313 10.8057 9.91387 9.77492 9.91387 8.5081C9.91387 7.24128 8.88313 6.21054 7.61631 6.21054H5.62155L6.99534 7.58433C7.14289 7.73183 7.14289 7.97195 6.99534 8.11944C6.85216 8.26251 6.60298 8.2623 6.46013 8.11944L4.44045 6.09971C4.36898 6.02824 4.32959 5.93321 4.32959 5.8321C4.32959 5.73106 4.36898 5.63598 4.44045 5.56454L6.46024 3.54472C6.60309 3.40176 6.85248 3.40176 6.99535 3.54472C7.14291 3.69218 7.14291 3.93234 6.99535 4.07979L5.62156 5.45368H7.61631C9.3004 5.45368 10.6707 6.82393 10.6707 8.5081Z"}))}var Xr=M(require("react"));function Cc(s){return Xr.createElement("svg",f({width:24,height:24,viewBox:"-2 -2 28 28",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},s),Xr.createElement("path",{d:"M12.4239 4.62C13.3572 4.62 14.1572 4.73333 14.8239 4.96C15.4906 5.17333 15.9772 5.43333 16.2839 5.74C16.3639 5.82 16.4039 5.94 16.4039 6.1V8.86H14.0639C13.9172 8.86 13.8439 8.78666 13.8439 8.64V7.26C13.4306 7.12666 12.9572 7.06 12.4239 7.06C11.6506 7.06 11.0639 7.18 10.6639 7.42C10.2639 7.66 10.0639 8.04666 10.0639 8.58V9C10.0639 9.38666 10.1639 9.69333 10.3639 9.92C10.5772 10.1333 11.0306 10.3467 11.7239 10.56L13.6439 11.14C14.4706 11.38 15.1172 11.66 15.5839 11.98C16.0506 12.3 16.3772 12.68 16.5639 13.12C16.7639 13.5467 16.8639 14.0733 16.8639 14.7V15.62C16.8639 16.7933 16.4039 17.7133 15.4839 18.38C14.5639 19.0467 13.2839 19.38 11.6439 19.38C10.6706 19.38 9.79723 19.2867 9.0239 19.1C8.2639 18.9133 7.71056 18.6533 7.3639 18.32C7.3239 18.28 7.29056 18.24 7.2639 18.2C7.25056 18.1467 7.2439 18.06 7.2439 17.94V15.74H7.6239C8.2239 16.1533 8.85056 16.4533 9.5039 16.64C10.1572 16.8267 10.9306 16.92 11.8239 16.92C12.6506 16.92 13.2506 16.7867 13.6239 16.52C14.0106 16.2533 14.2039 15.9333 14.2039 15.56V14.88C14.2039 14.6667 14.1639 14.48 14.0839 14.32C14.0172 14.16 13.8706 14.0133 13.6439 13.88C13.4172 13.7467 13.0572 13.6067 12.5639 13.46L10.6639 12.88C9.7839 12.6133 9.11056 12.3 8.6439 11.94C8.17723 11.58 7.85056 11.18 7.6639 10.74C7.49056 10.3 7.4039 9.83333 7.4039 9.34V8.38C7.4039 7.64666 7.61056 7 8.0239 6.44C8.43723 5.88 9.01723 5.44 9.7639 5.12C10.5239 4.78666 11.4106 4.62 12.4239 4.62Z"}))}var qr=M(require("react"));function vc(s){return qr.createElement("svg",f({width:24,height:24,viewBox:"-2 -2 28 28",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},s),qr.createElement("path",{d:"M8.16191 19H5.68191C5.53525 19 5.46191 18.9267 5.46191 18.78V5H8.76191C8.88191 5 8.97525 5.03333 9.04191 5.1C9.10858 5.15333 9.17525 5.27333 9.24191 5.46C9.72191 6.59333 10.1686 7.7 10.5819 8.78C11.0086 9.84667 11.4352 10.98 11.8619 12.18H12.1619C12.6019 10.9667 13.0352 9.79333 13.4619 8.66C13.8886 7.52667 14.3552 6.30667 14.8619 5H18.3219C18.4686 5 18.5419 5.07333 18.5419 5.22V19H16.0619C15.9152 19 15.8419 18.9267 15.8419 18.78V16.26C15.8419 15.5267 15.8486 14.8133 15.8619 14.12C15.8886 13.4267 15.9286 12.6867 15.9819 11.9C16.0486 11.1 16.1419 10.1933 16.2619 9.18H15.9019C15.4352 10.3533 14.9486 11.5667 14.4419 12.82C13.9486 14.06 13.4819 15.2333 13.0419 16.34H11.1019C11.0619 16.34 11.0152 16.3333 10.9619 16.32C10.9219 16.2933 10.8886 16.2467 10.8619 16.18C10.4619 15.18 10.0086 14.06 9.50191 12.82C9.00858 11.58 8.53525 10.3667 8.08191 9.18H7.70191C7.83525 10.18 7.93525 11.0733 8.00191 11.86C8.06858 12.6467 8.10858 13.3933 8.12191 14.1C8.14858 14.8067 8.16191 15.5267 8.16191 16.26V19Z"}))}var Jr=M(require("react"));function kc(s){return Jr.createElement("svg",f({width:24,height:24,viewBox:"-2 -2 28 28",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},s),Jr.createElement("path",{d:"M7.68191 19C7.53525 19 7.46191 18.9267 7.46191 18.78V5H10.1219C10.2686 5 10.3419 5.07333 10.3419 5.22V16.56H13.4419V15.02H15.7619C15.9086 15.02 15.9819 15.0933 15.9819 15.24V19H7.68191Z"}))}var Ss=M(require("react"));function Dc(){return Ss.createElement("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ss.createElement("path",{d:"M1.72838 9.33987L8.84935 2.34732C9.23874 1.96494 9.86279 1.96539 10.2516 2.34831L13.5636 5.60975C13.9655 6.00555 13.9607 6.65526 13.553 7.04507L8.13212 12.2278C7.94604 12.4057 7.69851 12.505 7.44107 12.505L6.06722 12.505L3.83772 12.505C3.5673 12.505 3.30842 12.3954 3.12009 12.2014L1.7114 10.7498C1.32837 10.3551 1.33596 9.72521 1.72838 9.33987Z",stroke:"currentColor"}),Ss.createElement("line",{x1:"6.01807",y1:"12.5",x2:"10.7959",y2:"12.5",stroke:"currentColor",strokeLinecap:"round"}),Ss.createElement("line",{x1:"5.50834",y1:"5.74606",x2:"10.1984",y2:"10.4361",stroke:"currentColor"}))}var lz=M(require("react"));var Qr=M(require("react"));function Pc(){return Qr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"},Qr.createElement("path",{d:"M13.545 2.907a13.227 13.227 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.19 12.19 0 0 0-3.658 0 8.258 8.258 0 0 0-.412-.833.051.051 0 0 0-.052-.025c-1.125.194-2.22.534-3.257 1.011a.041.041 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032c.001.014.01.028.021.037a13.276 13.276 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019c.308-.42.582-.863.818-1.329a.05.05 0 0 0-.01-.059.051.051 0 0 0-.018-.011 8.875 8.875 0 0 1-1.248-.595.05.05 0 0 1-.02-.066.051.051 0 0 1 .015-.019c.084-.063.168-.129.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.052.052 0 0 1 .053.007c.08.066.164.132.248.195a.051.051 0 0 1-.004.085 8.254 8.254 0 0 1-1.249.594.05.05 0 0 0-.03.03.052.052 0 0 0 .003.041c.24.465.515.909.817 1.329a.05.05 0 0 0 .056.019 13.235 13.235 0 0 0 4.001-2.02.049.049 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.034.034 0 0 0-.02-.019Zm-8.198 7.307c-.789 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612Zm5.316 0c-.788 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612Z"}))}var ea=M(require("react"));function Bc(){return ea.createElement("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},ea.createElement("path",{d:"M3.64645 11.3536C3.45118 11.1583 3.45118 10.8417 3.64645 10.6465L11.1464 3.14645C11.3417 2.95118 11.6583 2.95118 11.8536 3.14645C12.0488 3.34171 12.0488 3.65829 11.8536 3.85355L4.35355 11.3536C4.15829 11.5488 3.84171 11.5488 3.64645 11.3536Z"}))}var Mc=require("react-intl"),ta=["rectangle","ellipse","triangle","line"],Ec={["rectangle"]:Oe.createElement(Eo.SquareIcon,null),["ellipse"]:Oe.createElement(Eo.CircleIcon,null),["triangle"]:Oe.createElement(Eo.VercelLogoIcon,null),["line"]:Oe.createElement(Bc,null)};var cz=s=>s.settings.dockPosition,Rc=Oe.memo(function({activeTool:e,isToolLocked:t}){let n=le(),o=(0,Mc.useIntl)(),i=n.useStore(cz),[a,l]=Oe.useState("rectangle");Oe.useEffect(()=>{ta.includes(e)&&a!==e&&l(e)},[e]);let r=Oe.useCallback(()=>{n.selectTool(a)},[e,n]),c=Oe.useCallback(()=>{n.toggleToolLock()},[n]),p=Oe.useCallback(g=>{g.key===" "&&n.shiftKey&&g.preventDefault()},[]),u=ta.includes(e),h=i==="bottom"||i==="top"?"top":i,m=i==="bottom"||i==="top"?"row":"column";return Oe.createElement($n.Root,{dir:"ltr",onOpenChange:r},Oe.createElement($n.Trigger,{dir:"ltr",asChild:!0,id:"TD-PrimaryTools-Shapes"},Oe.createElement(me,{disabled:u&&n.shiftKey,variant:"primary",onDoubleClick:c,isToolLocked:u&&t,isActive:u,onKeyDown:p},Ec[a])),Oe.createElement($n.Content,{asChild:!0,dir:"ltr",side:h,sideOffset:12},Oe.createElement(ro,{side:"center",style:{flexDirection:m}},ta.map((g,T)=>Oe.createElement(pt,{key:g,label:o.formatMessage({id:g[0].toUpperCase()+g.slice(1)}),kbd:(4+T).toString(),id:`TD-PrimaryTools-Shapes-${g}`},Oe.createElement($n.Item,{asChild:!0},Oe.createElement(me,{variant:"primary",onClick:()=>{n.selectTool(g),l(g)}},Ec[g])))))))});var pz=s=>s.appState.activeTool,uz=s=>s.appState.isToolLocked,hz=s=>s.settings.dockPosition,Ac=Le.memo(function(){let e=le(),t=(0,Lc.useIntl)(),n=e.useStore(pz),o=e.useStore(uz),i=e.useStore(hz),a=Le.useCallback(()=>{e.selectTool("select")},[e]),l=Le.useCallback(()=>{e.selectTool("erase")},[e]),r=Le.useCallback(()=>{e.selectTool("draw")},[e]),c=Le.useCallback(()=>{e.selectTool("arrow")},[e]),p=Le.useCallback(()=>{e.selectTool("text")},[e]),u=Le.useCallback(()=>{e.selectTool("sticky")},[e]);return Le.createElement(ro,{side:"center",id:"TD-PrimaryTools",style:{flexDirection:i==="bottom"||i==="top"?"row":"column"}},Le.createElement(io,{kbd:"1",label:t.formatMessage({id:"select"}),onClick:a,isActive:n==="select",id:"TD-PrimaryTools-CursorArrow"},Le.createElement(hn.CursorArrowIcon,null)),Le.createElement(io,{kbd:"2",label:t.formatMessage({id:"draw"}),onClick:r,isActive:n==="draw",id:"TD-PrimaryTools-Pencil"},Le.createElement(hn.Pencil1Icon,null)),Le.createElement(io,{kbd:"3",label:t.formatMessage({id:"eraser"}),onClick:l,isActive:n==="erase",id:"TD-PrimaryTools-Eraser"},Le.createElement(Dc,null)),Le.createElement(Rc,{activeTool:n,isToolLocked:o}),Le.createElement(io,{kbd:"8",label:t.formatMessage({id:"arrow"}),onClick:c,isLocked:o,isActive:n==="arrow",id:"TD-PrimaryTools-ArrowTopRight"},Le.createElement(hn.ArrowTopRightIcon,null)),Le.createElement(io,{kbd:"9",label:t.formatMessage({id:"text"}),onClick:p,isLocked:o,isActive:n==="text",id:"TD-PrimaryTools-Text"},Le.createElement(hn.TextIcon,null)),Le.createElement(io,{kbd:"0",label:t.formatMessage({id:"sticky"}),onClick:u,isActive:n==="sticky",id:"TD-PrimaryTools-Pencil2"},Le.createElement(hn.Pencil2Icon,null)))});var Q=M(require("react"));var bi=M(require("@radix-ui/react-dropdown-menu"));var ue=require("@radix-ui/react-icons");var na=M(require("react")),Hc=require("@radix-ui/react-dropdown-menu");function pe(n){var o=n,{onSelect:s,id:e}=o,t=Je(o,["onSelect","id"]);return na.createElement(Hc.Item,{dir:"ltr",asChild:!0,onSelect:s,id:e},na.createElement(Xe,f({},t)))}var oa=M(require("react")),zc=require("@radix-ui/react-dropdown-menu");var De=s=>s.preventDefault();function ut({checked:s,disabled:e=!1,variant:t,onCheckedChange:n,kbd:o,id:i,children:a}){return oa.createElement(zc.CheckboxItem,{dir:"ltr",onSelect:De,onCheckedChange:n,checked:s,disabled:e,asChild:!0,id:i},oa.createElement(Xe,{kbd:o,variant:t,hasIndicator:!0},a))}var sa=M(require("react")),Fc=M(require("@radix-ui/react-dropdown-menu"));function Ot({sideOffset:s=8,children:e,align:t,variant:n,id:o,side:i="bottom"}){return sa.createElement(Fc.Content,{dir:"ltr",align:t,sideOffset:s,onEscapeKeyDown:dt,asChild:!0,id:o,side:i},sa.createElement(mz,{variant:n},e))}var mz=R(_t,{width:"fit-content",height:"fit-content",minWidth:0,maxHeight:"75vh",overflowY:"auto","& *":{boxSizing:"border-box"},variants:{variant:{horizontal:{flexDirection:"row"},menu:{minWidth:128}}}});var Oc=require("@radix-ui/react-dropdown-menu");var nt=R(Oc.Separator,{backgroundColor:"$hover",height:1,marginTop:"$2",marginRight:"-$2",marginBottom:"$2",marginLeft:"-$2"});var jc=require("@radix-ui/react-dropdown-menu");var Ts=R(jc.RadioItem,{height:"32px",width:"32px",backgroundColor:"$panel",borderRadius:"4px",padding:"0",margin:"0",display:"flex",alignItems:"center",justifyContent:"center",outline:"none",border:"none",pointerEvents:"all",cursor:"pointer",variants:{isActive:{true:{backgroundColor:"$selected",color:"$panel"},false:{}},bp:{mobile:{},small:{}}},compoundVariants:[{isActive:!1,bp:"small",css:{"&:focus":{backgroundColor:"$hover"},"&:hover:not(:disabled)":{backgroundColor:"$hover"}}}]});var Nn=M(require("react")),Kn=require("@radix-ui/react-dropdown-menu");function Zt({children:s,size:e,disabled:t=!1,label:n,id:o}){return Nn.createElement("span",{id:o},Nn.createElement(Kn.Root,{dir:"ltr"},Nn.createElement(Kn.TriggerItem,{dir:"ltr",asChild:!0},Nn.createElement(Xe,{disabled:t,hasArrow:!0},n)),Nn.createElement(Kn.Content,{dir:"ltr",asChild:!0,sideOffset:2,alignOffset:-2,align:"start"},Nn.createElement(_t,{size:e,overflow:!0},s,Nn.createElement(Kn.Arrow,{offset:13})))))}var ia=M(require("react")),Uc=require("@radix-ui/react-dropdown-menu");function Si(n){var o=n,{id:s,children:e}=o,t=Je(o,["id","children"]);return ia.createElement(Uc.Trigger,{asChild:!0,id:s},ia.createElement(me,f({},t),e))}var ht=R("hr",{height:1,marginTop:"$1",marginRight:"-$0",marginBottom:"$1",marginLeft:"-$0",border:"none",borderBottom:"1px solid $hover"});var Gc=require("react-intl"),gz=s=>s.settings.dockPosition,fz=s=>s.document.pageStates[s.appState.currentPageId].selectedIds.length,Sz=s=>{let e=s.document.pages[s.appState.currentPageId],{selectedIds:t}=s.document.pageStates[s.appState.currentPageId];return t.every(n=>e.shapes[n].isLocked)},Tz=s=>{let e=s.document.pages[s.appState.currentPageId],{selectedIds:t}=s.document.pageStates[s.appState.currentPageId];return t.every(n=>e.shapes[n].isAspectRatioLocked)},bz=s=>{let e=s.document.pages[s.appState.currentPageId],t=s.document.pageStates[s.appState.currentPageId].selectedIds.map(n=>e.shapes[n]);return t.every(n=>n.children!==void 0||n.parentId===t[0].parentId&&t[0].parentId!==s.appState.currentPageId)},yz=s=>{let{selectedIds:e}=s.document.pageStates[s.appState.currentPageId];return e.length>0},wz=s=>{let{selectedIds:e}=s.document.pageStates[s.appState.currentPageId];return e.length>1};function Vc(){let s=le(),e=(0,Gc.useIntl)(),t=s.useStore(Sz),n=s.useStore(Tz),o=s.useStore(bz),i=s.useStore(yz),a=s.useStore(wz),l=s.useStore(fz),r=s.useStore(gz),c=l>1,p=l>2,u=Q.useCallback(()=>{s.rotate()},[s]),h=Q.useCallback(()=>{s.duplicate()},[s]),m=Q.useCallback(()=>{s.toggleLocked()},[s]),g=Q.useCallback(()=>{s.toggleAspectRatioLocked()},[s]),T=Q.useCallback(()=>{s.group()},[s]),y=Q.useCallback(()=>{s.moveToBack()},[s]),b=Q.useCallback(()=>{s.moveBackward()},[s]),S=Q.useCallback(()=>{s.moveForward()},[s]),w=Q.useCallback(()=>{s.moveToFront()},[s]),D=Q.useCallback(()=>{s.setShapeProps({rotation:0})},[s]),E=Q.useCallback(()=>{s.align("top")},[s]),x=Q.useCallback(()=>{s.align("centerVertical")},[s]),B=Q.useCallback(()=>{s.align("bottom")},[s]),k=Q.useCallback(()=>{s.stretch("vertical")},[s]),ee=Q.useCallback(()=>{s.distribute("vertical")},[s]),oe=Q.useCallback(()=>{s.align("left")},[s]),ne=Q.useCallback(()=>{s.align("centerHorizontal")},[s]),ve=Q.useCallback(()=>{s.align("right")},[s]),Ie=Q.useCallback(()=>{s.stretch("horizontal")},[s]),Ce=Q.useCallback(()=>{s.distribute("horizontal")},[s]),Ve=Q.useCallback(at=>{s.setMenuOpen(at)},[s]);return Q.createElement(bi.Root,{dir:"ltr",onOpenChange:Ve},Q.createElement(bi.Trigger,{dir:"ltr",asChild:!0,id:"TD-Tools-Dots"},Q.createElement(me,{variant:"circle"},Q.createElement(ue.DotsHorizontalIcon,null))),Q.createElement(Ot,{sideOffset:16,side:r==="bottom"||r==="top"?"top":r},Q.createElement(Q.Fragment,null,Q.createElement(Ti,null,Q.createElement(me,{variant:"icon",disabled:!i,onClick:h},Q.createElement(pt,{label:e.formatMessage({id:"duplicate"}),kbd:"#D",id:"TD-Tools-Copy"},Q.createElement(ue.CopyIcon,null))),Q.createElement(me,{disabled:!i,onClick:u},Q.createElement(pt,{label:e.formatMessage({id:"rotate"}),id:"TD-Tools-Rotate"},Q.createElement(ue.RotateCounterClockwiseIcon,null))),Q.createElement(me,{disabled:!i,onClick:m},Q.createElement(pt,{label:e.formatMessage({id:t?"unlock":"lock"}),kbd:"#L",id:"TD-Tools-Lock"},t?Q.createElement(ue.LockClosedIcon,null):Q.createElement(ue.LockOpen1Icon,null))),Q.createElement(me,{disabled:!i,onClick:g},Q.createElement(pt,{label:e.formatMessage({id:n?"unlock.aspect.ratio":"lock.aspect.ratio"}),id:"TD-Tools-AspectRatio"},n?Q.createElement(ue.AspectRatioIcon,null):Q.createElement(ue.BoxIcon,null))),Q.createElement(me,{disabled:!i||!o&&!a,onClick:T},Q.createElement(pt,{label:e.formatMessage({id:"group"}),kbd:"#G",id:"TD-Tools-Group"},Q.createElement(ue.GroupIcon,null)))),Q.createElement(Ti,null,Q.createElement(me,{disabled:!i,onClick:y},Q.createElement(pt,{label:e.formatMessage({id:"move.to.back"}),kbd:"#\u21E7[",id:"TD-Tools-PinBottom"},Q.createElement(ue.PinBottomIcon,null))),Q.createElement(me,{disabled:!i,onClick:b},Q.createElement(pt,{label:e.formatMessage({id:"move.backward"}),kbd:"#[",id:"TD-Tools-ArrowDown"},Q.createElement(ue.ArrowDownIcon,null))),Q.createElement(me,{disabled:!i,onClick:S},Q.createElement(pt,{label:e.formatMessage({id:"move.forward"}),kbd:"#]",id:"TD-Tools-ArrowUp"},Q.createElement(ue.ArrowUpIcon,null))),Q.createElement(me,{disabled:!i,onClick:w},Q.createElement(pt,{label:e.formatMessage({id:"move.to.front"}),kbd:"#\u21E7]",id:"TD-Tools-PinTop"},Q.createElement(ue.PinTopIcon,null))),Q.createElement(me,{disabled:!i,onClick:D},Q.createElement(pt,{label:e.formatMessage({id:"reset.angle"}),id:"TD-Tools-ResetAngle"},Q.createElement(ue.AngleIcon,null)))),Q.createElement(ht,null),Q.createElement(Ti,null,Q.createElement(me,{disabled:!c,onClick:oe,id:"TD-Tools-AlignLeft"},Q.createElement(ue.AlignLeftIcon,null)),Q.createElement(me,{disabled:!c,onClick:ne,id:"TD-Tools-AlignCenterHorizontal"},Q.createElement(ue.AlignCenterHorizontallyIcon,null)),Q.createElement(me,{disabled:!c,onClick:ve,id:"TD-Tools-AlignRight"},Q.createElement(ue.AlignRightIcon,null)),Q.createElement(me,{disabled:!c,onClick:Ie,id:"TD-Tools-StretchHorizontal"},Q.createElement(ue.StretchHorizontallyIcon,null)),Q.createElement(me,{disabled:!p,onClick:Ce,id:"TD-Tools-SpaceEvenlyHorizontal"},Q.createElement(ue.SpaceEvenlyHorizontallyIcon,null))),Q.createElement(Ti,null,Q.createElement(me,{disabled:!c,onClick:E,id:"TD-Tools-AlignTop"},Q.createElement(ue.AlignTopIcon,null)),Q.createElement(me,{disabled:!c,onClick:x,id:"TD-Tools-AlignCenterVertical"},Q.createElement(ue.AlignCenterVerticallyIcon,null)),Q.createElement(me,{disabled:!c,onClick:B,id:"TD-Tools-AlignBottom"},Q.createElement(ue.AlignBottomIcon,null)),Q.createElement(me,{disabled:!c,onClick:k,id:"TD-Tools-tretchVertical"},Q.createElement(ue.StretchVerticallyIcon,null)),Q.createElement(me,{disabled:!p,onClick:ee,id:"TD-Tools-SpaceEvenlyVertical"},Q.createElement(ue.SpaceEvenlyVerticallyIcon,null))))))}var Ti=R("div",{position:"relative",display:"flex",width:"100%",background:"none",border:"none",cursor:"pointer",outline:"none",alignItems:"center",justifyContent:"flex-start",padding:0});var Mo=M(require("react"));var $c=require("react-intl");function Nc(){let s=le(),e=(0,$c.useIntl)(),t=Mo.useCallback(()=>{s.delete()},[s]),n=s.useStore(o=>o.appState.status==="idle"&&o.document.pageStates[o.appState.currentPageId].selectedIds.length>0);return Mo.createElement(pt,{label:e.formatMessage({id:"delete"}),kbd:"\u232B",id:"TD-Delete"},Mo.createElement(me,{variant:"circle",disabled:!n,onSelect:t},Mo.createElement(xc,null)))}var xz=s=>s.settings.isDebugMode,Iz=s=>s.settings.dockPosition,Kc=yt.memo(function({onBlur:e}){let t=le(),n=t.useStore(Iz),o=t.useStore(xz);return yt.createElement(yt.Fragment,null,yt.createElement(Cz,{side:n,onBlur:e,bp:bt,debug:o},yt.createElement(vz,{id:"TD-Tools"},yt.createElement(fc,null),yt.createElement(Dz,{orientation:n==="bottom"||n==="top"?"horizontal":"vertical"},yt.createElement(Vc,null),yt.createElement(Ac,null),yt.createElement(Nc,null)))),o&&yt.createElement(kz,null,yt.createElement(uc,null)))}),Cz=R("div",{position:"absolute",width:"100%",minWidth:0,maxWidth:"100%",height:"64px",gap:"$4",display:"flex",justifyContent:"center",alignItems:"center",zIndex:200,overflow:"hidden",pointerEvents:"none","& > div > *":{pointerEvents:"all"},variants:{debug:{true:{},false:{}},bp:{mobile:{},small:{},medium:{},large:{}},side:{top:{width:"100%",height:64,left:0,right:0,top:45},right:{width:64,height:"100%",top:0,right:0},bottom:{width:"100%",left:0,right:0,bottom:0},left:{width:64,height:"100%",left:0}}},compoundVariants:[{side:"top",bp:"large",css:{top:"10px"}},{side:"bottom",debug:!0,css:{bottom:"40px"}}]}),vz=R("div",{display:"flex",width:"fit-content",height:"fit-content",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"$4"}),kz=R("div",{position:"absolute",bottom:"0px",left:"0px",right:"0px",height:"40px",width:"100%",maxWidth:"100%"}),Dz=R("div",{position:"relative",display:"flex",alignItems:"center",height:"fit-content",gap:"$3",variants:{orientation:{horizontal:{flexDirection:"row"},vertical:{flexDirection:"column"}}}});var rt=M(require("react"));var P=M(require("react")),mn=require("@radix-ui/react-icons"),Xc=M(require("@radix-ui/react-dropdown-menu"));var Te=M(require("react")),kt=require("react-intl");var Pz=s=>s.settings,Bz=["bottom","left","right","top"];function Wc(){let s=le(),e=(0,kt.useIntl)(),t=s.useStore(Pz),n=Te.useCallback(()=>{s.setSetting("isDebugMode",g=>!g)},[s]),o=Te.useCallback(()=>{s.setSetting("isDarkMode",g=>!g)},[s]),i=Te.useCallback(()=>{s.setSetting("isFocusMode",g=>!g)},[s]),a=Te.useCallback(()=>{s.setSetting("showRotateHandles",g=>!g)},[s]),l=Te.useCallback(()=>{s.setSetting("showGrid",g=>!g)},[s]),r=Te.useCallback(()=>{s.setSetting("showBindingHandles",g=>!g)},[s]),c=Te.useCallback(()=>{s.setSetting("isSnapping",g=>!g)},[s]),p=Te.useCallback(()=>{s.setSetting("keepStyleMenuOpen",g=>!g)},[s]),u=Te.useCallback(()=>{s.setSetting("showCloneHandles",g=>!g)},[s]),h=Te.useCallback(()=>{s.setSetting("isCadSelectMode",g=>!g)},[s]),m=Te.useCallback(g=>{s.setSetting("dockPosition",g)},[s]);return Te.createElement(Zt,{label:e.formatMessage({id:"menu.preferences"}),id:"TD-MenuItem-Preferences"},Te.createElement(ut,{checked:t.isDarkMode,onCheckedChange:o,kbd:"#\u21E7D",id:"TD-MenuItem-Preferences-Dark_Mode"},Te.createElement(kt.FormattedMessage,{id:"preferences.dark.mode"})),Te.createElement(ut,{checked:t.isFocusMode,onCheckedChange:i,kbd:"#.",id:"TD-MenuItem-Preferences-Focus_Mode"},Te.createElement(kt.FormattedMessage,{id:"preferences.focus.mode"})),Te.createElement(ut,{checked:t.isDebugMode,onCheckedChange:n,id:"TD-MenuItem-Preferences-Debug_Mode"},Te.createElement(kt.FormattedMessage,{id:"preferences.debug.mode"})),Te.createElement(nt,null),Te.createElement(ut,{checked:t.showGrid,onCheckedChange:l,kbd:"#\u21E7G",id:"TD-MenuItem-Preferences-Grid"},Te.createElement(kt.FormattedMessage,{id:"preferences.show.grid"})),Te.createElement(ut,{checked:t.isCadSelectMode,onCheckedChange:h,id:"TD-MenuItem-Preferences-Cad_Selection"},Te.createElement(kt.FormattedMessage,{id:"preferences.use.cad.selection"})),Te.createElement(ut,{checked:t.keepStyleMenuOpen,onCheckedChange:p,id:"TD-MenuItem-Preferences-Style_menu"},Te.createElement(kt.FormattedMessage,{id:"preferences.keep.stylemenu.open"})),Te.createElement(ut,{checked:t.isSnapping,onCheckedChange:c,id:"TD-MenuItem-Preferences-Always_Show_Snaps"},Te.createElement(kt.FormattedMessage,{id:"preferences.always.show.snaps"})),Te.createElement(ut,{checked:t.showRotateHandles,onCheckedChange:a,id:"TD-MenuItem-Preferences-Rotate_Handles"},Te.createElement(kt.FormattedMessage,{id:"preferences.rotate.handles"})),Te.createElement(ut,{checked:t.showBindingHandles,onCheckedChange:r,id:"TD-MenuItem-Preferences-Binding_Handles"},Te.createElement(kt.FormattedMessage,{id:"preferences.binding.handles"})),Te.createElement(ut,{checked:t.showCloneHandles,onCheckedChange:u,id:"TD-MenuItem-Preferences-Clone_Handles"},Te.createElement(kt.FormattedMessage,{id:"preferences.clone.handles"})),Te.createElement(Zt,{label:e.formatMessage({id:"dock.position"})},Bz.map(g=>Te.createElement(ut,{key:g,checked:t.dockPosition===g,onCheckedChange:()=>m(g),id:`TD-MenuItem-DockPosition-${g}`},Te.createElement(Ez,null,Te.createElement(kt.FormattedMessage,{id:g}))))))}var Ez=R("span",{textTransform:"capitalize"});var ra=M(require("react"));function _c(){return ra.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ra.createElement("path",{fill:"none",stroke:"currentColor",strokeWidth:2,d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"}))}var Ee=require("react-intl");var Yc=require("@radix-ui/react-icons"),Xt=M(require("react")),yi=require("react-intl");var Mz=s=>s.settings.language;function Zc(){let s=le(),e=s.useStore(Mz),t=(0,yi.useIntl)(),n=Xt.useCallback(o=>{s.setSetting("language",o)},[s]);return Xt.createElement(Zt,{label:t.formatMessage({id:"language"})},hi.map(({locale:o,label:i})=>Xt.createElement(ut,{key:o,checked:e===o,onCheckedChange:()=>n(o),id:`TD-MenuItem-Language-${o}`},i)),Xt.createElement(nt,null),Xt.createElement("a",{href:"https://github.com/tldraw/tldraw/blob/develop/guides/translation.md",target:"_blank",rel:"nofollow"},Xt.createElement(pe,{id:"TD-MenuItem-Translation-Link"},Xt.createElement(yi.FormattedMessage,{id:"translation.link"}),Xt.createElement(Fe,null,Xt.createElement(Yc.ExternalLinkIcon,null)))))}var Rz=s=>s.document.pageStates[s.appState.currentPageId].selectedIds.length,Lz=s=>s.appState.disableAssets,qc=P.memo(function({sponsor:e,readOnly:t}){let n=le(),o=(0,Ee.useIntl)(),i=n.useStore(Rz),a=n.useStore(Lz),[l,r]=P.useState(0);P.useEffect(()=>r(1),[]);let{onNewProject:c,onOpenProject:p,onSaveProject:u,onSaveProjectAs:h}=ci(),m=P.useCallback(()=>{n.delete()},[n]),g=P.useCallback(()=>{n.copyImage("svg",{scale:1,quality:1,transparentBackground:!1})},[n]),T=P.useCallback(()=>{n.copyImage("png",{scale:2,quality:1,transparentBackground:!0})},[n]),y=P.useCallback(()=>te(this,null,function*(){n.exportImage("png",{scale:2,quality:1,transparentBackground:!0})}),[n]),b=P.useCallback(()=>te(this,null,function*(){n.exportImage("jpeg",{scale:2,quality:1,transparentBackground:!1})}),[n]),S=P.useCallback(()=>te(this,null,function*(){n.exportImage("webp",{scale:2,quality:1,transparentBackground:!1})}),[n]),w=P.useCallback(()=>te(this,null,function*(){n.exportImage("svg",{scale:2,quality:1,transparentBackground:!1})}),[n]),D=P.useCallback(()=>te(this,null,function*(){n.copyJson()}),[n]),E=P.useCallback(()=>te(this,null,function*(){n.exportJson()}),[n]),x=P.useCallback(()=>{var gt,Pt;(Pt=(gt=n.callbacks).onSignIn)==null||Pt.call(gt,n)},[n]),B=P.useCallback(()=>{var gt,Pt;(Pt=(gt=n.callbacks).onSignOut)==null||Pt.call(gt,n)},[n]),k=P.useCallback(()=>{n.cut()},[n]),ee=P.useCallback(()=>{n.copy()},[n]),oe=P.useCallback(()=>{n.paste()},[n]),ne=P.useCallback(()=>{n.selectAll()},[n]),ve=P.useCallback(()=>{n.selectNone()},[n]),Ie=P.useCallback(()=>{n.openAsset()},[n]),Ce=P.useCallback(()=>{n.zoomTo(1)},[n]),Ve=n.callbacks.onNewProject||n.callbacks.onOpenProject||n.callbacks.onSaveProject||n.callbacks.onSaveProjectAs||n.callbacks.onExport,Ke=n.callbacks.onSignIn||n.callbacks.onSignOut,at=i>0;return P.createElement(Xc.Root,{dir:"ltr"},P.createElement(Si,{id:"TD-MenuIcon"},P.createElement(mn.HamburgerMenuIcon,null)),P.createElement(Ot,{variant:"menu",id:"TD-Menu"},Ve&&P.createElement(Zt,{label:`${o.formatMessage({id:"menu.file"})}...`,id:"TD-MenuItem-File"},n.callbacks.onNewProject&&P.createElement(pe,{onClick:c,kbd:"#N",id:"TD-MenuItem-File-New_Project"},P.createElement(Ee.FormattedMessage,{id:"new.project"})),n.callbacks.onOpenProject&&P.createElement(pe,{onClick:p,kbd:"#O",id:"TD-MenuItem-File-Open"},P.createElement(Ee.FormattedMessage,{id:"open"}),"..."),n.callbacks.onSaveProject&&P.createElement(pe,{onClick:u,kbd:"#S",id:"TD-MenuItem-File-Save"},P.createElement(Ee.FormattedMessage,{id:"save"})),n.callbacks.onSaveProjectAs&&P.createElement(pe,{onClick:h,kbd:"#\u21E7S",id:"TD-MenuItem-File-Save_As"},P.createElement(Ee.FormattedMessage,{id:"save.as"}),"..."),!a&&P.createElement(P.Fragment,null,P.createElement(ht,null),P.createElement(pe,{onClick:Ie,kbd:"#U",id:"TD-MenuItem-File-Upload_Media"},P.createElement(Ee.FormattedMessage,{id:"upload.media"})))),P.createElement(Zt,{label:`${o.formatMessage({id:"menu.edit"})}...`,id:"TD-MenuItem-Edit"},P.createElement(pe,{onSelect:De,onClick:n.undo,disabled:t,kbd:"#Z",id:"TD-MenuItem-Edit-Undo"},P.createElement(Ee.FormattedMessage,{id:"undo"})),P.createElement(pe,{onSelect:De,onClick:n.redo,disabled:t,kbd:"#\u21E7Z",id:"TD-MenuItem-Edit-Redo"},P.createElement(Ee.FormattedMessage,{id:"redo"})),P.createElement(nt,{dir:"ltr"}),P.createElement(pe,{onSelect:De,disabled:!at||t,onClick:k,kbd:"#X",id:"TD-MenuItem-Edit-Cut"},P.createElement(Ee.FormattedMessage,{id:"cut"})),P.createElement(pe,{onSelect:De,disabled:!at,onClick:ee,kbd:"#C",id:"TD-MenuItem-Edit-Copy"},P.createElement(Ee.FormattedMessage,{id:"copy"})),P.createElement(pe,{onSelect:De,onClick:oe,kbd:"#V",id:"TD-MenuItem-Edit-Paste"},P.createElement(Ee.FormattedMessage,{id:"paste"})),P.createElement(nt,{dir:"ltr"}),P.createElement(Zt,{label:`${o.formatMessage({id:"copy.as"})}...`,size:"small",id:"TD-MenuItem-Copy-As"},P.createElement(pe,{onClick:g,id:"TD-MenuItem-Copy-as-SVG"},"SVG"),P.createElement(pe,{onClick:T,id:"TD-MenuItem-Copy-As-PNG"},"PNG"),P.createElement(pe,{onClick:D,id:"TD-MenuItem-Copy_as_JSON"},"JSON")),P.createElement(Zt,{label:`${o.formatMessage({id:"export.as"})}...`,size:"small",id:"TD-MenuItem-Export"},P.createElement(pe,{onClick:w,id:"TD-MenuItem-Export-SVG"},"SVG"),P.createElement(pe,{onClick:y,id:"TD-MenuItem-Export-PNG"},"PNG"),P.createElement(pe,{onClick:b,id:"TD-MenuItem-Export-JPG"},"JPG"),P.createElement(pe,{onClick:S,id:"TD-MenuItem-Export-WEBP"},"WEBP"),P.createElement(pe,{onClick:E,id:"TD-MenuItem-Export-JSON"},"JSON")),P.createElement(nt,{dir:"ltr"}),P.createElement(pe,{onSelect:De,onClick:ne,kbd:"#A",id:"TD-MenuItem-Select_All"},P.createElement(Ee.FormattedMessage,{id:"select.all"})),P.createElement(pe,{onSelect:De,disabled:!at,onClick:ve,id:"TD-MenuItem-Select_None"},P.createElement(Ee.FormattedMessage,{id:"select.none"})),P.createElement(nt,{dir:"ltr"}),P.createElement(pe,{onSelect:m,disabled:!at,kbd:"\u232B",id:"TD-MenuItem-Delete"},P.createElement(Ee.FormattedMessage,{id:"delete"}))),P.createElement(Zt,{label:o.formatMessage({id:"menu.view"}),id:"TD-MenuItem-Edit"},P.createElement(pe,{onSelect:De,onClick:n.zoomIn,kbd:"#+",id:"TD-MenuItem-View-ZoomIn"},P.createElement(Ee.FormattedMessage,{id:"zoom.in"})),P.createElement(pe,{onSelect:De,onClick:n.zoomOut,kbd:"#-",id:"TD-MenuItem-View-ZoomOut"},P.createElement(Ee.FormattedMessage,{id:"zoom.out"})),P.createElement(pe,{onSelect:De,onClick:Ce,kbd:"\u21E7+0",id:"TD-MenuItem-View-ZoomTo100"},P.createElement(Ee.FormattedMessage,{id:"zoom.to"})," 100%"),P.createElement(pe,{onSelect:De,onClick:n.zoomToFit,kbd:"\u21E7+1",id:"TD-MenuItem-View-ZoomToFit"},P.createElement(Ee.FormattedMessage,{id:"zoom.to.fit"})),P.createElement(pe,{onSelect:De,onClick:n.zoomToSelection,kbd:"\u21E7+2",id:"TD-MenuItem-View-ZoomToSelection"},P.createElement(Ee.FormattedMessage,{id:"zoom.to.selection"}))),P.createElement(nt,{dir:"ltr"}),P.createElement(Wc,null),P.createElement(nt,{dir:"ltr"}),P.createElement(Zc,null),P.createElement(nt,{dir:"ltr"}),P.createElement("a",{href:"https://github.com/Tldraw/Tldraw",target:"_blank",rel:"nofollow"},P.createElement(pe,{id:"TD-MenuItem-Github"},"GitHub",P.createElement(Fe,null,P.createElement(mn.GitHubLogoIcon,null)))),P.createElement("a",{href:"https://twitter.com/Tldraw",target:"_blank",rel:"nofollow"},P.createElement(pe,{id:"TD-MenuItem-Twitter"},"Twitter",P.createElement(Fe,null,P.createElement(mn.TwitterLogoIcon,null)))),P.createElement("a",{href:"https://discord.gg/SBBEVCA4PG",target:"_blank",rel:"nofollow"},P.createElement(pe,{id:"TD-MenuItem-Discord"},"Discord",P.createElement(Fe,null,P.createElement(Pc,null)))),e===!1&&P.createElement("a",{href:"https://github.com/sponsors/steveruizok",target:"_blank",rel:"nofollow"},P.createElement(pe,{isSponsor:!0,id:"TD-MenuItem-Become_a_Sponsor"},P.createElement(Ee.FormattedMessage,{id:"become.a.sponsor"})," ",P.createElement(Fe,null,P.createElement(_c,null)))),e===!0&&P.createElement("a",{href:"https://github.com/sponsors/steveruizok",target:"_blank",rel:"nofollow"},P.createElement(pe,{id:"TD-MenuItem-is_a_Sponsor"},P.createElement(Ee.FormattedMessage,{id:"sponsored"}),"!",P.createElement(Fe,null,P.createElement(mn.HeartFilledIcon,null)))),Ke&&P.createElement(P.Fragment,null,P.createElement(nt,{dir:"ltr"})," ",n.callbacks.onSignIn&&P.createElement(pe,{onSelect:x,id:"TD-MenuItem-Sign_in"},P.createElement(Ee.FormattedMessage,{id:"menu.sign.in"})),n.callbacks.onSignOut&&P.createElement(pe,{onSelect:B,id:"TD-MenuItem-Sign_out"},P.createElement(Ee.FormattedMessage,{id:"menu.sign.out"}),P.createElement(Fe,null,P.createElement(mn.ExitIcon,null))))))});var fe=M(require("react")),jt=M(require("@radix-ui/react-dropdown-menu")),Ii=require("@radix-ui/react-icons");var be=M(require("react")),Dt=M(require("@radix-ui/react-alert-dialog")),xi=require("@radix-ui/react-icons");var wi=R("button",{position:"relative",height:"32px",width:"32px",backgroundColor:"$panel",borderRadius:"4px",padding:"0",margin:"0",outline:"none",border:"none",pointerEvents:"all",fontSize:"$0",color:"$text",cursor:"pointer",display:"grid",alignItems:"center",justifyContent:"center","& > *":{gridRow:1,gridColumn:1},"&:disabled":{opacity:"0.5"},"& > span":{width:"100%",height:"100%",display:"flex",alignItems:"center"},variants:{bp:{mobile:{backgroundColor:"transparent"},small:{"&:hover:not(:disabled)":{backgroundColor:"$hover"}}},size:{small:{height:32,width:32,"& svg:nth-of-type(1)":{height:"16px",width:"16px"}},medium:{height:44,width:44,"& svg:nth-of-type(1)":{height:"18px",width:"18px"}},large:{height:44,width:44,"& svg:nth-of-type(1)":{height:"20px",width:"20px"}}},isActive:{true:{color:"$selected"}}}});var Ro=M(require("react"));var Jc=Ro.forwardRef((n,t)=>{var o=n,{icon:s}=o,e=Je(o,["icon"]);return Ro.createElement(Az,null,Ro.createElement(Hz,C(f({},e),{ref:t})),s?Ro.createElement(zz,null,s):null)}),Az=R("div",{position:"relative",width:"100%",height:"min-content"}),Hz=R("input",{color:"$text",border:"none",textAlign:"left",width:"100%",paddingLeft:"$3",paddingRight:"$6",backgroundColor:"$background",height:"32px",outline:"none",fontFamily:"$ui",fontSize:"$1","&:focus":{backgroundColor:"$hover"},borderRadius:"$2"}),zz=R(Fe,{top:0,right:0,position:"absolute",paddingLeft:"$3",paddingRight:"$3",pointerEvents:"none",color:"$text"});var Lo=require("react-intl"),Fz=s=>Object.keys(s.document.pages).length>1;function ep({page:s,onOpen:e,onClose:t}){let n=le(),o=(0,Lo.useIntl)(),[i,a]=be.useState(!1),[l,r]=be.useState(s.name||"Page"),c=n.useStore(Fz),p=be.useRef(null),u=be.useCallback(()=>{a(!1)},[]),h=be.useCallback(()=>{n.duplicatePage(s.id)},[n]),m=be.useCallback(()=>{window.confirm("Are you sure you want to delete this page?")&&n.deletePage(s.id)},[n]),g=be.useCallback(E=>{if(a(E),E){e==null||e();return}},[n]);function T(E){E.stopPropagation()}let y=be.useRef(s.name||"Page"),b=be.useRef(y.current),S=be.useCallback(E=>{let x=E.target.value.trimStart();b.current=x,r(x)},[]),w=be.useCallback(E=>{switch(E.key){case"Enter":{b.current===y.current?a(!1):(y.current=b.current,n.renamePage(s.id,b.current.trim()));break}case"Escape":{if(b.current===y.current){a(!1);return}b.current=y.current,r(y.current),requestAnimationFrame(()=>{let x=p.current;x&&(x.focus(),x.setSelectionRange(0,x.value.length))});break}}},[]),D=be.useRef(!1);return be.useEffect(()=>(i?(D.current=!0,y.current=s.name||"Page",b.current=y.current,requestAnimationFrame(()=>{let E=p.current;E&&(E.focus(),E.setSelectionRange(0,E.value.length))})):D.current&&(t==null||t()),()=>{b.current!==y.current&&(y.current=b.current,n.renamePage(s.id,b.current))}),[i]),be.createElement(Dt.Root,{open:i,onOpenChange:g},be.createElement(Dt.Trigger,{asChild:!0,"data-shy":"true"},be.createElement(wi,{bp:bt},be.createElement(Fe,null,be.createElement(xi.MixerVerticalIcon,null)))),be.createElement(Dt.Portal,null,be.createElement(jz,{onPointerDown:u}),be.createElement(Oz,{dir:"ltr",onKeyDown:T,onKeyUp:T},be.createElement(Jc,{ref:p,placeholder:o.formatMessage({id:"page.name"}),value:l,onChange:S,onKeyDown:w,icon:be.createElement(xi.Pencil1Icon,null)}),be.createElement(ht,null),be.createElement(Qc,{onSelect:h},be.createElement(Lo.FormattedMessage,{id:"duplicate"})),be.createElement(Qc,{disabled:!c,onSelect:m},be.createElement(Lo.FormattedMessage,{id:"delete"})),be.createElement(ht,null),be.createElement(Dt.Cancel,{asChild:!0},be.createElement(Xe,null,be.createElement(Lo.FormattedMessage,{id:"cancel"}))))))}var Oz=R(Dt.Content,{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",minWidth:240,maxWidth:"fit-content",maxHeight:"85vh",marginTop:"-5vh",pointerEvents:"all",backgroundColor:"$panel",padding:"$1",borderRadius:"$2",font:"$ui","&:focus":{outline:"none"}}),jz=R(Dt.Overlay,{backgroundColor:"rgba(0, 0, 0, .15)",position:"fixed",pointerEvents:"all",inset:0});function Qc(t){var n=t,{onSelect:s}=n,e=Je(n,["onSelect"]);return be.createElement(Dt.Action,{asChild:!0,onClick:s,onSelect:s},be.createElement(Xe,f({},e)))}var Ci=require("react-intl"),Uz=s=>Object.values(s.document.pages).sort((e,t)=>(e.childIndex||0)-(t.childIndex||0)),Gz=s=>s.document.pages[s.appState.currentPageId].name,Vz=s=>s.document.pages[s.appState.currentPageId].id;function tp(){let s=le(),e=fe.useRef(!1),[t,n]=fe.useState(!1);fe.useEffect(()=>{e.current!==t&&(e.current=t)},[t]);let o=fe.useCallback(()=>{n(!1)},[n]),i=fe.useCallback(l=>{e.current!==l&&n(l)},[n]),a=s.useStore(Gz);return fe.createElement(jt.Root,{dir:"ltr",open:t,onOpenChange:i},fe.createElement(jt.Trigger,{dir:"ltr",asChild:!0,id:"TD-Page"},fe.createElement(me,{variant:"text"},a||"Page")),fe.createElement(Ot,{variant:"menu",align:"start"},t&&fe.createElement($z,{onClose:o})))}function $z({onClose:s}){let e=le(),t=(0,Ci.useIntl)(),n=e.useStore(Uz),o=e.useStore(Vz),i=fe.useCallback(()=>{let g=t.formatMessage({id:"page"})+" "+(Object.keys(e.document.pages).length+1);e.createPage(void 0,g)},[e]),a=fe.useCallback(g=>{s(),e.changePage(g)},[e]),[l,r]=fe.useState(null),[c,p]=fe.useState(null),u=fe.useCallback(g=>{r(g.currentTarget.id),p(n.findIndex(T=>T.id===g.currentTarget.id)),g.dataTransfer.effectAllowed="move"},[]),h=fe.useCallback(g=>{g.preventDefault();let T=n.findIndex(S=>S.id===g.currentTarget.id),y=g.currentTarget.getBoundingClientRect();T=(g.clientY-y.top)/y.height<.5?T:T+1,p(T)},[l,n]),m=fe.useCallback(()=>{l!==null&&c!==null&&e.movePage(l,c),r(null),p(null)},[l,c]);return fe.createElement(fe.Fragment,null,fe.createElement(jt.RadioGroup,{dir:"ltr",value:o,onValueChange:a},n.map((g,T)=>fe.createElement(Nz,{key:g.id,isDropAbove:T===c&&T===0,isDropBelow:c!==null&&T===c-1},fe.createElement(jt.RadioItem,{title:g.name||"Page",value:g.id,key:g.id,id:g.id,asChild:!0,onDragOver:h,onDragStart:u,onDrop:m,draggable:!0},fe.createElement(Kz,null,fe.createElement("span",{id:g.id},g.name||"Page"),fe.createElement(jt.ItemIndicator,null,fe.createElement(Fe,null,fe.createElement(Ii.CheckIcon,null))))),fe.createElement(ep,{page:g,onClose:s})))),fe.createElement(nt,null),fe.createElement(jt.Item,{onSelect:i,asChild:!0},fe.createElement(Xe,null,fe.createElement("span",null,fe.createElement(Ci.FormattedMessage,{id:"create.page"})),fe.createElement(Fe,null,fe.createElement(Ii.PlusIcon,null)))))}var Nz=R("div",{position:"relative",display:"grid",gridTemplateColumns:"1fr auto",gridAutoFlow:"column",margin:0,'& > *[data-shy="true"]':{opacity:0},'&:hover > *[data-shy="true"]':{opacity:1},variants:{isDropAbove:{true:{"&::after":{content:"",display:"block",position:"absolute",top:0,width:"100%",height:"1px",backgroundColor:"$selected",zIndex:999,pointerEvents:"none"}}},isDropBelow:{true:{"&::after":{content:"",display:"block",position:"absolute",width:"100%",height:"1px",top:"100%",backgroundColor:"$selected",zIndex:999,pointerEvents:"none"}}}}}),Kz=R(Xe,{minWidth:128});var mt=M(require("react"));var vi=M(require("@radix-ui/react-dropdown-menu"));var Ao=require("react-intl"),Wz=s=>s.document.pageStates[s.appState.currentPageId].camera.zoom,np=mt.memo(function(){let e=le(),t=e.useStore(Wz);return mt.createElement(vi.Root,{dir:"ltr"},mt.createElement(vi.Trigger,{dir:"ltr",asChild:!0,id:"TD-Zoom"},mt.createElement(_z,{onDoubleClick:e.resetZoom,variant:"text"},Math.round(t*100),"%")),mt.createElement(Ot,{align:"end"},mt.createElement(pe,{onSelect:De,onClick:e.zoomIn,kbd:"#+",id:"TD-Zoom-Zoom_In"},mt.createElement(Ao.FormattedMessage,{id:"zoom.in"})),mt.createElement(pe,{onSelect:De,onClick:e.zoomOut,kbd:"#\u2212",id:"TD-Zoom-Zoom_Out"},mt.createElement(Ao.FormattedMessage,{id:"zoom.out"})),mt.createElement(pe,{onSelect:De,onClick:e.resetZoom,kbd:"\u21E70",id:"TD-Zoom-Zoom_To_100%"},mt.createElement(Ao.FormattedMessage,{id:"to"})," 100%"),mt.createElement(pe,{onSelect:De,onClick:e.zoomToFit,kbd:"\u21E71",id:"TD-Zoom-To_Fit"},mt.createElement(Ao.FormattedMessage,{id:"to.fit"})),mt.createElement(pe,{onSelect:De,onClick:e.zoomToSelection,kbd:"\u21E72",id:"TD-Zoom-To_Selection"},mt.createElement(Ao.FormattedMessage,{id:"to.selection"}))))}),_z=R(me,{minWidth:56});var se=M(require("react")),Wn=M(require("@radix-ui/react-dropdown-menu"));var kn=require("react-intl");var _n=require("@radix-ui/react-icons"),Yz=s=>s.appState.currentStyle,Zz=s=>s.document.pageStates[s.appState.currentPageId].selectedIds,Xz=Object.keys(mo),op={["draw"]:se.createElement(bc,null),["solid"]:se.createElement(yc,null),["dashed"]:se.createElement(Sc,null),["dotted"]:se.createElement(Tc,null)},qz={["small"]:se.createElement(Cc,null),["medium"]:se.createElement(vc,null),["large"]:se.createElement(kc,null)},Jz={["start"]:se.createElement(_n.TextAlignLeftIcon,null),["middle"]:se.createElement(_n.TextAlignCenterIcon,null),["end"]:se.createElement(_n.TextAlignRightIcon,null),["justify"]:se.createElement(_n.TextAlignJustifyIcon,null)},Qz=s=>s.settings.isDarkMode?"dark":"light",eF=s=>s.settings.keepStyleMenuOpen,tF=s=>{let{activeTool:e,currentPageId:t}=s.appState;switch(e){case"select":{let n=s.document.pages[t],o=!1,i=!1;for(let a of s.document.pageStates[t].selectedIds)"text"in n.shapes[a]&&(o=!0),"label"in n.shapes[a]&&(i=!0);return o?"text":i?"label":""}case"text":return"text";case"rectangle":return"label";case"ellipse":return"label";case"triangle":return"label";case"arrow":return"label";case"line":return"label"}return!1},sp=se.memo(function(){let e=le(),t=e.useStore(Qz),n=e.useStore(eF),o=e.useStore(tF),i=e.useStore(Yz),a=e.useStore(Zz),[l,r]=se.useState(i),c=se.useRef(i);se.useEffect(()=>{let{appState:{currentStyle:b},page:S,selectedIds:w}=e,D={};if(w.length<=0)D=b;else{let E=new Set([]);e.selectedIds.map(x=>S.shapes[x]).forEach(x=>{Xz.forEach(B=>{if(!E.has(B))if(D[B]===void 0)D[B]=x.style[B];else{if(D[B]===x.style[B])return;D[B]=x.style[B],E.add(B)}})})}JSON.stringify(D)!==JSON.stringify(c.current)&&(c.current=D,r(D))},[i,a]);let p=se.useCallback(b=>{e.setSetting("keepStyleMenuOpen",b)},[]),u=se.useCallback(b=>{e.style({isFilled:b})},[]),h=se.useCallback(b=>{e.style({dash:b})},[]),m=se.useCallback(b=>{e.style({size:b})},[]),g=se.useCallback(b=>{e.style({font:b})},[]),T=se.useCallback(b=>{e.style({textAlign:b})},[]),y=se.useCallback(b=>{e.setMenuOpen(b)},[e]);return se.createElement(Wn.Root,{dir:"ltr",onOpenChange:y,open:n?!0:void 0,modal:!1},se.createElement(Wn.Trigger,{asChild:!0,id:"TD-Styles"},se.createElement(me,{variant:"text"},se.createElement(kn.FormattedMessage,{id:"styles"}),se.createElement(oF,{style:{color:ho[t][l.color]}},l.isFilled&&se.createElement($r,{size:16,stroke:"none",fill:Rs[t][l.color]}),op[l.dash]))),se.createElement(Ot,null,se.createElement(bs,{variant:"tall",id:"TD-Styles-Color-Container"},se.createElement("span",null,se.createElement(kn.FormattedMessage,{id:"style.menu.color"})),se.createElement(nF,null,Object.keys(ho.light).map(b=>se.createElement(Wn.Item,{key:b,onSelect:De,asChild:!0,id:`TD-Styles-Color-Swatch-${b}`},se.createElement(me,{variant:"icon",isActive:l.color===b,onClick:()=>e.style({color:b})},se.createElement($r,{size:18,strokeWidth:2.5,fill:l.isFilled?Rs.light[b]:"transparent",stroke:ho.light[b]})))))),se.createElement(ut,{variant:"styleMenu",checked:!!l.isFilled,onCheckedChange:u,id:"TD-Styles-Fill"},se.createElement(kn.FormattedMessage,{id:"style.menu.fill"})),se.createElement(bs,{id:"TD-Styles-Dash-Container"},se.createElement(kn.FormattedMessage,{id:"style.menu.dash"}),se.createElement(ki,{dir:"ltr",value:l.dash,onValueChange:h},Object.values(qt).map(b=>se.createElement(Ts,{key:b,isActive:b===l.dash,value:b,onSelect:De,bp:bt,id:`TD-Styles-Dash-${b}`},op[b])))),se.createElement(bs,{id:"TD-Styles-Size-Container"},se.createElement(kn.FormattedMessage,{id:"style.menu.size"}),se.createElement(ki,{dir:"ltr",value:l.size,onValueChange:m},Object.values(Vo).map(b=>se.createElement(Ts,{key:b,isActive:b===l.size,value:b,onSelect:De,bp:bt,id:`TD-Styles-Dash-${b}`},qz[b])))),(o==="text"||o==="label")&&se.createElement(se.Fragment,null,se.createElement(ht,null),se.createElement(bs,{id:"TD-Styles-Font-Container"},se.createElement(kn.FormattedMessage,{id:"style.menu.font"}),se.createElement(ki,{dir:"ltr",value:l.font,onValueChange:g},Object.values(lo).map(b=>se.createElement(Ts,{key:b,isActive:b===l.font,value:b,onSelect:De,bp:bt,id:`TD-Styles-Font-${b}`},se.createElement(sF,{fontStyle:b},"Aa"))))),o==="text"&&se.createElement(bs,{id:"TD-Styles-Align-Container"},se.createElement(kn.FormattedMessage,{id:"style.menu.align"}),se.createElement(ki,{dir:"ltr",value:l.textAlign,onValueChange:T},Object.values(Jt).map(b=>se.createElement(Ts,{key:b,isActive:b===l.textAlign,value:b,onSelect:De,bp:bt,id:`TD-Styles-Align-${b}`},Jz[b]))))),se.createElement(nt,null),se.createElement(ut,{variant:"styleMenu",checked:n,onCheckedChange:p,id:"TD-Styles-Keep-Open"},se.createElement(kn.FormattedMessage,{id:"style.menu.keep.open"}))))}),nF=R("div",{display:"grid",gridTemplateColumns:"repeat(4, auto)",gap:0}),bs=R("div",{position:"relative",width:"100%",background:"none",border:"none",cursor:"pointer",minHeight:"32px",outline:"none",color:"$text",fontFamily:"$ui",fontWeight:400,fontSize:"$1",padding:"$2 0 $2 $3",borderRadius:4,userSelect:"none",margin:0,display:"flex",gap:"$3",flexDirection:"row",alignItems:"center",justifyContent:"space-between",variants:{variant:{tall:{alignItems:"flex-start",padding:"0 0 0 $3","& > span":{paddingTop:"$4"}}}}}),ki=R(Wn.DropdownMenuRadioGroup,{display:"flex",flexDirection:"row",gap:"$1"}),oF=R("div",{display:"grid","& > *":{gridColumn:1,gridRow:1}}),sF=R("div",{width:32,height:32,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"$3",variants:{fontStyle:{["script"]:{fontFamily:"Caveat Brush"},["sans"]:{fontFamily:"Recursive"},["erif"]:{fontFamily:"Georgia"},["mono"]:{fontFamily:"Recursive Mono"}}}});var xe=M(require("react")),Ho=require("@radix-ui/react-icons"),rp=M(require("@radix-ui/react-dropdown-menu"));var Di=require("@tldraw/core"),ys=require("react-intl");var aa=M(require("react"));function ip(){return aa.createElement("svg",{width:"15",height:"15",viewBox:"0 0 15 15",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"},aa.createElement("path",{d:"M1.36482 4.71089C1.36482 3.21371 2.57853 2 4.07572 2C5.5729 2 6.78661 3.21371 6.78661 4.71089C6.78661 5.76842 6.18106 6.68452 5.29779 7.13136C5.80465 7.24611 6.26407 7.44186 6.66028 7.73182C7.18674 8.11711 7.57215 8.64722 7.81073 9.30983C7.81452 9.30606 7.81832 9.3023 7.82212 9.29855C8.30448 8.82317 8.91325 8.52463 9.60905 8.37275C8.68812 7.922 8.05394 6.97569 8.05394 5.88126C8.05394 4.35017 9.29513 3.10898 10.8262 3.10898C12.3573 3.10898 13.5985 4.35017 13.5985 5.88126C13.5985 6.97561 12.9644 7.92186 12.0436 8.37265C12.7396 8.52449 13.3486 8.82306 13.831 9.29854C14.5795 10.0361 14.9481 11.1249 14.9481 12.5176C14.9481 12.7799 14.7354 12.9926 14.473 12.9926C14.2107 12.9926 13.9981 12.7799 13.9981 12.5175C13.9981 11.2848 13.6738 10.4774 13.1642 9.97518C12.6532 9.4716 11.8802 9.20024 10.8266 9.20024C9.77294 9.20024 8.99993 9.4716 8.48896 9.97518C7.97939 10.4774 7.65513 11.2848 7.65513 12.5176C7.65513 12.7799 7.44247 12.9926 7.18013 12.9926C6.9178 12.9926 6.70513 12.7799 6.70513 12.5176C6.70513 11.6734 6.84053 10.941 7.11384 10.3307C7.0922 10.2895 7.0763 10.2444 7.06737 10.1962C6.91739 9.38749 6.57392 8.84586 6.09923 8.49845C5.61626 8.14499 4.94481 7.95427 4.07574 7.95427C3.05232 7.95427 2.30368 8.21784 1.80952 8.70485C1.31675 9.19047 1.00176 9.97257 1.00176 11.1702C1.00176 11.4326 0.789093 11.6452 0.526758 11.6452C0.264423 11.6452 0.0517578 11.4326 0.0517578 11.1702C0.0517578 9.81263 0.411052 8.74925 1.14268 8.02821C1.60624 7.57137 2.18892 7.28191 2.85378 7.13142C1.97043 6.68461 1.36482 5.76848 1.36482 4.71089ZM4.07572 2.95C3.1032 2.95 2.31482 3.73838 2.31482 4.71089C2.31482 5.68341 3.1032 6.47178 4.07572 6.47178C5.04823 6.47178 5.83661 5.68341 5.83661 4.71089C5.83661 3.73838 5.04823 2.95 4.07572 2.95ZM10.8262 4.05898C9.8198 4.05898 9.00394 4.87484 9.00394 5.88126C9.00394 6.88768 9.8198 7.70355 10.8262 7.70355C11.8326 7.70355 12.6485 6.88768 12.6485 5.88126C12.6485 4.87484 11.8326 4.05898 10.8262 4.05898Z"}))}var iF=s=>s.room,ap=xe.memo(function(){let e=le(),t=e.useStore(iF),[n,o]=xe.useState(!1),i=xe.useRef(0),a=xe.useCallback(()=>{o(!0),I.copyStringToClipboard(window.location.href),clearTimeout(i.current),i.current=setTimeout(()=>o(!1),1200)},[]),l=xe.useCallback(()=>{o(!0);let p=window.location.href.split("/");p[p.length-2]="v",p[p.length-1]=Di.Utils.lns(p[p.length-1]),I.copyStringToClipboard(p.join("/")),clearTimeout(i.current),i.current=setTimeout(()=>o(!1),1200)},[]),r=xe.useCallback(()=>te(this,null,function*(){e.isDirty?e.fileSystemHandle?window.confirm("Do you want to save changes to your current project?")&&(yield e.saveProject()):window.confirm("Do you want to save your current project?")&&(yield e.saveProject()):e.fileSystemHandle||window.confirm("Do you want to save your current project?")&&(yield e.saveProject())}),[]),c=xe.useCallback(()=>te(this,null,function*(){var u;let p=Di.Utils.deepClone(e.document);e.setIsLoading(!0);try{if(e.callbacks.onAssetUpload)for(let m in p.assets){let g=p.assets[m];if(g.src.includes("base64")){let T=rF(g.src,((u=g.fileName)!=null?u:g.type==="video")?"image.png":"image.mp4"),y=yield e.callbacks.onAssetUpload(e,T,m);y?g.src=y:g.src=""}}let h=yield fetch("/api/create",{method:"POST",mode:"no-cors",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({roomId:Di.Utils.uniqueId(),pageId:e.currentPageId,document:p})}).then(m=>m.json());(h==null?void 0:h.url)?window.location.href=h.url:I.warn(h==null?void 0:h.message)}catch(h){I.warn(h.message)}e.setIsLoading(!1)}),[]);return xe.createElement(rp.Root,{dir:"ltr"},xe.createElement(Si,{id:"TD-MultiplayerMenuIcon",isActive:!!t},xe.createElement(ip,null)),xe.createElement(Ot,{variant:"menu",align:"start",id:"TD-MultiplayerMenu"},xe.createElement(pe,{id:"TD-Multiplayer-CopyInviteLink",onClick:a,disabled:!t},xe.createElement(ys.FormattedMessage,{id:"copy.invite.link"}),xe.createElement(Fe,null,n?xe.createElement(Ho.CheckIcon,null):xe.createElement(Ho.ClipboardIcon,null))),xe.createElement(pe,{id:"TD-Multiplayer-CopyReadOnlyLink",onClick:l,disabled:!t},xe.createElement(ys.FormattedMessage,{id:"copy.readonly.link"}),xe.createElement(Fe,null,n?xe.createElement(Ho.CheckIcon,null):xe.createElement(Ho.ClipboardIcon,null))),xe.createElement(nt,{id:"TD-Multiplayer-CopyInviteLinkDivider"}),xe.createElement(pe,{id:"TD-Multiplayer-CreateMultiplayerProject",onClick:r},xe.createElement("a",{href:"https://tldraw.com/r"},xe.createElement(ys.FormattedMessage,{id:"create.multiplayer.project"}))),xe.createElement(pe,{id:"TD-Multiplayer-CopyToMultiplayerProject",onClick:c},xe.createElement(ys.FormattedMessage,{id:"copy.multiplayer.project"}))))});function rF(s,e){var l,r;let t=s.split(","),n=(r=(l=t[0])==null?void 0:l.match(/:(.*?);/))==null?void 0:r[1],o=window.atob(t[1]),i=o.length,a=new Uint8Array(i);for(;i--;)a[i]=o.charCodeAt(i);return new File([a],e,{type:n})}function dp({readOnly:s,showPages:e,showMenu:t,showStyles:n,showZoom:o,sponsor:i,showMultiplayerMenu:a}){let l=le();return rt.createElement(aF,null,(t||e)&&rt.createElement(ro,{side:"left",id:"TD-MenuPanel"},t&&rt.createElement(qc,{sponsor:i,readOnly:s}),a&&rt.createElement(ap,null),e&&rt.createElement(tp,null)),rt.createElement(dF,null),(n||o)&&rt.createElement(ro,{side:"right"},l.readOnly?rt.createElement(lF,null,"Read Only"):rt.createElement(rt.Fragment,null," ",rt.createElement(me,null,rt.createElement(Ic,{onClick:l.undo})),rt.createElement(me,null,rt.createElement(wc,{onClick:l.redo}))),o&&rt.createElement(np,null),n&&!s&&rt.createElement(sp,null)))}var aF=R("div",{width:"100%",position:"absolute",top:0,left:0,right:0,display:"flex",flexDirection:"row",pointerEvents:"none","& > *":{pointerEvents:"all"}}),dF=R("div",{flexGrow:2,pointerEvents:"none"}),lF=R("div",{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"$ui",fontSize:"$1",paddingLeft:"$4",paddingRight:"$1",userSelect:"none"});var v=M(require("react"));var ot=M(require("@radix-ui/react-context-menu"));var qe=require("@radix-ui/react-icons");var Ge=require("react-intl"),cF=s=>s.document.pageStates[s.appState.currentPageId].selectedIds.length,pF=s=>s.settings.isDebugMode,uF=s=>s.document.pageStates[s.appState.currentPageId].selectedIds.some(e=>s.document.pages[s.appState.currentPageId].shapes[e].children!==void 0),hF=s=>s.stopPropagation(),lp=({onBlur:s,children:e})=>v.createElement(ot.Root,{dir:"ltr"},v.createElement(ot.Trigger,{dir:"ltr"},e),v.createElement(mF,{onBlur:s})),mF=v.memo(function({onBlur:e}){let t=le(),n=(0,Ge.useIntl)(),o=t.useStore(cF),i=t.useStore(pF),a=t.useStore(uF),l=v.useRef(null),r=v.useCallback(()=>{t.flipHorizontal()},[t]),c=v.useCallback(()=>{t.flipVertical()},[t]),p=v.useCallback(()=>{t.duplicate()},[t]),u=v.useCallback(()=>{t.toggleLocked()},[t]),h=v.useCallback(()=>{t.group()},[t]),m=v.useCallback(()=>{t.moveToBack()},[t]),g=v.useCallback(()=>{t.moveBackward()},[t]),T=v.useCallback(()=>{t.moveForward()},[t]),y=v.useCallback(()=>{t.moveToFront()},[t]),b=v.useCallback(()=>{t.delete()},[t]),S=v.useCallback(()=>{t.cut()},[t]),w=v.useCallback(()=>{t.copy()},[t]),D=v.useCallback(()=>{t.paste()},[t]),E=v.useCallback(()=>{t.copyImage("svg",{scale:1,quality:1,transparentBackground:!1})},[t]),x=v.useCallback(()=>{t.copyImage("png",{scale:2,quality:1,transparentBackground:!0})},[t]),B=v.useCallback(()=>{t.undo()},[t]),k=v.useCallback(()=>{t.redo()},[t]),ee=v.useCallback(()=>te(this,null,function*(){t.exportImage("png",{scale:2,quality:1,transparentBackground:!0})}),[t]),oe=v.useCallback(()=>te(this,null,function*(){t.exportImage("jpeg",{scale:2,quality:1,transparentBackground:!1})}),[t]),ne=v.useCallback(()=>te(this,null,function*(){t.exportImage("webp",{scale:2,quality:1,transparentBackground:!1})}),[t]),ve=v.useCallback(()=>te(this,null,function*(){t.exportImage("svg",{scale:1,quality:1,transparentBackground:!1})}),[t]),Ie=v.useCallback(()=>te(this,null,function*(){t.copyJson()}),[t]),Ce=v.useCallback(()=>te(this,null,function*(){t.exportJson()}),[t]),Ve=o>0,Ke=o>1,at=o>2;return v.createElement(ot.Content,{dir:"ltr",ref:l,onEscapeKeyDown:hF,asChild:!0,tabIndex:-1,onBlur:e},v.createElement(_t,{id:"TD-ContextMenu"},Ve?v.createElement(v.Fragment,null,v.createElement(Be,{onClick:p,kbd:"#D",id:"TD-ContextMenu-Duplicate"},v.createElement(Ge.FormattedMessage,{id:"duplicate"})),v.createElement(Be,{onClick:r,kbd:"\u21E7H",id:"TD-ContextMenu-Flip_Horizontal"},v.createElement(Ge.FormattedMessage,{id:"flip.horizontal"})),v.createElement(Be,{onClick:c,kbd:"\u21E7V",id:"TD-ContextMenu-Flip_Vertical"},v.createElement(Ge.FormattedMessage,{id:"flip.vertical"})),v.createElement(Be,{onClick:u,kbd:"#\u21E7L",id:"TD-ContextMenu- Lock_Unlock"},v.createElement(Ge.FormattedMessage,{id:"lock"})," / ",v.createElement(Ge.FormattedMessage,{id:"unlock"})),(Ke||a)&&v.createElement(ht,null),Ke&&v.createElement(Be,{onClick:h,kbd:"#G",id:"TD-ContextMenu-Group"},v.createElement(Ge.FormattedMessage,{id:"group"})),a&&v.createElement(Be,{onClick:h,kbd:"#G",id:"TD-ContextMenu-Ungroup"},v.createElement(Ge.FormattedMessage,{id:"ungroup"})),v.createElement(ht,null),v.createElement(da,{label:n.formatMessage({id:"move"}),id:"TD-ContextMenu-Move"},v.createElement(Be,{onClick:y,kbd:"\u21E7]",id:"TD-ContextMenu-Move-To_Front"},v.createElement(Ge.FormattedMessage,{id:"to.front"})),v.createElement(Be,{onClick:T,kbd:"]",id:"TD-ContextMenu-Move-Forward"},v.createElement(Ge.FormattedMessage,{id:"forward"})),v.createElement(Be,{onClick:g,kbd:"[",id:"TD-ContextMenu-Move-Backward"},v.createElement(Ge.FormattedMessage,{id:"backward"})),v.createElement(Be,{onClick:m,kbd:"\u21E7[",id:"TD-ContextMenu-Move-To_Back"},v.createElement(Ge.FormattedMessage,{id:"back"}))),v.createElement(bF,null),Ke&&v.createElement(gF,{hasTwoOrMore:Ke,hasThreeOrMore:at}),v.createElement(ht,null),v.createElement(Be,{onClick:S,kbd:"#X",id:"TD-ContextMenu-Cut"},v.createElement(Ge.FormattedMessage,{id:"cut"})),v.createElement(Be,{onClick:w,kbd:"#C",id:"TD-ContextMenu-Copy"},v.createElement(Ge.FormattedMessage,{id:"copy"})),v.createElement(Be,{onClick:D,kbd:"#V",id:"TD-ContextMenu-Paste"},v.createElement(Ge.FormattedMessage,{id:"paste"})),v.createElement(ht,null),v.createElement(da,{label:`${n.formatMessage({id:"copy.as"})}...`,size:"small",id:"TD-ContextMenu-Copy-As"},v.createElement(Be,{onClick:E,id:"TD-ContextMenu-Copy-as-SVG"},"SVG"),v.createElement(Be,{onClick:x,id:"TD-ContextMenu-Copy-As-PNG"},"PNG"),i&&v.createElement(Be,{onClick:Ie,id:"TD-ContextMenu-Copy_as_JSON"},"JSON")),v.createElement(da,{label:`${n.formatMessage({id:"export.as"})}...`,size:"small",id:"TD-ContextMenu-Export"},v.createElement(Be,{onClick:ve,id:"TD-ContextMenu-Export-SVG"},"SVG"),v.createElement(Be,{onClick:ee,id:"TD-ContextMenu-Export-PNG"},"PNG"),v.createElement(Be,{onClick:oe,id:"TD-ContextMenu-Export-JPG"},"JPG"),v.createElement(Be,{onClick:ne,id:"TD-ContextMenu-Export-WEBP"},"WEBP"),i&&v.createElement(Be,{onClick:Ce,id:"TD-ContextMenu-Export-JSON"},"JSON")),v.createElement(ht,null),v.createElement(Be,{onClick:b,kbd:"\u232B",id:"TD-ContextMenu-Delete"},v.createElement(Ge.FormattedMessage,{id:"delete"}))):v.createElement(v.Fragment,null,v.createElement(Be,{onClick:D,kbd:"#V",id:"TD-ContextMenu-Paste"},v.createElement(Ge.FormattedMessage,{id:"paste"})),v.createElement(Be,{onClick:B,kbd:"#Z",id:"TD-ContextMenu-Undo"},v.createElement(Ge.FormattedMessage,{id:"undo"})),v.createElement(Be,{onClick:k,kbd:"#\u21E7Z",id:"TD-ContextMenu-Redo"},v.createElement(Ge.FormattedMessage,{id:"redo"})))))});function gF({hasThreeOrMore:s}){let e=le(),t=v.useCallback(()=>{e.align("top")},[e]),n=v.useCallback(()=>{e.align("centerVertical")},[e]),o=v.useCallback(()=>{e.align("bottom")},[e]),i=v.useCallback(()=>{e.stretch("vertical")},[e]),a=v.useCallback(()=>{e.distribute("vertical")},[e]),l=v.useCallback(()=>{e.align("left")},[e]),r=v.useCallback(()=>{e.align("centerHorizontal")},[e]),c=v.useCallback(()=>{e.align("right")},[e]),p=v.useCallback(()=>{e.stretch("horizontal")},[e]),u=v.useCallback(()=>{e.distribute("horizontal")},[e]);return v.createElement("span",{id:"TD-ContextMenu-Align_Duplicate"},v.createElement(ot.Root,{dir:"ltr"},v.createElement(ca,{isSubmenu:!0},"Align / Distribute"),v.createElement(ot.Content,{asChild:!0,sideOffset:2,alignOffset:-2},v.createElement(fF,{numberOfSelected:s?"threeOrMore":"twoOrMore"},v.createElement(gn,{onClick:l,id:"TD-ContextMenu-Align_Duplicate-AlignLeft"},v.createElement(qe.AlignLeftIcon,null)),v.createElement(gn,{onClick:r,id:"TD-ContextMenu-Align_Duplicate-AlignCenterHorizontal"},v.createElement(qe.AlignCenterHorizontallyIcon,null)),v.createElement(gn,{onClick:c,id:"TD-ContextMenu-Align_Duplicate-AlignRight"},v.createElement(qe.AlignRightIcon,null)),v.createElement(gn,{onClick:p,id:"TD-ContextMenu-Align_Duplicate-StretchHorizontal"},v.createElement(qe.StretchHorizontallyIcon,null)),s&&v.createElement(gn,{onClick:u,id:"TD-ContextMenu-Align_Duplicate-SpaceEvenlyHorizontal"},v.createElement(qe.SpaceEvenlyHorizontallyIcon,null)),v.createElement(gn,{onClick:t,id:"TD-ContextMenu-Align_Duplicate-AlignTop"},v.createElement(qe.AlignTopIcon,null)),v.createElement(gn,{onClick:n,id:"TD-ContextMenu-Align_Duplicate-AlignCenterVertical"},v.createElement(qe.AlignCenterVerticallyIcon,null)),v.createElement(gn,{onClick:o,id:"TD-ContextMenu-Align_Duplicate-AlignBottom"},v.createElement(qe.AlignBottomIcon,null)),v.createElement(gn,{onClick:i,id:"TD-ContextMenu-Align_Duplicate-StretchVertical"},v.createElement(qe.StretchVerticallyIcon,null)),s&&v.createElement(gn,{onClick:a,id:"TD-ContextMenu-Align_Duplicate-SpaceEvenlyVertical"},v.createElement(qe.SpaceEvenlyVerticallyIcon,null)),v.createElement(la,{offset:13})))))}var fF=R(_t,{display:"grid",variants:{numberOfSelected:{threeOrMore:{gridTemplateColumns:"repeat(5, auto)"},twoOrMore:{gridTemplateColumns:"repeat(4, auto)"}}}}),SF=s=>s.appState.currentPageId,TF=s=>s.document.pages;function bF(){let s=le(),e=s.useStore(SF),t=s.useStore(TF),n=Object.values(t).sort((o,i)=>(o.childIndex||0)-(i.childIndex||0)).filter(o=>o.id!==e);return n.length===0?null:v.createElement(ot.Root,{dir:"ltr"},v.createElement(ca,{isSubmenu:!0},v.createElement(Ge.FormattedMessage,{id:"move.to.page"})),v.createElement(ot.Content,{dir:"ltr",sideOffset:2,alignOffset:-2,asChild:!0},v.createElement(_t,null,n.map(({id:o,name:i},a)=>v.createElement(Be,{key:o,disabled:o===e,onClick:()=>s.moveToPage(o)},i||`Page ${a}`)),v.createElement(la,{offset:13}))))}function da({children:s,label:e,size:t,id:n}){return v.createElement("span",{id:n},v.createElement(ot.Root,{dir:"ltr"},v.createElement(ca,{isSubmenu:!0},e),v.createElement(ot.Content,{dir:"ltr",sideOffset:2,alignOffset:-2,asChild:!0},v.createElement(_t,{size:t},s,v.createElement(la,{offset:13})))))}var la=R(ot.ContextMenuArrow,{fill:"$panel"});function gn(t){var n=t,{onSelect:s}=n,e=Je(n,["onSelect"]);return v.createElement(ot.ContextMenuItem,{dir:"ltr",onSelect:s,asChild:!0},v.createElement(me,f({},e)))}var Be=t=>{var n=t,{id:s}=n,e=Je(n,["id"]);return v.createElement(ot.ContextMenuItem,{asChild:!0,id:s},v.createElement(Xe,f({},e)))},ca=t=>{var n=t,{isSubmenu:s}=n,e=Je(n,["isSubmenu"]);return v.createElement(ot.ContextMenuTriggerItem,{asChild:!0},v.createElement(Xe,f({hasArrow:s},e)))};var cp=require("@radix-ui/react-icons"),Pi=M(require("react"));function pp({onSelect:s}){return Pi.createElement(yF,null,Pi.createElement(wi,{onClick:s},Pi.createElement(cp.DotFilledIcon,null)))}var yF=R("div",{opacity:1,zIndex:100,backgroundColor:"transparent","& svg":{color:"$text"},"&:hover svg":{color:"$text"}});var up=M(require("react"));var wF=s=>s.appState.isLoading;function pa(){let e=le().useStore(wF);return up.createElement(xF,{hidden:!e},"Loading...")}var xF=R("div",{position:"absolute",top:0,left:"50%",transform:"translate(-50%, 0)",borderBottomLeftRadius:"12px",borderBottomRightRadius:"12px",padding:"8px 16px",fontFamily:"var(--fonts-ui)",fontSize:"var(--fontSizes-1)",boxShadow:"var(--shadows-panel)",backgroundColor:"white",zIndex:200,pointerEvents:"none","& > div > *":{pointerEvents:"all"},variants:{transform:{hidden:{transform:"translate(-50%, 100%)"},visible:{transform:"translate(-50%, 0%)"}}}});var fp=require("react-error-boundary");var Rt=M(require("react"));function hp({error:s,resetErrorBoundary:e}){let t=le(),n=()=>{window.location.reload(),e()},o=()=>{let l=document.createElement("textarea");l.value=s.message,document.body.appendChild(l),l.select(),document.execCommand("copy"),l.remove()},i=()=>{t.saveProjectAs()},a=()=>{t.resetDocument(),e()};return Rt.createElement(IF,null,Rt.createElement(CF,null,Rt.createElement("div",null,"We've encountered an error!"),Rt.createElement("pre",null,Rt.createElement("code",null,s.message)),Rt.createElement(vF,null,Rt.createElement(Xe,{onClick:o},"Copy Error"),Rt.createElement(Xe,{onClick:n},"Refresh Page")),Rt.createElement(ht,null),Rt.createElement("p",null,"Keep getting this error?"," ",Rt.createElement("a",{onClick:i,title:"Download your project"},"Download your project")," ","as a backup and then"," ",Rt.createElement("a",{onClick:a,title:"Reset the document"},"reset the document"),".")))}var IF=R("div",{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"$canvas"}),CF=R("div",{backgroundColor:"$panel",border:"1px solid $panelContrast",padding:"$5",borderRadius:8,boxShadow:"$panel",maxWidth:320,color:"$text",fontFamily:"$ui",fontSize:"$2",textAlign:"center",display:"flex",flexDirection:"column",gap:"$3","& > pre":{marginTop:"$3",marginBottom:"$3",textAlign:"left",whiteSpace:"pre-wrap",backgroundColor:"$hover",padding:"$4",borderRadius:"$2",fontFamily:'"Menlo", "Monaco", monospace',fontWeight:500},"& p":{fontFamily:"$body",lineHeight:1.7,padding:"$5",margin:0},"& a":{color:"$text",cursor:"pointer",textDecoration:"underline"},"& hr":{marginLeft:"-$5",marginRight:"-$5"}}),vF=R("div",{display:"flex","& > button > div":{justifyContent:"center",textAlign:"center"}});var kF=fp.ErrorBoundary;function DF({id:s,document:e,currentPageId:t,autofocus:n=!0,showMenu:o=!0,showMultiplayerMenu:i=!0,showPages:a=!0,showTools:l=!0,showZoom:r=!0,showStyles:c=!0,showUI:p=!0,readOnly:u=!1,disableAssets:h=!1,darkMode:m=!1,showSponsorLink:g,onMount:T,onChange:y,onChangePresence:b,onNewProject:S,onSaveProject:w,onSaveProjectAs:D,onOpenProject:E,onOpenMedia:x,onSignOut:B,onSignIn:k,onUndo:ee,onRedo:oe,onPersist:ne,onPatch:ve,onCommand:Ie,onChangePage:Ce,onAssetCreate:Ve,onAssetDelete:Ke,onAssetUpload:at,onSessionStart:gt,onSessionEnd:Pt,onExport:ao}){let[Yn,Bi]=Se.useState(s),[ke,zo]=Se.useState(()=>new un(s,{onMount:T,onChange:y,onChangePresence:b,onNewProject:S,onSaveProject:w,onSaveProjectAs:D,onOpenProject:E,onOpenMedia:x,onSignOut:B,onSignIn:k,onUndo:ee,onRedo:oe,onPersist:ne,onPatch:ve,onCommand:Ie,onChangePage:Ce,onAssetDelete:Ke,onAssetCreate:Ve,onAssetUpload:at,onSessionStart:gt,onSessionEnd:Pt}));return Se.useLayoutEffect(()=>{if(s===Yn)return;let fn=new un(s,{onMount:T,onChange:y,onChangePresence:b,onNewProject:S,onSaveProject:w,onSaveProjectAs:D,onOpenProject:E,onOpenMedia:x,onSignOut:B,onSignIn:k,onUndo:ee,onRedo:oe,onPersist:ne,onPatch:ve,onCommand:Ie,onChangePage:Ce,onAssetDelete:Ke,onAssetCreate:Ve,onAssetUpload:at,onExport:ao,onSessionStart:gt,onSessionEnd:Pt});Bi(s),zo(fn)},[Yn,s]),Se.useEffect(()=>{!e||(e.id===ke.document.id?ke.updateDocument(e):ke.loadDocument(e))},[e,ke]),Se.useEffect(()=>{ke.setDisableAssets(h)},[ke,h]),Se.useEffect(()=>{!t||ke.changePage(t)},[t,ke]),Se.useEffect(()=>{ke.readOnly=u,u||(ke.selectNone(),ke.cancelSession(),ke.setEditingId())},[ke,u]),Se.useEffect(()=>{m!==ke.settings.isDarkMode&&ke.toggleDarkMode()},[ke,m]),Se.useEffect(()=>{ke.callbacks={onMount:T,onChange:y,onChangePresence:b,onNewProject:S,onSaveProject:w,onSaveProjectAs:D,onOpenProject:E,onOpenMedia:x,onSignOut:B,onSignIn:k,onUndo:ee,onRedo:oe,onPersist:ne,onPatch:ve,onCommand:Ie,onChangePage:Ce,onAssetDelete:Ke,onAssetCreate:Ve,onAssetUpload:at,onExport:ao,onSessionStart:gt,onSessionEnd:Pt}},[T,y,b,S,w,D,E,x,B,k,ee,oe,ne,ve,Ie,Ce,Ke,Ve,at,ao,gt,Pt]),Se.useLayoutEffect(()=>{var ua;if(typeof window=="undefined"||!((ua=window.document)==null?void 0:ua.fonts))return;function fn(){ke.refreshBoundingBoxes()}return window.document.fonts.addEventListener("loadingdone",fn),()=>{window.document.fonts.removeEventListener("loadingdone",fn)}},[ke]),Se.createElement(Or.Provider,{value:ke},Se.createElement(PF,{key:Yn||"Tldraw",id:Yn,autofocus:n,showPages:a,showMenu:o,showMultiplayerMenu:i,showStyles:c,showZoom:r,showTools:l,showUI:p,showSponsorLink:g,readOnly:u}))}var PF=Se.memo(function({id:e,autofocus:t,showPages:n,showMenu:o,showMultiplayerMenu:i,showZoom:a,showStyles:l,showTools:r,showSponsorLink:c,readOnly:p,showUI:u}){var Pt,ao;let h=le(),m=Se.useRef(null),g=h.useStore(),{document:T,settings:y,appState:b,room:S}=g,w=g.appState.activeTool==="select",D=T.pages[b.currentPageId],E=T.pageStates[D.id],x=T.assets,{selectedIds:B}=E,k=B.length===1&&D.shapes[B[0]]&&I.getShapeUtil(D.shapes[B[0]].type).hideBounds,ee=B.length===1&&D.shapes[B[0]]&&I.getShapeUtil(D.shapes[B[0]].type).hideResizeHandles,oe=Se.useMemo(()=>({isDarkMode:y.isDarkMode}),[y.isDarkMode]),ne=y.isCadSelectMode?!b.selectByContain:b.selectByContain,ve=Se.useMemo(()=>{let{selectByContain:Yn}=b,{isDarkMode:Bi,isCadSelectMode:ke}=y;if(Bi){let fn=ke?Yn?"69, 155, 255":"105, 209, 73":"180, 180, 180";return{brushFill:`rgba(${fn}, ${ke?.08:.05})`,brushStroke:`rgba(${fn}, ${ke?.5:.25})`,brushDashStroke:`rgba(${fn}, .6)`,selected:"rgba(38, 150, 255, 1.000)",selectFill:"rgba(38, 150, 255, 0.05)",background:"#212529",foreground:"#49555f"}}let zo=ke?Yn?"0, 89, 242":"51, 163, 23":"0,0,0";return{brushFill:`rgba(${zo}, ${ke?.08:.05})`,brushStroke:`rgba(${zo}, ${ke?.4:.25})`,brushDashStroke:`rgba(${zo}, .6)`}},[y.isDarkMode,y.isCadSelectMode,b.selectByContain]),Ie=h.session!==void 0,Ce=Ie&&((Pt=h.session)==null?void 0:Pt.constructor.name)!=="BrushSession"||!w||k||!!E.editingId,Ve=Ie||!w,Ke=Ie&&g.appState.status!=="brushing"||!w,at=Ie||!w||!y.showCloneHandles||E.camera.zoom<.2,gt=pc(y.language);return Se.useLayoutEffect(()=>{y.isDarkMode?window.document.body.classList.add(Ri):window.document.body.classList.remove(Ri)},[y.isDarkMode]),Se.createElement(gp.IntlProvider,{locale:gt.locale,messages:gt.messages},Se.createElement(EF,{ref:m,tabIndex:-0},Se.createElement(pa,null),Se.createElement(BF,{focusableRef:m,autofocus:t}),Se.createElement(lp,null,Se.createElement(kF,{FallbackComponent:hp},Se.createElement(mp.Renderer,{id:e,containerRef:m,shapeUtils:ln,page:D,pageState:E,assets:x,snapLines:b.snapLines,eraseLine:b.eraseLine,grid:8,users:S==null?void 0:S.users,userId:S==null?void 0:S.userId,theme:ve,meta:oe,hideBounds:Ce,hideHandles:Ve,hideResizeHandles:ee,hideIndicators:Ke,hideBindingHandles:!y.showBindingHandles,hideCloneHandles:at,hideRotateHandles:!y.showRotateHandles,hideGrid:!y.showGrid,showDashedBrush:ne,performanceMode:(ao=h.session)==null?void 0:ao.performanceMode,onPinchStart:h.onPinchStart,onPinchEnd:h.onPinchEnd,onPinch:h.onPinch,onPan:h.onPan,onZoom:h.onZoom,onPointerDown:h.onPointerDown,onPointerMove:h.onPointerMove,onPointerUp:h.onPointerUp,onPointCanvas:h.onPointCanvas,onDoubleClickCanvas:h.onDoubleClickCanvas,onRightPointCanvas:h.onRightPointCanvas,onDragCanvas:h.onDragCanvas,onReleaseCanvas:h.onReleaseCanvas,onPointShape:h.onPointShape,onDoubleClickShape:h.onDoubleClickShape,onRightPointShape:h.onRightPointShape,onDragShape:h.onDragShape,onHoverShape:h.onHoverShape,onUnhoverShape:h.onUnhoverShape,onReleaseShape:h.onReleaseShape,onPointBounds:h.onPointBounds,onDoubleClickBounds:h.onDoubleClickBounds,onRightPointBounds:h.onRightPointBounds,onDragBounds:h.onDragBounds,onHoverBounds:h.onHoverBounds,onUnhoverBounds:h.onUnhoverBounds,onReleaseBounds:h.onReleaseBounds,onPointBoundsHandle:h.onPointBoundsHandle,onDoubleClickBoundsHandle:h.onDoubleClickBoundsHandle,onRightPointBoundsHandle:h.onRightPointBoundsHandle,onDragBoundsHandle:h.onDragBoundsHandle,onHoverBoundsHandle:h.onHoverBoundsHandle,onUnhoverBoundsHandle:h.onUnhoverBoundsHandle,onReleaseBoundsHandle:h.onReleaseBoundsHandle,onPointHandle:h.onPointHandle,onDoubleClickHandle:h.onDoubleClickHandle,onRightPointHandle:h.onRightPointHandle,onDragHandle:h.onDragHandle,onHoverHandle:h.onHoverHandle,onUnhoverHandle:h.onUnhoverHandle,onReleaseHandle:h.onReleaseHandle,onError:h.onError,onRenderCountChange:h.onRenderCountChange,onShapeChange:h.onShapeChange,onShapeBlur:h.onShapeBlur,onShapeClone:h.onShapeClone,onBoundsChange:h.updateBounds,onKeyDown:h.onKeyDown,onKeyUp:h.onKeyUp,onDragOver:h.onDragOver,onDrop:h.onDrop}))),u&&Se.createElement(MF,null,y.isFocusMode?Se.createElement(pp,{onSelect:h.toggleFocusMode}):Se.createElement(Se.Fragment,null,Se.createElement(dp,{readOnly:p,showPages:n,showMenu:o,showMultiplayerMenu:i,showStyles:l,showZoom:a,sponsor:c}),Se.createElement(RF,null),r&&!p&&Se.createElement(Kc,null)))))}),BF=Se.memo(function({focusableRef:e,autofocus:t}){return Ol(e),Ul(),Se.useEffect(()=>{var n;t&&((n=e.current)==null||n.focus())},[t]),null}),EF=R("div",{position:"absolute",height:"100%",width:"100%",minHeight:0,minWidth:0,maxHeight:"100%",maxWidth:"100%",overflow:"hidden",boxSizing:"border-box",outline:"none","& .tl-container":{position:"absolute",top:0,left:0,height:"100%",width:"100%",zIndex:1},"& input, textarea, button, select, label, button":{webkitTouchCallout:"none",webkitUserSelect:"none","-webkit-tap-highlight-color":"transparent","tap-highlight-color":"transparent"}}),MF=R("div",{position:"absolute",top:0,left:0,height:"100%",width:"100%",padding:"8px 8px 0 8px",display:"flex",alignItems:"flex-start",justifyContent:"flex-start",pointerEvents:"none",zIndex:2,"& > *":{pointerEvents:"all"}}),RF=R("div",{flexGrow:2});module.exports=Ip(LF);
// @license  2020 Google LLC. Licensed under the Apache License, Version 2.0.
//# sourceMappingURL=index.js.map
